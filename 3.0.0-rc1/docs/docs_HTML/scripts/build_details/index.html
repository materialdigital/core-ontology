<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>build_all.py - Complete Technical Documentation - PMD Core Ontology</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/stylesheets/mkdocs_d2_plugin.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "build_all.py - Complete Technical Documentation";
        var mkdocs_page_input_path = "docs_HTML/scripts/build_details.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> PMD Core Ontology
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Welcome</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Introduction%20to%20Ontologies/">Introduction to Ontologies</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../intro/">Introduction to PMDco v3.x.x</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Reused%20ontologies/">Reused Ontologies</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Ontology_structure2/">Ontology Structure</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../patterns/">Patterns</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../PMDco%20User%20Guide/">PMDco User Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../versions/">Versions and Variants</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../migration/">Migration from 2.x</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Who%20We%20Are%20%26%20How%20to%20Join/">Who We Are & How to Join</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../publications/">Publications</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../acknowledgements/">Acknowledgements</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">PMD Core Ontology</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">build_all.py - Complete Technical Documentation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="build_allpy-complete-technical-documentation">build_all.py - Complete Technical Documentation</h1>
<p><strong>Version:</strong> 1.0<br />
<strong>Date:</strong> January 11, 2026<br />
<strong>File:</strong> <code>build_all.py</code><br />
<strong>Location:</strong> <code>c:\Users\potu\Desktop\PMD\PMD_Docs_Presentation\docs\docs_HTML\scripts\build_all.py</code></p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#system-architecture">System Architecture</a></li>
<li><a href="#dependencies--requirements">Dependencies &amp; Requirements</a></li>
<li><a href="#file-structure--organization">File Structure &amp; Organization</a></li>
<li><a href="#configuration-files">Configuration Files</a></li>
<li><a href="#core-components">Core Components</a></li>
<li><a href="#build-modes">Build Modes</a></li>
<li><a href="#html-generation-process">HTML Generation Process</a></li>
<li><a href="#function-reference">Function Reference</a></li>
<li><a href="#data-flow-diagrams">Data Flow Diagrams</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ol>
<hr />
<h2 id="1-overview">1. Overview</h2>
<h3 id="purpose">Purpose</h3>
<p><code>build_all.py</code> is a <strong>unified static site builder</strong> for PMDco (Platform MaterialDigital Core Ontology) documentation. It combines the functionality of two separate builders (<code>build_docs.py</code> and <code>build_html.py</code>) into a single, comprehensive tool.</p>
<h3 id="what-it-does">What It Does</h3>
<ul>
<li>Converts Markdown files to HTML with rich interactivity</li>
<li>Generates interactive ontology class hierarchies from OWL files</li>
<li>Creates property trees (object, data, annotation properties)</li>
<li>Renders Graphviz diagrams from TTL/SHACL files</li>
<li>Provides a dynamic sidebar, table of contents, search functionality, and theme toggle</li>
<li>Supports both local and remote resource loading</li>
</ul>
<h3 id="key-features">Key Features</h3>
<ol>
<li><strong>Two Build Modes:</strong></li>
<li><code>docs</code>: Simple markdown documents with ontology trees</li>
<li>
<p><code>patterns</code>: Pattern pages with Graphviz diagrams</p>
</li>
<li>
<p><strong>Smart Tag Processing:</strong></p>
</li>
<li><code>@module_indicator</code>: Fetches OWL files and generates ontology class trees</li>
<li><code>@property_indicator</code>: Generates property hierarchies</li>
<li>
<p><code>@Graphviz_renderer</code>: Converts TTL files to interactive diagrams</p>
</li>
<li>
<p><strong>Auto-Detection:</strong> Can automatically detect the appropriate mode based on content</p>
</li>
</ol>
<hr />
<h2 id="2-system-architecture">2. System Architecture</h2>
<h3 id="high-level-architecture">High-Level Architecture</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────────────┐
│                        build_all.py                              │
│                                                                   │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │
│  │  Input Layer │───▶│ Processing   │───▶│ Output Layer │      │
│  │              │    │    Layer     │    │              │      │
│  └──────────────┘    └──────────────┘    └──────────────┘      │
│         │                    │                   │              │
│    Markdown Files      Tag Processing       HTML Files         │
│    OWL/TTL Files       Tree Generation      CSS/JS Embedded    │
│    navigator.yaml      Diagram Rendering    Interactive UI     │
└─────────────────────────────────────────────────────────────────┘
</code></pre></div>
<h3 id="component-relationships">Component Relationships</h3>
<div class="highlight"><pre><span></span><code>build_all.py
├── Configuration Module
│   ├── load_NAVIGATOR_CONFIG()
│   ├── get_feather_icon_svg()
│   └── navigator.yaml (external)
│
├── Docs Mode Pipeline
│   ├── Markdown Parser (markdown2)
│   ├── @module_indicator processor
│   ├── @property_indicator processor
│   ├── OWL/RDF Parser (rdflib)
│   └── Tree Generators
│
├── Patterns Mode Pipeline
│   ├── Markdown Parser (markdown2)
│   ├── @Graphviz_renderer processor
│   ├── TTL Converter (ttl_to_graphviz.py)
│   └── Diagram Generators
│
├── HTML Template Engine
│   ├── TEMPLATE_HTML (embedded)
│   ├── Sidebar Generator
│   ├── TOC Generator
│   └── Navigation Generator
│
└── Utility Functions
    ├── File I/O
    ├── URL Fetching
    └── String Processing
</code></pre></div>
<hr />
<h2 id="3-dependencies-requirements">3. Dependencies &amp; Requirements</h2>
<h3 id="required-python-libraries">Required Python Libraries</h3>
<h4 id="standard-library-built-in">Standard Library (Built-in)</h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">argparse</span>          <span class="c1"># Command-line argument parsing</span>
<span class="kn">import</span> <span class="nn">json</span>              <span class="c1"># JSON encoding/decoding</span>
<span class="kn">import</span> <span class="nn">re</span>                <span class="c1"># Regular expressions for pattern matching</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>      <span class="c1"># URL parsing and manipulation</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>    <span class="c1"># URL fetching (HTTP requests)</span>
<span class="kn">import</span> <span class="nn">importlib.util</span>    <span class="c1"># Dynamic module importing</span>
<span class="kn">import</span> <span class="nn">sys</span>               <span class="c1"># System-specific parameters</span>
<span class="kn">import</span> <span class="nn">tempfile</span>          <span class="c1"># Temporary file creation</span>
<span class="kn">import</span> <span class="nn">html</span>              <span class="c1"># HTML escaping (imported as html_module)</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>  <span class="c1"># Data classes</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>                   <span class="c1"># Object-oriented filesystem paths</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span>  <span class="c1"># Type hints</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>        <span class="c1"># Default dictionaries</span>
</code></pre></div>
<h4 id="third-party-libraries-must-install">Third-Party Libraries (Must Install)</h4>
<ol>
<li><strong>markdown2</strong> (REQUIRED)</li>
<li>Purpose: Convert Markdown to HTML</li>
<li>Install: <code>pip install markdown2</code></li>
<li>
<p>Usage: Renders markdown with extensions (tables, code blocks, etc.)</p>
</li>
<li>
<p><strong>rdflib</strong> (OPTIONAL but highly recommended)</p>
</li>
<li>Purpose: Parse RDF/OWL ontology files</li>
<li>Install: <code>pip install rdflib</code></li>
<li>Usage: Extract class hierarchies, properties, labels from OWL/TTL files</li>
<li>
<p>Components used:</p>
<ul>
<li><code>Graph</code>: RDF graph operations</li>
<li><code>Namespace</code>: URI namespace management</li>
<li><code>RDF, RDFS, OWL, URIRef, Literal</code>: RDF vocabulary</li>
<li><code>SKOS</code>: SKOS vocabulary (for definitions)</li>
</ul>
</li>
<li>
<p><strong>pyyaml</strong> (OPTIONAL but highly recommended)</p>
</li>
<li>Purpose: Parse YAML configuration files</li>
<li>Install: <code>pip install pyyaml</code></li>
<li>Usage: Load <code>navigator.yaml</code> for sidebar/navigation structure</li>
</ol>
<h3 id="external-dependencies">External Dependencies</h3>
<ol>
<li><strong>ttl_to_graphviz.py</strong></li>
<li>Location: Same directory as <code>build_all.py</code></li>
<li>Purpose: Convert TTL/SHACL files to Graphviz DOT format</li>
<li>Must have a class with <code>render_graph()</code> method</li>
<li>
<p>Expected to provide <code>slugify()</code> function</p>
</li>
<li>
<p><strong>navigator.yaml</strong></p>
</li>
<li>Location: <code>../../navigator.yaml</code> (relative to script)</li>
<li>Purpose: Define site structure, navigation, page mappings</li>
<li>
<p>Schema: Custom YAML format (see Configuration Files section)</p>
</li>
<li>
<p><strong>Full Ontology File</strong> (optional)</p>
</li>
<li>Location: Configurable via <code>navigator.yaml</code></li>
<li>Default: <code>https://raw.githubusercontent.com/materialdigital/core-ontology/refs/heads/main/src/ontology/pmdco.ttl</code></li>
<li>Purpose: Enrich classes with labels and definitions</li>
<li>Can be local file or remote URL</li>
</ol>
<hr />
<h2 id="4-file-structure-organization">4. File Structure &amp; Organization</h2>
<h3 id="directory-layout">Directory Layout</h3>
<div class="highlight"><pre><span></span><code>c:\Users\potu\Desktop\PMD\PMD_Docs_Presentation\docs\
│
├── navigator.yaml                    # Site structure configuration
├── index.md                          # Homepage markdown
├── patterns.md                       # Patterns page (uses @Graphviz_renderer)
├── intro.md                          # Various content pages
├── *.md                              # Other markdown files
│
├── docs_HTML/
│   ├── scripts/
│   │   ├── build_all.py              # THIS FILE - Main builder
│   │   ├── run_all.py                # Batch runner (calls build_all.py)
│   │   ├── ttl_to_graphviz.py        # TTL→DOT converter
│   │   ├── generate_ontology_tree.py # (may exist separately)
│   │   └── generate_property_tree.py # (may exist separately)
│   │
│   └── HTML_Docs/                    # OUTPUT DIRECTORY
│       ├── index.html                # Generated HTML files
│       ├── patterns.html
│       ├── intro.html
│       ├── *.html
│       ├── Logo.svg                  # Copied assets
│       └── search-index.json         # Search index
│
└── patterns/                         # Pattern TTL files (for local diagrams)
    ├── temporal region/
    │   └── shape-data.ttl
    └── [other patterns]/
</code></pre></div>
<h3 id="file-naming-conventions">File Naming Conventions</h3>
<ul>
<li><strong>Markdown files:</strong> <code>*.md</code> (can have spaces, e.g., <code>Introduction to Ontologies.md</code>)</li>
<li><strong>HTML output:</strong> <code>*.html</code> (lowercase with hyphens, e.g., <code>introduction-to-ontologies.html</code>)</li>
<li><strong>TTL files:</strong> <code>shape-data.ttl</code>, <code>shape_data.ttl</code>, or similar patterns</li>
<li><strong>DOT files:</strong> <code>*.dot</code> (alternative to TTL for pre-rendered diagrams)</li>
</ul>
<hr />
<h2 id="5-configuration-files">5. Configuration Files</h2>
<h3 id="navigatoryaml">navigator.yaml</h3>
<p><strong>Purpose:</strong> Single source of truth for website structure, navigation, and page mappings</p>
<p><strong>Location:</strong> <code>c:\Users\potu\Desktop\PMD\PMD_Docs_Presentation\docs\navigator.yaml</code></p>
<p><strong>Schema:</strong>
<div class="highlight"><pre><span></span><code><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pmdco-nav/v1&quot;</span>

<span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">icons</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file-text</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">document</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compass</span>
<span class="w">    </span><span class="c1"># ... rotating icons for pages without specific icons</span>

<span class="nt">full_ontology_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://raw.githubusercontent.com/.../pmdco.ttl&quot;</span>
<span class="c1"># Can be URL or local path (relative to navigator.yaml)</span>

<span class="nt">icons</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Feather icon definitions (SVG path data)</span>
<span class="w">  </span><span class="nt">home</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;M3</span><span class="nv"> </span><span class="s">9l9-7</span><span class="nv"> </span><span class="s">9</span><span class="nv"> </span><span class="s">7v11a2</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">1-2</span><span class="nv"> </span><span class="s">2H5a2</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">1-2-2z</span><span class="nv"> </span><span class="s">M9</span><span class="nv"> </span><span class="s">22V12h6v10&quot;</span>
<span class="w">  </span><span class="c1"># ... more icon definitions</span>

<span class="nt">sections</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">getting-started</span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Getting</span><span class="nv"> </span><span class="s">Started&quot;</span>
<span class="w">    </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">home</span>
<span class="w">    </span><span class="nt">pages</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Home</span>
<span class="w">        </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index.html</span><span class="w">          </span><span class="c1"># OUTPUT filename</span>
<span class="w">        </span><span class="nt">md</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index.md</span><span class="w">              </span><span class="c1"># INPUT markdown file</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">home</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Introduction</span>
<span class="w">        </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">intro.html</span>
<span class="w">        </span><span class="nt">md</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">intro.md</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>

<span class="w">  </span><span class="c1"># ... more sections</span>
</code></pre></div></p>
<p><strong>Key Fields:</strong>
- <code>sections[].pages[].href</code>: Output HTML filename (what user sees in browser)
- <code>sections[].pages[].md</code>: Input markdown filename (source file)
- <code>full_ontology_path</code>: URL or path to full ontology for label enrichment</p>
<hr />
<h2 id="6-core-components">6. Core Components</h2>
<h3 id="61-configuration-navigation-system">6.1 Configuration &amp; Navigation System</h3>
<h4 id="global-variables">Global Variables</h4>
<div class="highlight"><pre><span></span><code><span class="n">_NAVIGATOR_CONFIG</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Cached navigator.yaml content</span>
<span class="n">_FULL_ONTOLOGY_LABELS</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># Cached ontology labels (local file)</span>
<span class="n">_FULL_ONTOLOGY_URL_CACHE</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Cached ontology labels (from URL)</span>
<span class="n">_PROPERTY_CACHE</span> <span class="o">=</span> <span class="kc">None</span>           <span class="c1"># Cached property data</span>
</code></pre></div>
<h4 id="load_navigator_config">load_NAVIGATOR_CONFIG()</h4>
<p><strong>Purpose:</strong> Load and cache the navigator.yaml configuration</p>
<p><strong>Process:</strong>
1. Check if already cached → return cached version
2. Locate navigator.yaml (2 levels up from script directory)
3. Parse YAML content
4. Cache result
5. Return dictionary</p>
<p><strong>Used By:</strong>
- <code>generate_sidebar_html()</code>
- <code>generate_page_nav_html()</code>
- <code>generate_search_index_json()</code>
- Property/class enrichment functions</p>
<hr />
<h3 id="62-sidebar-generation">6.2 Sidebar Generation</h3>
<h4 id="generate_sidebar_htmlactive_page-script_dir">generate_sidebar_html(active_page, script_dir)</h4>
<p><strong>Purpose:</strong> Generate dynamic sidebar navigation HTML</p>
<p><strong>Input:</strong>
- <code>active_page</code>: Current page filename (e.g., "patterns.html")
- <code>script_dir</code>: Path to script directory</p>
<p><strong>Process:</strong>
1. Load navigator.yaml configuration
2. Iterate through sections and pages
3. Generate HTML structure:
   - Section headers with icons
   - Page links with active state
   - Collapsible sections
4. Return complete sidebar HTML string</p>
<p><strong>Output Example:</strong>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-sections&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-section&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-section-title&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">svg</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span> Getting Started
    <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link active&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./index.html&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">svg</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span> Home
      <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="cm">&lt;!-- more pages --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="cm">&lt;!-- more sections --&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></p>
<hr />
<h3 id="63-page-navigation-prevnext">6.3 Page Navigation (Prev/Next)</h3>
<h4 id="generate_page_nav_htmlactive_page-script_dir">generate_page_nav_html(active_page, script_dir)</h4>
<p><strong>Purpose:</strong> Generate previous/next page navigation</p>
<p><strong>Process:</strong>
1. Load navigator.yaml
2. Flatten all pages into ordered list
3. Find current page index
4. Get previous and next pages
5. Build navigation HTML with arrows</p>
<p><strong>Output Example:</strong>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-link prev&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./intro.html&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-label&quot;</span><span class="p">&gt;</span>← Previous<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-title&quot;</span><span class="p">&gt;</span>Introduction<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-link next&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./patterns.html&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-label&quot;</span><span class="p">&gt;</span>Next →<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;page-nav-title&quot;</span><span class="p">&gt;</span>Usage Patterns<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div></p>
<hr />
<h3 id="64-search-index-generation">6.4 Search Index Generation</h3>
<h4 id="generate_search_index_jsonscript_dir">generate_search_index_json(script_dir)</h4>
<p><strong>Purpose:</strong> Create a search index for all pages</p>
<p><strong>Process:</strong>
1. Load navigator.yaml
2. Extract all page entries
3. For each page:
   - Extract title, href
   - Parse content headings
4. Build JSON structure:
   <div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Introduction&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./intro.html&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;section&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Getting Started&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;headings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Overview&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Key Concepts&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<hr />
<h2 id="7-build-modes">7. Build Modes</h2>
<h3 id="71-docs-mode">7.1 DOCS MODE</h3>
<p><strong>When Used:</strong>
- Default for most pages
- Pages with <code>@module_indicator</code> or <code>@property_indicator</code> tags
- No <code>@Graphviz_renderer</code> tags present</p>
<p><strong>Processing Pipeline:</strong></p>
<div class="highlight"><pre><span></span><code>Input: Markdown File
  ↓
Strip @Document_indicator tags
  ↓
Convert Markdown → HTML (markdown2)
  ↓
Process @module_indicator tags
  ├─→ Fetch OWL file from URL
  ├─→ Parse OWL content (rdflib or functional syntax parser)
  ├─→ Extract class hierarchy
  ├─→ Enrich with labels from full ontology
  ├─→ Build tree structure
  └─→ Generate interactive HTML tree
  ↓
Process @property_indicator tags
  ├─→ Load full ontology (pmdco.ttl)
  ├─→ Extract properties (object/data/annotation)
  ├─→ Extract subproperty relations
  ├─→ Build property hierarchy
  └─→ Generate interactive HTML tree
  ↓
Extract title from first H1
  ↓
Build Table of Contents from H2/H3
  ↓
Generate sidebar (from navigator.yaml)
  ↓
Generate page navigation (prev/next)
  ↓
Insert into HTML template
  ↓
Output: Complete HTML file
</code></pre></div>
<p><strong>Entry Point:</strong>
<div class="highlight"><pre><span></span><code><span class="n">build_doc_html</span><span class="p">(</span>
    <span class="n">markdown_path</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>      <span class="c1"># Input .md file</span>
    <span class="n">out_html</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>           <span class="c1"># Output .html file</span>
    <span class="n">page_title</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>          <span class="c1"># Optional title override</span>
    <span class="n">prev_page</span><span class="o">=</span><span class="nb">tuple</span><span class="p">,</span>         <span class="c1"># (&quot;href&quot;, &quot;title&quot;)</span>
    <span class="n">next_page</span><span class="o">=</span><span class="nb">tuple</span><span class="p">,</span>         <span class="c1"># (&quot;href&quot;, &quot;title&quot;)</span>
    <span class="n">active_nav</span><span class="o">=</span><span class="nb">str</span>           <span class="c1"># Active nav item</span>
<span class="p">)</span>
</code></pre></div></p>
<hr />
<h3 id="72-patterns-mode">7.2 PATTERNS MODE</h3>
<p><strong>When Used:</strong>
- Pages with <code>@Graphviz_renderer</code> tags
- Specifically for <code>patterns.html</code></p>
<p><strong>Processing Pipeline:</strong></p>
<div class="highlight"><pre><span></span><code>Input: Markdown File
  ↓
Parse @Graphviz_renderer tags
  ├─→ Extract URLs/paths to TTL files
  ├─→ Extract diagram titles (from preceding H2)
  └─→ Generate diagram IDs (slugified folder names)
  ↓
Strip D2 code blocks (if any)
  ↓
Inject graph container placeholders
  ↓
Convert Markdown → HTML (markdown2)
  ↓
Wrap code blocks in collapsible &lt;details&gt;
  ↓
Resolve diagram sources
  ├─→ For each TTL file:
  │   ├─→ If remote URL: Download content
  │   ├─→ If local: Find shape-data.ttl file
  │   ├─→ Call ttl_to_graphviz.py converter
  │   ├─→ Get DOT source and node metadata
  │   └─→ Store in diagrams dictionary
  ↓
Build JavaScript objects
  ├─→ dotDiagrams: {diagram_id: &quot;DOT source&quot;}
  └─→ nodeData: {diagram_id: {node_id: metadata}}
  ↓
Build Table of Contents
  ↓
Generate sidebar
  ↓
Generate page navigation
  ↓
Insert into HTML template
  ├─→ Replace __ARTICLE_CONTENT__
  ├─→ Replace __DIAGRAMS_OBJECT__
  ├─→ Replace __NODEDATA_OBJECT__
  ├─→ Replace __SIDEBAR_HTML__
  └─→ Replace __PAGE_NAV__
  ↓
Output: Complete HTML with embedded diagrams
</code></pre></div>
<p><strong>Entry Point:</strong>
<div class="highlight"><pre><span></span><code><span class="n">build_html</span><span class="p">(</span>
    <span class="n">markdown_path</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>           <span class="c1"># Input .md file</span>
    <span class="n">diagrams_root</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>           <span class="c1"># Root dir for TTL files</span>
    <span class="n">out_html</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>                <span class="c1"># Output .html file</span>
    <span class="n">converter_path</span><span class="o">=</span><span class="n">Path</span><span class="p">,</span>          <span class="c1"># Path to ttl_to_graphviz.py</span>
    <span class="n">strict</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>                  <span class="c1"># Fail on missing diagrams?</span>
    <span class="n">write_per_pattern_js</span><span class="o">=</span><span class="nb">bool</span>     <span class="c1"># Write individual .js files?</span>
<span class="p">)</span>
</code></pre></div></p>
<hr />
<h2 id="8-html-generation-process">8. HTML Generation Process</h2>
<h3 id="81-template-structure">8.1 Template Structure</h3>
<p>The HTML template (<code>TEMPLATE_HTML</code>) is a ~3,500 line string containing:</p>
<ol>
<li><strong>Document Head:</strong></li>
<li>Meta tags (charset, viewport, description)</li>
<li>Title</li>
<li>Google Fonts links</li>
<li>
<p>Embedded CSS (~2,000 lines)</p>
</li>
<li>
<p><strong>Document Body:</strong></p>
</li>
<li>Header with logo, search, theme toggle</li>
<li>Sidebar (placeholder: <code>__SIDEBAR_HTML__</code>)</li>
<li>Main content area (placeholder: <code>__ARTICLE_CONTENT__</code>)</li>
<li>Table of contents (placeholder: <code>__TOC_LIST_ITEMS__</code>)</li>
<li>Page navigation (placeholder: <code>__PAGE_NAV__</code>)</li>
<li>
<p>Embedded JavaScript (~1,500 lines)</p>
</li>
<li>
<p><strong>CSS Sections:</strong></p>
</li>
<li>CSS variables (colors, spacing, fonts)</li>
<li>Theme switching (light/dark mode)</li>
<li>Layout (grid, flexbox)</li>
<li>Component styles (sidebar, TOC, trees, diagrams)</li>
<li>Responsive design (mobile, tablet, desktop)</li>
<li>
<p>Print styles</p>
</li>
<li>
<p><strong>JavaScript Sections:</strong></p>
</li>
<li>Sidebar toggle (mobile)</li>
<li>Theme persistence (localStorage)</li>
<li>TOC active section highlighting</li>
<li>Search functionality</li>
<li>Ontology tree interactions</li>
<li>Graphviz diagram rendering (Viz.js)</li>
<li>Pan/zoom controls</li>
<li>Export functions (SVG, PNG)</li>
</ol>
<h3 id="82-placeholder-replacement">8.2 Placeholder Replacement</h3>
<p>The template uses these placeholders:</p>
<table>
<thead>
<tr>
<th>Placeholder</th>
<th>Replaced With</th>
<th>Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__ARTICLE_CONTENT__</code></td>
<td>Processed markdown HTML</td>
<td>Both</td>
</tr>
<tr>
<td><code>__TOC_LIST_ITEMS__</code></td>
<td>Table of contents <code>&lt;li&gt;</code> elements</td>
<td>Both</td>
</tr>
<tr>
<td><code>__SIDEBAR_HTML__</code></td>
<td>Generated sidebar navigation</td>
<td>Both</td>
</tr>
<tr>
<td><code>__PAGE_NAV__</code></td>
<td>Previous/next page links</td>
<td>Both</td>
</tr>
<tr>
<td><code>__DIAGRAMS_OBJECT__</code></td>
<td>JavaScript object with DOT sources</td>
<td>Patterns</td>
</tr>
<tr>
<td><code>__NODEDATA_OBJECT__</code></td>
<td>JavaScript object with node metadata</td>
<td>Patterns</td>
</tr>
</tbody>
</table>
<p><strong>Replacement Process:</strong>
<div class="highlight"><pre><span></span><code><span class="n">html_out</span> <span class="o">=</span> <span class="n">TEMPLATE_HTML</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__ARTICLE_CONTENT__&quot;</span><span class="p">,</span> <span class="n">article_html</span><span class="p">)</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__TOC_LIST_ITEMS__&quot;</span><span class="p">,</span> <span class="n">toc_items</span><span class="p">)</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__SIDEBAR_HTML__&quot;</span><span class="p">,</span> <span class="n">sidebar_html</span><span class="p">)</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__PAGE_NAV__&quot;</span><span class="p">,</span> <span class="n">page_nav_html</span><span class="p">)</span>
<span class="c1"># Patterns mode only:</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__DIAGRAMS_OBJECT__&quot;</span><span class="p">,</span> <span class="n">dot_obj</span><span class="p">)</span>
<span class="n">html_out</span> <span class="o">=</span> <span class="n">html_out</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__NODEDATA_OBJECT__&quot;</span><span class="p">,</span> <span class="n">node_obj</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="83-css-architecture">8.3 CSS Architecture</h3>
<p><strong>Design System:</strong>
- CSS Custom Properties (variables) for theming
- BEM-like naming conventions
- Mobile-first responsive design
- Print-optimized styles</p>
<p><strong>Key CSS Variables:</strong>
<div class="highlight"><pre><span></span><code><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">--color-primary</span><span class="p">:</span><span class="w"> </span><span class="mh">#00a0e3</span><span class="p">;</span>
<span class="w">  </span><span class="nv">--color-bg-primary</span><span class="p">:</span><span class="w"> </span><span class="mh">#f7f9fc</span><span class="p">;</span>
<span class="w">  </span><span class="nv">--color-text-primary</span><span class="p">:</span><span class="w"> </span><span class="mh">#0f172a</span><span class="p">;</span>
<span class="w">  </span><span class="c">/* ~50 more variables */</span>
<span class="p">}</span>

<span class="nt">body</span><span class="p">.</span><span class="nc">theme-dark</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c">/* Dark mode overrides */</span>
<span class="w">  </span><span class="nv">--color-bg-primary</span><span class="p">:</span><span class="w"> </span><span class="mh">#0f172a</span><span class="p">;</span>
<span class="w">  </span><span class="nv">--color-text-primary</span><span class="p">:</span><span class="w"> </span><span class="mh">#f1f5f9</span><span class="p">;</span>
<span class="w">  </span><span class="c">/* ... */</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Component Hierarchy:</strong>
<div class="highlight"><pre><span></span><code>body
├── .header
│   ├── .logo
│   ├── .search-container
│   └── .theme-toggle
├── .sidebar
│   └── .nav-sections
│       └── .nav-section
│           ├── .nav-section-title
│           └── ul → .nav-link
├── .main-wrapper
│   ├── .content
│   │   └── article (markdown content)
│   └── .toc
└── .page-nav (prev/next links)
</code></pre></div></p>
<hr />
<h2 id="9-function-reference">9. Function Reference</h2>
<h3 id="91-navigation-functions">9.1 Navigation Functions</h3>
<h4 id="get_feather_icon_svgicon_name-navigator_config"><code>get_feather_icon_svg(icon_name, navigator_config)</code></h4>
<ul>
<li><strong>Purpose:</strong> Generate SVG markup for Feather icons</li>
<li><strong>Input:</strong> Icon name (str), navigator config (dict)</li>
<li><strong>Output:</strong> SVG string</li>
<li><strong>Example:</strong>
  <div class="highlight"><pre><span></span><code><span class="n">svg</span> <span class="o">=</span> <span class="n">get_feather_icon_svg</span><span class="p">(</span><span class="s2">&quot;home&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="c1"># Returns: &#39;&lt;svg fill=&quot;none&quot; ...&gt;&lt;path d=&quot;...&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#39;</span>
</code></pre></div></li>
</ul>
<h4 id="load_navigator_configscript_dir"><code>load_NAVIGATOR_CONFIG(script_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Load and cache navigator.yaml</li>
<li><strong>Input:</strong> Script directory path (optional)</li>
<li><strong>Output:</strong> Dictionary with sections, pages, icons</li>
<li><strong>Caching:</strong> Results cached in <code>_NAVIGATOR_CONFIG</code> global</li>
</ul>
<h4 id="generate_sidebar_htmlactive_page-script_dir_1"><code>generate_sidebar_html(active_page, script_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Generate sidebar navigation</li>
<li><strong>Input:</strong> Active page filename, script directory</li>
<li><strong>Output:</strong> HTML string for sidebar</li>
<li><strong>Features:</strong></li>
<li>Hierarchical sections</li>
<li>Active page highlighting</li>
<li>Icon support</li>
<li>Fallback to hardcoded structure</li>
</ul>
<h4 id="generate_page_nav_htmlactive_page-script_dir_1"><code>generate_page_nav_html(active_page, script_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Generate prev/next navigation</li>
<li><strong>Input:</strong> Active page filename, script directory</li>
<li><strong>Output:</strong> HTML string for page navigation</li>
<li><strong>Logic:</strong></li>
<li>Flattens all pages from navigator.yaml</li>
<li>Finds current page index</li>
<li>Gets adjacent pages</li>
<li>Builds navigation links</li>
</ul>
<h4 id="generate_search_index_jsonscript_dir_1"><code>generate_search_index_json(script_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Create JSON search index</li>
<li><strong>Input:</strong> Script directory</li>
<li><strong>Output:</strong> JSON string</li>
<li><strong>Structure:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Page Title&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./page.html&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;section&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Section Name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;headings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;H2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;H3&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></li>
</ul>
<hr />
<h3 id="92-docs-mode-functions">9.2 Docs Mode Functions</h3>
<h4 id="fetch_owl_fileurl"><code>fetch_owl_file(url)</code></h4>
<ul>
<li><strong>Purpose:</strong> Download OWL file from URL</li>
<li><strong>Input:</strong> URL string</li>
<li><strong>Output:</strong> OWL content (string) or None</li>
<li><strong>Features:</strong></li>
<li>Custom User-Agent</li>
<li>30-second timeout</li>
<li>Error handling</li>
</ul>
<h4 id="parse_owl_functional_syntaxowl_content"><code>parse_owl_functional_syntax(owl_content)</code></h4>
<ul>
<li><strong>Purpose:</strong> Parse OWL Functional Syntax</li>
<li><strong>Input:</strong> OWL content string</li>
<li><strong>Output:</strong> Dictionary with classes, child_map, parent_map</li>
<li><strong>Process:</strong></li>
<li>Extract prefix declarations</li>
<li>Parse Declaration(Class(...))</li>
<li>Parse SubClassOf relations</li>
<li>Parse AnnotationAssertion (labels)</li>
<li>Build class hierarchy maps</li>
</ul>
<h4 id="parse_owl_contentowl_content"><code>parse_owl_content(owl_content)</code></h4>
<ul>
<li><strong>Purpose:</strong> Parse OWL (auto-detect format)</li>
<li><strong>Input:</strong> OWL content string</li>
<li><strong>Output:</strong> Dictionary with classes, child_map, parent_map</li>
<li><strong>Formats Supported:</strong></li>
<li>Functional Syntax (if starts with "Prefix(")</li>
<li>RDF/XML (via rdflib)</li>
<li>Turtle (via rdflib)</li>
</ul>
<h4 id="build_treeclasses-child_map-parent_map"><code>build_tree(classes, child_map, parent_map)</code></h4>
<ul>
<li><strong>Purpose:</strong> Build tree structure from flat class data</li>
<li><strong>Input:</strong> Classes dict, child map, parent map</li>
<li><strong>Output:</strong> List of root OntologyClass nodes</li>
<li><strong>Algorithm:</strong></li>
<li>Identify root classes (no parents)</li>
<li>Recursively build child nodes</li>
<li>Sort alphabetically at each level</li>
<li>Avoid circular references (visited set)</li>
</ul>
<h4 id="generate_tree_htmlroots-tree_id"><code>generate_tree_html(roots, tree_id)</code></h4>
<ul>
<li><strong>Purpose:</strong> Generate HTML for ontology tree</li>
<li><strong>Input:</strong> Root nodes, tree ID</li>
<li><strong>Output:</strong> HTML string</li>
<li><strong>Features:</strong></li>
<li>Collapsible nodes</li>
<li>Tooltips with definitions</li>
<li>Search functionality</li>
<li>Expand/collapse all buttons</li>
<li>Depth-based initial state</li>
</ul>
<h4 id="process_module_indicatorshtml_content"><code>process_module_indicators(html_content)</code></h4>
<ul>
<li><strong>Purpose:</strong> Replace @module_indicator tags with trees</li>
<li><strong>Input:</strong> HTML content</li>
<li><strong>Output:</strong> HTML with embedded ontology trees</li>
<li><strong>Process:</strong></li>
<li>Find all <code>&lt;!--@module_indicator:URL--&gt;</code> tags</li>
<li>For each tag:<ul>
<li>Fetch OWL file</li>
<li>Parse content</li>
<li>Enrich with labels</li>
<li>Build tree</li>
<li>Generate HTML</li>
<li>Replace tag with tree HTML</li>
</ul>
</li>
</ul>
<h4 id="load_full_ontology_labelsttl_path"><code>load_full_ontology_labels(ttl_path)</code></h4>
<ul>
<li><strong>Purpose:</strong> Load labels from full ontology file</li>
<li><strong>Input:</strong> Path to pmdco.ttl</li>
<li><strong>Output:</strong> Dictionary with labels and definitions</li>
<li><strong>Caching:</strong> Results cached in <code>_FULL_ONTOLOGY_LABELS</code></li>
<li><strong>Uses:</strong> rdflib to parse TTL and extract RDFS labels, SKOS definitions</li>
</ul>
<h4 id="load_full_ontology_from_urlurl"><code>load_full_ontology_from_url(url)</code></h4>
<ul>
<li><strong>Purpose:</strong> Load labels from remote ontology URL</li>
<li><strong>Input:</strong> URL to TTL file</li>
<li><strong>Output:</strong> Dictionary with labels and definitions</li>
<li><strong>Caching:</strong> Results cached in <code>_FULL_ONTOLOGY_URL_CACHE</code></li>
<li><strong>Timeout:</strong> 60 seconds</li>
</ul>
<h4 id="enrich_classes_from_full_ontologyclasses"><code>enrich_classes_from_full_ontology(classes)</code></h4>
<ul>
<li><strong>Purpose:</strong> Add labels/definitions to classes</li>
<li><strong>Input:</strong> Classes dictionary (modified in-place)</li>
<li><strong>Output:</strong> None (modifies input)</li>
<li><strong>Process:</strong></li>
<li>Load full ontology (from URL or file)</li>
<li>Match class URIs</li>
<li>Add missing labels and definitions</li>
</ul>
<h4 id="load_property_datascript_dir"><code>load_property_data(script_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Load all properties from ontology</li>
<li><strong>Input:</strong> Script directory</li>
<li><strong>Output:</strong> Dictionary with object, data, annotation properties</li>
<li><strong>Caching:</strong> Results cached in <code>_PROPERTY_CACHE</code></li>
<li><strong>Process:</strong></li>
<li>Load full ontology</li>
<li>Extract properties by type (rdf:type)</li>
<li>Extract subPropertyOf relations</li>
<li>Extract labels and definitions</li>
</ul>
<h4 id="build_property_treeproperties-relations"><code>build_property_tree(properties, relations)</code></h4>
<ul>
<li><strong>Purpose:</strong> Build property hierarchy</li>
<li><strong>Input:</strong> Properties dict, relations list</li>
<li><strong>Output:</strong> List of root OntologyProperty nodes</li>
<li><strong>Similar to:</strong> <code>build_tree()</code> but for properties</li>
</ul>
<h4 id="generate_property_tree_htmlroots-tree_id-title"><code>generate_property_tree_html(roots, tree_id, title)</code></h4>
<ul>
<li><strong>Purpose:</strong> Generate HTML for property tree</li>
<li><strong>Input:</strong> Root nodes, tree ID, title</li>
<li><strong>Output:</strong> HTML string</li>
<li><strong>Similar to:</strong> <code>generate_tree_html()</code> but customized for properties</li>
</ul>
<h4 id="process_property_indicatorshtml_content"><code>process_property_indicators(html_content)</code></h4>
<ul>
<li><strong>Purpose:</strong> Replace @property_indicator tags with trees</li>
<li><strong>Input:</strong> HTML content</li>
<li><strong>Output:</strong> HTML with embedded property trees</li>
<li><strong>Process:</strong></li>
<li>Find all <code>&lt;!--@property_indicator:TYPE--&gt;</code> tags</li>
<li>For each tag:<ul>
<li>Load property data</li>
<li>Filter by type (object/data/annotation)</li>
<li>Build tree</li>
<li>Generate HTML</li>
<li>Replace tag with tree HTML</li>
</ul>
</li>
</ul>
<h4 id="build_doc_html"><code>build_doc_html(...)</code></h4>
<ul>
<li><strong>Purpose:</strong> Main entry point for docs mode</li>
<li><strong>Input:</strong></li>
<li><code>markdown_path</code>: Input .md file</li>
<li><code>out_html</code>: Output .html file</li>
<li><code>page_title</code>: Optional title override</li>
<li><code>prev_page</code>: (href, title) tuple</li>
<li><code>next_page</code>: (href, title) tuple</li>
<li><code>active_nav</code>: Active nav item</li>
<li><strong>Output:</strong> Writes HTML file</li>
<li><strong>Process:</strong></li>
<li>Read markdown</li>
<li>Strip document indicators</li>
<li>Render markdown to HTML</li>
<li>Process @module_indicator tags</li>
<li>Process @property_indicator tags</li>
<li>Extract title</li>
<li>Build TOC</li>
<li>Generate sidebar</li>
<li>Generate page navigation</li>
<li>Replace template placeholders</li>
<li>Write output file</li>
</ul>
<hr />
<h3 id="93-patterns-mode-functions">9.3 Patterns Mode Functions</h3>
<h4 id="strip_d2_blocksmd_text"><code>strip_d2_blocks(md_text)</code></h4>
<ul>
<li><strong>Purpose:</strong> Remove D2 diagram code blocks</li>
<li><strong>Input:</strong> Markdown text</li>
<li><strong>Output:</strong> Markdown without D2 blocks</li>
<li><strong>Pattern:</strong> <code>`d2...</code></li>
</ul>
<h4 id="render_markdownmd_text"><code>render_markdown(md_text)</code></h4>
<ul>
<li><strong>Purpose:</strong> Convert markdown to HTML</li>
<li><strong>Input:</strong> Markdown text</li>
<li><strong>Output:</strong> HTML string</li>
<li><strong>Extras:</strong></li>
<li>fenced-code-blocks</li>
<li>tables</li>
<li>header-ids</li>
<li>cuddled-lists</li>
<li>strike</li>
<li>code-friendly</li>
</ul>
<h4 id="wrap_code_in_detailshtml"><code>wrap_code_in_details(html)</code></h4>
<ul>
<li><strong>Purpose:</strong> Wrap code blocks in collapsible sections</li>
<li><strong>Input:</strong> HTML string</li>
<li><strong>Output:</strong> HTML with <code>&lt;details&gt;</code> wrapped code</li>
<li><strong>Pattern:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">details</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;code-block&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">summary</span><span class="p">&gt;</span>📄 View pattern code<span class="p">&lt;/</span><span class="nt">summary</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">details</span><span class="p">&gt;</span>
</code></pre></div></li>
</ul>
<h4 id="build_toc_list_itemsarticle_html"><code>build_toc_list_items(article_html)</code></h4>
<ul>
<li><strong>Purpose:</strong> Extract H2/H3 headings for TOC</li>
<li><strong>Input:</strong> Article HTML</li>
<li><strong>Output:</strong> <code>&lt;li&gt;</code> elements string</li>
<li><strong>Format:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#heading-id&quot;</span><span class="p">&gt;</span>H2 Title<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;toc-h3&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#sub-heading&quot;</span><span class="p">&gt;</span>H3 Title<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</code></pre></div></li>
</ul>
<h4 id="parse_diagram_refsmd_text-slugify_fn"><code>parse_diagram_refs(md_text, slugify_fn)</code></h4>
<ul>
<li><strong>Purpose:</strong> Extract @Graphviz_renderer tags</li>
<li><strong>Input:</strong> Markdown text, slugify function</li>
<li><strong>Output:</strong> List of DiagramRef objects</li>
<li><strong>Process:</strong></li>
<li>Track current H2 heading (for diagram title)</li>
<li>Find all <code>&lt;!--@Graphviz_renderer:PATH--&gt;</code> tags</li>
<li>For each tag:<ul>
<li>Extract path/URL</li>
<li>Decode URL-encoded paths</li>
<li>Extract folder name for diagram ID</li>
<li>Use slugify function for ID</li>
<li>Create DiagramRef with (id, path, title)</li>
</ul>
</li>
</ul>
<h4 id="inject_graph_containersmd_text-refs"><code>inject_graph_containers(md_text, refs)</code></h4>
<ul>
<li><strong>Purpose:</strong> Replace @Graphviz_renderer tags with containers</li>
<li><strong>Input:</strong> Markdown text, diagram references</li>
<li><strong>Output:</strong> Markdown with embedded containers</li>
<li><strong>Container Structure:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid-graph-container&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;graph-{id}&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-header&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-title&quot;</span><span class="p">&gt;</span>{title}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-controls&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-viewport&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-wrapper&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;wrapper-{id}&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid-diagram&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;diagram-{id}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;graph-legend&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></li>
</ul>
<h4 id="_dynamic_import_from_pathpy_path-module_name"><code>_dynamic_import_from_path(py_path, module_name)</code></h4>
<ul>
<li><strong>Purpose:</strong> Dynamically import Python module</li>
<li><strong>Input:</strong> Path to .py file, module name</li>
<li><strong>Output:</strong> Imported module object</li>
<li><strong>Use Case:</strong> Load ttl_to_graphviz.py at runtime</li>
</ul>
<h4 id="_find_converter_classmod"><code>_find_converter_class(mod)</code></h4>
<ul>
<li><strong>Purpose:</strong> Find converter class in module</li>
<li><strong>Input:</strong> Module object</li>
<li><strong>Output:</strong> Converter class</li>
<li><strong>Logic:</strong></li>
<li>Look for classes with <code>render_graph()</code> method</li>
<li>Prefer classes with "Renderer" or "Diagram" in name</li>
</ul>
<h4 id="_find_shape_ttlpattern_dir"><code>_find_shape_ttl(pattern_dir)</code></h4>
<ul>
<li><strong>Purpose:</strong> Locate TTL file in pattern directory</li>
<li><strong>Input:</strong> Pattern directory path</li>
<li><strong>Output:</strong> Path to TTL file or None</li>
<li><strong>Search Pattern:</strong></li>
<li>shape_data.ttl</li>
<li>shape-data.ttl</li>
<li>shape data.ttl</li>
<li>Glob for shape<em>data</em>.ttl</li>
</ul>
<h4 id="_resolve_diagram_sources"><code>_resolve_diagram_sources(...)</code></h4>
<ul>
<li><strong>Purpose:</strong> Convert TTL files to DOT diagrams</li>
<li><strong>Input:</strong></li>
<li><code>refs</code>: List of diagram references</li>
<li><code>diagrams_root</code>: Root directory for local files</li>
<li><code>converter_path</code>: Path to ttl_to_graphviz.py</li>
<li><code>strict</code>: Fail on errors?</li>
<li><code>write_per_pattern_js</code>: Write individual JS files?</li>
<li><strong>Output:</strong> Tuple of (diagrams dict, node_data dict, js_escape function)</li>
<li><strong>Process:</strong></li>
<li>Load and instantiate converter</li>
<li>For each diagram reference:<ul>
<li>If remote URL: Download TTL content</li>
<li>If local: Find shape-data.ttl file</li>
<li>Call converter.render_graph()</li>
<li>Extract DOT source and node metadata</li>
<li>Store in dictionaries</li>
<li>Optionally write per-pattern JS file</li>
</ul>
</li>
<li>Return diagrams and metadata</li>
</ul>
<h4 id="build_dot_diagrams_objectdiagrams-js_escape"><code>build_dot_diagrams_object(diagrams, js_escape)</code></h4>
<ul>
<li><strong>Purpose:</strong> Build JavaScript object with DOT sources</li>
<li><strong>Input:</strong> Diagrams dict, JS escape function</li>
<li><strong>Output:</strong> JavaScript object literal string</li>
<li><strong>Format:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;diagram-id-1&quot;</span><span class="o">:</span><span class="w"> </span><span class="sb">`digraph G { ... }`</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;diagram-id-2&quot;</span><span class="o">:</span><span class="w"> </span><span class="sb">`digraph G { ... }`</span>
<span class="p">}</span>
</code></pre></div></li>
</ul>
<h4 id="build_node_data_objectnode_data_all"><code>build_node_data_object(node_data_all)</code></h4>
<ul>
<li><strong>Purpose:</strong> Build JavaScript object with node metadata</li>
<li><strong>Input:</strong> Node data dict</li>
<li><strong>Output:</strong> JavaScript object literal string</li>
<li><strong>Format:</strong>
  <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;diagram-id-1&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;node-1&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;node-2&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></li>
</ul>
<h4 id="build_html"><code>build_html(...)</code></h4>
<ul>
<li><strong>Purpose:</strong> Main entry point for patterns mode</li>
<li><strong>Input:</strong></li>
<li><code>markdown_path</code>: Input .md file</li>
<li><code>diagrams_root</code>: Root for TTL files</li>
<li><code>out_html</code>: Output .html file</li>
<li><code>converter_path</code>: Path to ttl_to_graphviz.py</li>
<li><code>strict</code>: Fail on missing diagrams?</li>
<li><code>write_per_pattern_js</code>: Write .js files?</li>
<li><strong>Output:</strong> Writes HTML file</li>
<li><strong>Process:</strong></li>
<li>Read markdown</li>
<li>Parse diagram references</li>
<li>Strip D2 blocks</li>
<li>Inject graph containers</li>
<li>Render markdown to HTML</li>
<li>Wrap code in details</li>
<li>Build TOC</li>
<li>Resolve diagram sources</li>
<li>Build JavaScript objects</li>
<li>Generate sidebar</li>
<li>Generate page navigation</li>
<li>Replace template placeholders</li>
<li>Write output file</li>
</ul>
<hr />
<h3 id="94-main-entry-point">9.4 Main Entry Point</h3>
<h4 id="mainargv"><code>main(argv)</code></h4>
<ul>
<li><strong>Purpose:</strong> Command-line interface</li>
<li><strong>Input:</strong> Command-line arguments (optional)</li>
<li><strong>Output:</strong> Exit code (0=success, 1=error)</li>
<li><strong>Arguments:</strong></li>
<li><code>--mode</code>: Build mode (docs/patterns/auto)</li>
<li><code>--markdown</code>: Input markdown file (required)</li>
<li><code>--out</code>: Output HTML file (required)</li>
<li><code>--title</code>: Page title (docs mode)</li>
<li><code>--diagrams-root</code>: Root for TTL files (patterns mode, required)</li>
<li><code>--converter</code>: Path to ttl_to_graphviz.py</li>
<li><code>--no-strict</code>: Don't fail on missing diagrams</li>
<li><code>--prev</code>: Previous page (href|title)</li>
<li><code>--next</code>: Next page (href|title)</li>
<li><code>--active-nav</code>: Active nav item</li>
<li><code>--write-per-pattern-js</code>: Write individual JS files</li>
<li><strong>Auto-Detection:</strong></li>
<li>If <code>--mode auto</code>: Searches for @Graphviz_renderer tags</li>
<li>If found: Use patterns mode</li>
<li>If not found: Use docs mode</li>
<li><strong>Error Handling:</strong></li>
<li>Validates required arguments</li>
<li>Checks file existence</li>
<li>Provides error messages</li>
</ul>
<hr />
<h2 id="10-data-flow-diagrams">10. Data Flow Diagrams</h2>
<h3 id="101-docs-mode-data-flow">10.1 Docs Mode Data Flow</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────┐
│  Input: index.md    │
│  Contains:          │
│  - Markdown text    │
│  - @module_indicator│
│  - @property_ind... │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────────────┐
│  Read Markdown File         │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Strip Document Indicators  │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  markdown2.markdown()       │
│  Converts MD → HTML         │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────────────────────────┐
│  Process @module_indicator Tags                 │
│  ┌───────────────────────────────────────────┐  │
│  │  For each tag:                            │  │
│  │  1. Extract URL                           │  │
│  │  2. fetch_owl_file(url)                   │  │
│  │     ├─→ HTTP GET request                  │  │
│  │     └─→ Returns OWL content               │  │
│  │  3. parse_owl_content(content)            │  │
│  │     ├─→ Detect format                     │  │
│  │     ├─→ Parse with rdflib or regex        │  │
│  │     └─→ Returns {classes, maps}           │  │
│  │  4. enrich_classes_from_full_ontology()   │  │
│  │     ├─→ Load pmdco.ttl                    │  │
│  │     ├─→ Match URIs                        │  │
│  │     └─→ Add labels/definitions            │  │
│  │  5. build_tree()                          │  │
│  │     ├─→ Identify roots                    │  │
│  │     ├─→ Recursively build children        │  │
│  │     └─→ Returns tree structure            │  │
│  │  6. generate_tree_html()                  │  │
│  │     ├─→ Create collapsible nodes          │  │
│  │     ├─→ Add tooltips                      │  │
│  │     └─→ Returns HTML string               │  │
│  │  7. Replace tag with generated HTML       │  │
│  └───────────────────────────────────────────┘  │
└──────────┬──────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────────────────────────┐
│  Process @property_indicator Tags               │
│  ┌───────────────────────────────────────────┐  │
│  │  For each tag:                            │  │
│  │  1. Extract type (object/data/annotation) │  │
│  │  2. load_property_data()                  │  │
│  │     ├─→ Load pmdco.ttl                    │  │
│  │     ├─→ Extract properties by type        │  │
│  │     ├─→ Extract subPropertyOf relations   │  │
│  │     └─→ Returns property data             │  │
│  │  3. build_property_tree()                 │  │
│  │     ├─→ Similar to build_tree()           │  │
│  │     └─→ Returns property tree             │  │
│  │  4. generate_property_tree_html()         │  │
│  │     └─→ Returns HTML string               │  │
│  │  5. Replace tag with generated HTML       │  │
│  └───────────────────────────────────────────┘  │
└──────────┬──────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Extract Title from H1      │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Build TOC from H2/H3       │
│  build_toc_list_items()     │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Generate Sidebar           │
│  generate_sidebar_html()    │
│  ├─→ Load navigator.yaml    │
│  └─→ Build HTML structure   │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Generate Page Navigation   │
│  generate_page_nav_html()   │
│  ├─→ Find prev/next pages   │
│  └─→ Build nav links        │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────────────┐
│  Replace Template Placeholders      │
│  html = TEMPLATE_HTML               │
│  .replace(&quot;__ARTICLE_CONTENT__&quot;, …) │
│  .replace(&quot;__TOC_LIST_ITEMS__&quot;, …)  │
│  .replace(&quot;__SIDEBAR_HTML__&quot;, …)    │
│  .replace(&quot;__PAGE_NAV__&quot;, …)        │
└──────────┬──────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Write Output HTML File     │
│  out_html.write_text(html)  │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Output: index.html         │
│  - Complete static page     │
│  - Embedded CSS/JS          │
│  - Interactive trees        │
│  - Navigation               │
└─────────────────────────────┘
</code></pre></div>
<hr />
<h3 id="102-patterns-mode-data-flow">10.2 Patterns Mode Data Flow</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────┐
│  Input: patterns.md │
│  Contains:          │
│  - Markdown text    │
│  - @Graphviz_rend...│
│  - D2 diagrams      │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────────────┐
│  Read Markdown File         │
└──────────┬──────────────────┘
           │
           ▼
┌──────────────────────────────────────────────┐
│  Parse Diagram References                    │
│  parse_diagram_refs()                        │
│  ┌────────────────────────────────────────┐  │
│  │  Scan for &lt;!--@Graphviz_renderer:...--&gt;│  │
│  │  Extract:                              │  │
│  │  - URL/path to TTL file                │  │
│  │  - Diagram title (from H2)             │  │
│  │  - Folder name → diagram_id            │  │
│  │  Create DiagramRef objects             │  │
│  └────────────────────────────────────────┘  │
└──────────┬───────────────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Strip D2 Code Blocks       │
│  strip_d2_blocks()          │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────────────────────┐
│  Inject Graph Containers                    │
│  inject_graph_containers()                  │
│  Replace each @Graphviz tag with:           │
│  &lt;div class=&quot;mermaid-graph-container&quot;&gt;...&lt;/&gt; │
└──────────┬──────────────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Render Markdown to HTML    │
│  markdown2.markdown()       │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Wrap Code in &lt;details&gt;     │
│  wrap_code_in_details()     │
└──────────┬──────────────────┘
           │
           ▼
┌──────────────────────────────────────────────────────────┐
│  Resolve Diagram Sources                                 │
│  _resolve_diagram_sources()                              │
│  ┌────────────────────────────────────────────────────┐  │
│  │  1. Load ttl_to_graphviz.py module                 │  │
│  │     _dynamic_import_from_path()                    │  │
│  │                                                     │  │
│  │  2. Find converter class                           │  │
│  │     _find_converter_class()                        │  │
│  │     └─→ Look for render_graph() method             │  │
│  │                                                     │  │
│  │  3. Instantiate converter with options             │  │
│  │     converter = Converter(                         │  │
│  │       output_format=&quot;dot&quot;,                         │  │
│  │       include_bnodes=False,                        │  │
│  │       enrich=True,                                 │  │
│  │       max_nodes=500                                │  │
│  │     )                                              │  │
│  │                                                     │  │
│  │  4. For each DiagramRef:                           │  │
│  │     ┌─────────────────────────────────────────┐    │  │
│  │     │ If remote URL:                          │    │  │
│  │     │   ├─→ urllib.request.urlopen()          │    │  │
│  │     │   ├─→ Download TTL content              │    │  │
│  │     │   ├─→ Write to temp file                │    │  │
│  │     │   ├─→ converter.render_graph(tmp_path)  │    │  │
│  │     │   └─→ Delete temp file                  │    │  │
│  │     │                                          │    │  │
│  │     │ If local path:                          │    │  │
│  │     │   ├─→ Find pattern directory            │    │  │
│  │     │   ├─→ _find_shape_ttl()                 │    │  │
│  │     │   │   └─→ Search for shape-data.ttl     │    │  │
│  │     │   └─→ converter.render_graph(ttl_path)  │    │  │
│  │     │                                          │    │  │
│  │     │ Extract from result:                    │    │  │
│  │     │   ├─→ DOT source (Graphviz diagram)     │    │  │
│  │     │   └─→ Node metadata (labels, types)     │    │  │
│  │     │                                          │    │  │
│  │     │ Store in dictionaries:                  │    │  │
│  │     │   ├─→ diagrams[diagram_id] = dot        │    │  │
│  │     │   └─→ node_data[diagram_id] = metadata  │    │  │
│  │     └─────────────────────────────────────────┘    │  │
│  │                                                     │  │
│  │  5. Return (diagrams, node_data, js_escape)        │  │
│  └────────────────────────────────────────────────────┘  │
└──────────┬───────────────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────────────────┐
│  Build JavaScript Objects               │
│  ┌───────────────────────────────────┐  │
│  │ build_dot_diagrams_object()       │  │
│  │   diagrams = {                    │  │
│  │     &quot;temporal-region&quot;: `digraph { │  │
│  │       node1 [label=&quot;...&quot;];        │  │
│  │       ...                         │  │
│  │     }`                            │  │
│  │   }                               │  │
│  └───────────────────────────────────┘  │
│  ┌───────────────────────────────────┐  │
│  │ build_node_data_object()          │  │
│  │   nodeData = {                    │  │
│  │     &quot;temporal-region&quot;: {          │  │
│  │       &quot;node1&quot;: {                  │  │
│  │         &quot;label&quot;: &quot;Process&quot;,       │  │
│  │         &quot;type&quot;: &quot;class&quot;           │  │
│  │       }                           │  │
│  │     }                             │  │
│  │   }                               │  │
│  └───────────────────────────────────┘  │
└──────────┬──────────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Build TOC                  │
│  build_toc_list_items()     │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Generate Sidebar           │
│  generate_sidebar_html()    │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Generate Page Navigation   │
│  generate_page_nav_html()   │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────────────────┐
│  Replace Template Placeholders          │
│  html = TEMPLATE_HTML                   │
│  .replace(&quot;__ARTICLE_CONTENT__&quot;, …)     │
│  .replace(&quot;__TOC_LIST_ITEMS__&quot;, …)      │
│  .replace(&quot;__SIDEBAR_HTML__&quot;, …)        │
│  .replace(&quot;__PAGE_NAV__&quot;, …)            │
│  .replace(&quot;__DIAGRAMS_OBJECT__&quot;, …)     │
│  .replace(&quot;__NODEDATA_OBJECT__&quot;, …)     │
└──────────┬──────────────────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Write Output HTML File     │
│  out_html.write_text(html)  │
└──────────┬──────────────────┘
           │
           ▼
┌─────────────────────────────┐
│  Output: patterns.html      │
│  - Complete static page     │
│  - Embedded diagrams (DOT)  │
│  - Client-side Viz.js       │
│  - Interactive controls     │
│  - Pan/zoom/export          │
└─────────────────────────────┘
</code></pre></div>
<hr />
<h2 id="11-troubleshooting">11. Troubleshooting</h2>
<h3 id="111-common-issues">11.1 Common Issues</h3>
<h4 id="issue-markdown2-is-required">Issue: "markdown2 is required"</h4>
<p><strong>Cause:</strong> markdown2 not installed<br />
<strong>Solution:</strong>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>markdown2
</code></pre></div></p>
<h4 id="issue-rdflib-not-available-cannot-parse-rdfxml">Issue: "rdflib not available, cannot parse RDF/XML"</h4>
<p><strong>Cause:</strong> rdflib not installed<br />
<strong>Solution:</strong>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>rdflib
</code></pre></div></p>
<h4 id="issue-navigatoryaml-not-found">Issue: "navigator.yaml not found"</h4>
<p><strong>Cause:</strong> Script cannot locate navigator.yaml<br />
<strong>Expected Location:</strong> <code>../../navigator.yaml</code> (relative to script)<br />
<strong>Solution:</strong>
- Check file exists at: <code>c:\Users\potu\Desktop\PMD\PMD_Docs_Presentation\docs\navigator.yaml</code>
- Verify script location matches expected structure</p>
<h4 id="issue-failed-to-load-ontology-from-url">Issue: "Failed to load ontology from URL"</h4>
<p><strong>Cause:</strong> Network error, timeout, or invalid URL<br />
<strong>Solution:</strong>
1. Check internet connection
2. Verify URL is accessible in browser
3. Check firewall/proxy settings
4. Increase timeout in <code>fetch_owl_file()</code> or <code>load_full_ontology_from_url()</code></p>
<h4 id="issue-pattern-directory-not-found">Issue: "Pattern directory not found"</h4>
<p><strong>Cause:</strong> Incorrect <code>--diagrams-root</code> path<br />
<strong>Solution:</strong>
- Verify diagrams_root points to correct directory
- Check that pattern subdirectories exist
- For patterns.md: Should be parent directory containing <code>patterns/</code> folder</p>
<h4 id="issue-ttl_to_graphvizpy-not-found">Issue: "ttl_to_graphviz.py not found"</h4>
<p><strong>Cause:</strong> Converter script missing or in wrong location<br />
<strong>Expected Location:</strong> Same directory as build_all.py<br />
<strong>Solution:</strong>
- Verify file exists: <code>c:\Users\potu\Desktop\PMD\PMD_Docs_Presentation\docs\docs_HTML\scripts\ttl_to_graphviz.py</code>
- Use <code>--converter</code> argument to specify custom path</p>
<h4 id="issue-failed-to-fetch-remote-ttl">Issue: "Failed to fetch remote TTL"</h4>
<p><strong>Cause:</strong> URL inaccessible, timeout, or encoding issues<br />
<strong>Solution:</strong>
1. Test URL in browser
2. Check for URL encoding (spaces → %20)
3. Verify User-Agent not blocked
4. Use <code>--no-strict</code> to continue on errors</p>
<h4 id="issue-no-classes-found-in-ontology">Issue: "No classes found in ontology"</h4>
<p><strong>Cause:</strong> OWL file has no class declarations, or parsing failed<br />
<strong>Solution:</strong>
1. Verify OWL file is valid
2. Check format (Functional Syntax, RDF/XML, Turtle)
3. Inspect raw OWL content for expected patterns
4. Enable debug logging in parse functions</p>
<h3 id="112-debugging-tips">11.2 Debugging Tips</h3>
<h4 id="enable-verbose-output">Enable Verbose Output</h4>
<p>Add print statements in key functions:
<div class="highlight"><pre><span></span><code><span class="c1"># In fetch_owl_file():</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Fetching OWL file from: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Fetched </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>

<span class="c1"># In parse_owl_content():</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Parsed </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span><span class="si">}</span><span class="s2"> classes&quot;</span><span class="p">)</span>

<span class="c1"># In build_tree():</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Building tree with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span><span class="si">}</span><span class="s2"> roots&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h4 id="check-intermediate-results">Check Intermediate Results</h4>
<p>Insert debug prints:
<div class="highlight"><pre><span></span><code><span class="c1"># After parsing OWL:</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Classes: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">classes</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">5</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># First 5</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Child map: </span><span class="si">{</span><span class="nb">dict</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">child_map</span><span class="o">.</span><span class="n">items</span><span class="p">())[:</span><span class="mi">3</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># After enrichment:</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Enriched </span><span class="si">{</span><span class="n">enriched_count</span><span class="si">}</span><span class="s2"> classes&quot;</span><span class="p">)</span>
</code></pre></div></p>
<h4 id="validate-file-paths">Validate File Paths</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Check file existence:</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Navigator path exists: </span><span class="si">{</span><span class="n">navigator_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;TTL file exists: </span><span class="si">{</span><span class="n">ttl_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output dir exists: </span><span class="si">{</span><span class="n">out_html</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="test-regex-patterns">Test Regex Patterns</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Test tag matching:</span>
<span class="n">test_md</span> <span class="o">=</span> <span class="s2">&quot;&lt;!--@module_indicator:https://example.com/owl--&gt;&quot;</span>
<span class="n">matches</span> <span class="o">=</span> <span class="n">MODULE_INDICATOR_RE</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">test_md</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span><span class="si">}</span><span class="s2"> module indicators&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="inspect-navigator-config">Inspect Navigator Config</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># After loading:</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">load_NAVIGATOR_CONFIG</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
<h3 id="113-performance-optimization">11.3 Performance Optimization</h3>
<h4 id="cache-management">Cache Management</h4>
<ul>
<li>Navigator config cached in <code>_NAVIGATOR_CONFIG</code></li>
<li>Ontology labels cached in <code>_FULL_ONTOLOGY_LABELS</code></li>
<li>Property data cached in <code>_PROPERTY_CACHE</code></li>
<li><strong>To clear cache:</strong> Restart script or set globals to <code>None</code></li>
</ul>
<h4 id="large-ontologies">Large Ontologies</h4>
<p>If processing very large ontologies (&gt;10,000 classes):
1. Adjust <code>max_nodes</code> in converter options
2. Increase <code>max_edges</code> for complex diagrams
3. Consider pagination or filtering</p>
<h4 id="network-optimization">Network Optimization</h4>
<ul>
<li>Use local files instead of remote URLs when possible</li>
<li>Cache downloaded ontologies locally</li>
<li>Increase timeouts for slow connections</li>
</ul>
<hr />
<h2 id="12-appendix">12. Appendix</h2>
<h3 id="121-tag-reference">12.1 Tag Reference</h3>
<h4 id="module_indicator">@module_indicator</h4>
<p><strong>Format:</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@module_indicator:URL--&gt;</span>
</code></pre></div></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@module_indicator:https://w3id.org/pmd/co/modules/PMD_subset.owl--&gt;</span>
</code></pre></div></p>
<p><strong>Effect:</strong>
- Fetches OWL file from URL
- Parses class hierarchy
- Generates interactive tree
- Replaces tag with HTML tree</p>
<p><strong>Supported Formats:</strong>
- OWL Functional Syntax
- RDF/XML
- Turtle (TTL)</p>
<hr />
<h4 id="property_indicator">@property_indicator</h4>
<p><strong>Format:</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@property_indicator:TYPE--&gt;</span>
</code></pre></div></p>
<p><strong>Types:</strong>
- <code>object</code>: Object properties
- <code>data</code>: Data properties
- <code>annotation</code>: Annotation properties</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@property_indicator:object--&gt;</span>
</code></pre></div></p>
<p><strong>Effect:</strong>
- Loads full ontology
- Extracts properties of specified type
- Builds property hierarchy
- Generates interactive tree
- Replaces tag with HTML tree</p>
<hr />
<h4 id="graphviz_renderer">@Graphviz_renderer</h4>
<p><strong>Format:</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@Graphviz_renderer:PATH_OR_URL--&gt;</span>
</code></pre></div></p>
<p><strong>Example (Remote URL):</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@Graphviz_renderer:https://raw.githubusercontent.com/materialdigital/core-ontology/refs/heads/main/patterns/temporal%20region/shape-data.ttl--&gt;</span>
</code></pre></div></p>
<p><strong>Example (Local Path):</strong>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--@Graphviz_renderer:./patterns/temporal region--&gt;</span>
</code></pre></div></p>
<p><strong>Effect:</strong>
- Downloads TTL file (if URL) or finds local file
- Converts to Graphviz DOT format
- Generates interactive diagram container
- Replaces tag with container HTML
- Embeds DOT source in JavaScript</p>
<p><strong>Notes:</strong>
- Title taken from nearest preceding <code>## Heading</code>
- Diagram ID generated from folder name
- URL encoding preserved for HTTP requests
- Local paths searched for <code>shape-data.ttl</code> variants</p>
<hr />
<h3 id="122-ontologyclass-dataclass">12.2 OntologyClass Dataclass</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">OntologyClass</span><span class="p">:</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span>                                    <span class="c1"># Full URI</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                             <span class="c1"># Human-readable label</span>
    <span class="n">definition</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                        <span class="c1"># SKOS definition</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;OntologyClass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>        <span class="c1"># Child classes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine prefix based on URI&quot;&quot;&quot;</span>
        <span class="c1"># Returns: &#39;pmd&#39;, &#39;bfo&#39;, &#39;ro&#39;, &#39;iao&#39;, &#39;obi&#39;, &#39;chebi&#39;, &#39;owl&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get display name (label or local part)&quot;&quot;&quot;</span>
        <span class="c1"># Returns label if available, else local name from URI</span>
</code></pre></div>
<hr />
<h3 id="123-ontologyproperty-dataclass">12.3 OntologyProperty Dataclass</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">OntologyProperty</span><span class="p">:</span>
    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span>                                    <span class="c1"># Full URI</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                             <span class="c1"># Human-readable label</span>
    <span class="n">definition</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                        <span class="c1"># SKOS definition</span>
    <span class="n">property_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;object&quot;</span>               <span class="c1"># object/data/annotation</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;OntologyProperty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>     <span class="c1"># Sub-properties</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine prefix based on URI&quot;&quot;&quot;</span>
        <span class="c1"># Returns: &#39;pmd&#39;, &#39;bfo&#39;, &#39;ro&#39;, &#39;iao&#39;, &#39;obi&#39;, &#39;owl&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get display name (label or local part)&quot;&quot;&quot;</span>
        <span class="c1"># Returns label if available, else local name from URI</span>
</code></pre></div>
<hr />
<h3 id="124-diagramref-dataclass">12.4 DiagramRef Dataclass</h3>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DiagramRef</span><span class="p">:</span>
    <span class="n">diagram_id</span><span class="p">:</span> <span class="nb">str</span>        <span class="c1"># Slugified folder name</span>
    <span class="n">rel_path</span><span class="p">:</span> <span class="nb">str</span>          <span class="c1"># Relative path or URL to TTL file</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>             <span class="c1"># Diagram title (from H2 or folder name)</span>
</code></pre></div>
<hr />
<h3 id="125-command-line-examples">12.5 Command-Line Examples</h3>
<h4 id="build-single-doc">Build Single Doc</h4>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>build_all.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mode<span class="w"> </span>docs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--markdown<span class="w"> </span>../index.md<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--out<span class="w"> </span>../docs_HTML/HTML_Docs/index.html
</code></pre></div>
<h4 id="build-patterns-page">Build Patterns Page</h4>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>build_all.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mode<span class="w"> </span>patterns<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--markdown<span class="w"> </span>../patterns.md<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--diagrams-root<span class="w"> </span>../<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--out<span class="w"> </span>../docs_HTML/HTML_Docs/patterns.html
</code></pre></div>
<h4 id="auto-detect-mode">Auto-Detect Mode</h4>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>build_all.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--markdown<span class="w"> </span>../intro.md<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--out<span class="w"> </span>../docs_HTML/HTML_Docs/intro.html
</code></pre></div>
<h4 id="with-custom-title-and-navigation">With Custom Title and Navigation</h4>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>build_all.py<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--mode<span class="w"> </span>docs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--markdown<span class="w"> </span>../intro.md<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--out<span class="w"> </span>../docs_HTML/HTML_Docs/intro.html<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--title<span class="w"> </span><span class="s2">&quot;Introduction to PMDco&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--prev<span class="w"> </span><span class="s2">&quot;index.html|Home&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--next<span class="w"> </span><span class="s2">&quot;patterns.html|Usage Patterns&quot;</span>
</code></pre></div>
<hr />
<h2 id="end-of-documentation">End of Documentation</h2>
<p>This documentation covers all aspects of <code>build_all.py</code>. For questions or issues, refer to the source code or contact the development team.</p>
<p><strong>Last Updated:</strong> January 11, 2026<br />
<strong>Author:</strong> AI Documentation Generator<br />
<strong>Version:</strong> 1.0</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
