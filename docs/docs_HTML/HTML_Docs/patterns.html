<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Usage Patterns - PMDco Documentation" name="description" />
    <title>Usage Patterns | PMDco Documentation</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Merriweather:wght@400;700&family=Source+Serif+Pro:wght@400;600;700&display=swap"
        rel="stylesheet" />
    <style>
        /* =====================================================
       PMDco DOCUMENTATION STYLES
       =====================================================
       
       OVERVIEW:
       This stylesheet controls the entire documentation appearance including:
       - CSS Variables (lines ~15-100): Color themes, spacing, typography
       - Theme switching (lines ~80-180): Light/dark mode overrides
       - Layout components: Header, Sidebar, Main content, TOC
       - Mermaid graph containers: Interactive diagram styling
       - Edge/Arrow colors: Theme-dependent stroke colors
       - Edge labels: Theme-dependent text colors (black in light, white in dark)
       
       KEY PATTERNS:
       - Use CSS variables (--color-*) for consistent theming
       - body:not(.theme-dark) class toggles light mode styles
       - Graph edges use !important to override Mermaid defaults
       
       CRITICAL SECTIONS:
       - Lines ~125-180: Edge and arrow color overrides for light/dark modes
       - Lines ~825-875: Edge label color overrides for light/dark modes
       
       ===================================================== */

        /* === CSS VARIABLES - Core design tokens === */
        :root {
            --color-primary: #00a0e3;
            --color-primary-dark: #0077b3;
            --color-primary-light: #33b5eb;
            --color-accent: #7dd3fc;
            --color-surface: rgba(255, 255, 255, 0.92);
            --color-bg-primary: #f7f9fc;
            --color-bg-secondary: #ffffff;
            --color-bg-tertiary: #edf2f7;
            --color-bg-card: #ffffff;
            --color-bg-hover: rgba(0, 160, 227, 0.08);
            --color-text-primary: #0f172a;
            --color-text-secondary: #1f2937;
            --color-text-muted: #475569;
            --color-border: rgba(15, 23, 42, 0.1);
            --color-border-hover: rgba(0, 160, 227, 0.5);
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-info: #3b82f6;
            --color-code-bg: #f3f4f6;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-family-heading: 'Source Serif Pro', Georgia, 'Times New Roman', serif;
            --font-family-body: 'Merriweather', Georgia, serif;
            --font-family-mono: 'JetBrains Mono', monospace;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-full: 9999px;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(0, 160, 227, 0.3);
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --sidebar-width: 280px;
            --header-height: 64px;
            --toc-width: 240px;
            --z-sticky: 200;
            --z-modal: 300;
            --z-tooltip: 400;

            /* Mermaid graph variables */
            --dim: 0.12;
            --pop-header: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
            --pop-header-text: #ffffff;
            --card-bg: #f1f5f9;
            --card-border: #cbd5e1;
            --card-hover: #e2e8f0;
            --pred-color: #475569;
            --val-color: #1e293b;
        }

        body.theme-dark {
            --color-bg-primary: #0a1628;
            --color-bg-secondary: #0d1f35;
            --color-bg-tertiary: #132743;
            --color-bg-card: rgba(19, 39, 67, 0.8);
            --color-bg-hover: rgba(0, 160, 227, 0.1);
            --color-surface: rgba(10, 22, 40, 0.95);
            --color-text-primary: #ffffff;
            --color-text-secondary: #94a3b8;
            --color-text-muted: #64748b;
            --color-border: rgba(148, 163, 184, 0.2);
            --color-code-bg: #1e293b;
            --card-bg: #0f172a;
            --card-border: #475569;
            --card-hover: #334155;
            --pred-color: #94a3b8;
            --val-color: #e2e8f0;
        }

        /* ===========================================
       LIGHT MODE GRAPH CONTAINER OVERRIDES
       Pure white backgrounds per user preference.
       Ensures clean, professional appearance for diagrams.
       =========================================== */
        body:not(.theme-dark) .mermaid-graph-container {
            background: #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        body:not(.theme-dark) .graph-header {
            background: #ffffff;
        }

        body:not(.theme-dark) .graph-viewport {
            background: #ffffff;
        }

        body:not(.theme-dark) .graph-legend {
            background: #ffffff;
        }

        body:not(.theme-dark) .zoom-controls {
            background: #ffffff;
        }

        body:not(.theme-dark) .zoom-btn {
            background: #f8fafc;
        }

        /* ===========================================
       EDGE AND ARROW COLOR OVERRIDES
       =========================================== 
       
       CRITICAL: These styles override Mermaid's default edge colors
       to ensure proper visibility in both light and dark themes.
       
       Dark mode (default): White edges (#ffffff) on dark backgrounds
       Light mode: Black edges (#1e293b) on white backgrounds
       
       The !important flag is necessary to override Mermaid's inline styles.
       
       Components affected:
       - path.flowchart-link: Main edge lines connecting nodes
       - .edgePath path: Alternative edge path selector
       - marker path: Arrowheads at edge endpoints
       
       Both .graph-wrapper (inline view) and .fullscreen-wrapper 
       (fullscreen modal) need separate rules.
       =========================================== */

        /* DARK MODE EDGES (default) - White for visibility on dark backgrounds */
        .graph-wrapper svg path.flowchart-link {
            stroke: #ffffff !important;
        }

        .graph-wrapper svg .edgePath path {
            stroke: #ffffff !important;
        }

        /* Dark mode arrowheads */
        .graph-wrapper svg marker path {
            fill: #ffffff !important;
            stroke: #ffffff !important;
        }

        /* Fullscreen modal - dark mode edges */
        .fullscreen-wrapper svg path.flowchart-link {
            stroke: #ffffff !important;
        }

        .fullscreen-wrapper svg .edgePath path {
            stroke: #ffffff !important;
        }

        .fullscreen-wrapper svg marker path {
            fill: #ffffff !important;
            stroke: #ffffff !important;
        }

        /* LIGHT MODE EDGES - Black (#1e293b) for visibility on white backgrounds */
        body:not(.theme-dark) .graph-wrapper svg path.flowchart-link {
            stroke: #1e293b !important;
        }

        body:not(.theme-dark) .graph-wrapper svg .edgePath path {
            stroke: #1e293b !important;
        }

        /* Light mode arrowheads */
        body:not(.theme-dark) .graph-wrapper svg marker path {
            fill: #1e293b !important;
            stroke: #1e293b !important;
        }

        /* Fullscreen modal - light mode edges */
        body:not(.theme-dark) .fullscreen-wrapper svg path.flowchart-link {
            stroke: #1e293b !important;
        }

        body:not(.theme-dark) .fullscreen-wrapper svg .edgePath path {
            stroke: #1e293b !important;
        }

        body:not(.theme-dark) .fullscreen-wrapper svg marker path {
            fill: #1e293b !important;
            stroke: #1e293b !important;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-base);
            line-height: 1.5;
            color: var(--color-text-primary);
            background: var(--color-bg-primary);
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 20% 50%, rgba(0, 160, 227, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 160, 227, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
        }

        /* Typography */
        h1,
        h2,
        h3,
        h4 {
            font-weight: 600;
            line-height: 1.25;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-md);
        }

        h1 {
            font-size: var(--font-size-4xl);
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-text-primary), var(--color-primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            font-size: var(--font-size-2xl);
            margin-top: var(--spacing-2xl);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--color-border);
        }

        h3 {
            font-size: var(--font-size-xl);
            margin-top: var(--spacing-xl);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text-secondary);
        }

        a {
            color: var(--color-primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--color-primary-light);
            text-decoration: underline;
        }

        strong {
            font-weight: 600;
            color: var(--color-text-primary);
        }

        ul,
        ol {
            margin-bottom: var(--spacing-md);
            padding-left: var(--spacing-xl);
            color: var(--color-text-secondary);
        }

        code:not(pre code) {
            padding: 2px 6px;
            font-size: 0.9em;
            font-family: var(--font-family-mono);
            color: var(--color-primary-light);
            background: var(--color-code-bg);
            border-radius: var(--radius-sm);
        }

        pre {
            margin: var(--spacing-lg) 0;
            padding: var(--spacing-lg);
            background: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            overflow-x: auto;
        }

        pre code {
            font-family: var(--font-family-mono);
            font-size: var(--font-size-sm);
            color: #e2e8f0;
        }

        body:not(.theme-dark) pre code {
            color: #1e293b;
        }

        body:not(.theme-dark) pre {
            background: #f8fafc;
            border-color: #e2e8f0;
        }

        hr {
            border: none;
            border-top: 1px solid var(--color-border);
            margin: var(--spacing-xl) 0;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--color-surface);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--color-border);
            z-index: var(--z-sticky);
            display: flex;
            align-items: center;
            padding: 0 var(--spacing-lg);
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--color-text-primary);
        }

        .header-nav {
            display: flex;
            gap: var(--spacing-xl);
            margin-left: auto;
        }

        .header-nav a {
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-text-secondary);
        }

        .header-nav a:hover {
            color: var(--color-text-primary);
            text-decoration: none;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            margin-left: var(--spacing-md);
            padding: 8px 12px;
            border-radius: var(--radius-full);
            border: 1px solid var(--color-border);
            background: var(--color-bg-secondary);
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .theme-toggle:hover {
            color: var(--color-text-primary);
            border-color: var(--color-border-hover);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
        }

        .theme-label {
            font-size: var(--font-size-sm);
            font-weight: 500;
        }

        .mobile-menu-btn {
            display: none;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: transparent;
            border: none;
            color: var(--color-text-primary);
            cursor: pointer;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: var(--header-height);
            left: 0;
            bottom: 0;
            width: var(--sidebar-width);
            background: var(--color-bg-secondary);
            border-right: 1px solid var(--color-border);
            overflow-y: auto;
            padding: var(--spacing-lg);
            z-index: var(--z-sticky);
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: var(--radius-full);
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: calc(var(--z-modal) - 1);
        }

        .sidebar-overlay.active {
            display: block;
        }

        /* Navigation */
        .nav-section {
            margin-bottom: var(--spacing-xl);
        }

        .nav-section-title {
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-muted);
            margin-bottom: var(--spacing-sm);
        }

        .nav-list {
            list-style: none;
            padding-left: 0;
        }

        .nav-list li {
            margin-bottom: 2px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .nav-link:hover {
            color: var(--color-text-primary);
            background: var(--color-bg-hover);
            text-decoration: none;
        }

        .nav-link.active {
            color: var(--color-primary);
            background: rgba(0, 160, 227, 0.15);
            font-weight: 500;
        }

        .nav-link svg {
            width: 18px;
            height: 18px;
            opacity: 0.7;
        }

        /* Search - Modern & Classic Design */
        .search-container {
            position: relative;
            margin-bottom: var(--spacing-xl);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            padding-left: 44px;
            padding-right: 70px;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-text-primary);
            background: linear-gradient(135deg, var(--color-bg-tertiary) 0%, var(--color-bg-secondary) 100%);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            outline: none;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .search-input::placeholder {
            color: var(--color-text-muted);
            font-weight: 400;
        }

        .search-input:hover {
            border-color: var(--color-primary);
            background: var(--color-bg-secondary);
            box-shadow: 0 2px 8px rgba(0, 160, 227, 0.1);
        }

        .search-input:focus {
            border-color: var(--color-primary);
            background: var(--color-bg-secondary);
            box-shadow: 0 0 0 3px rgba(0, 160, 227, 0.15), 0 4px 12px rgba(0, 160, 227, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--color-text-muted);
            pointer-events: none;
            transition: color 0.2s;
        }

        .search-container:hover .search-icon,
        .search-input:focus ~ .search-icon {
            color: var(--color-primary);
        }

        .search-shortcut {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            padding: 4px 8px;
            font-size: 11px;
            font-family: var(--font-family-mono);
            font-weight: 600;
            letter-spacing: 0.02em;
            color: var(--color-text-muted);
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        /* Search Modal */
        .search-modal {
            position: fixed;
            inset: 0;
            z-index: var(--z-modal);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            display: none;
            align-items: flex-start;
            justify-content: center;
            padding-top: 15vh;
        }

        .search-modal.active {
            display: flex;
        }

        .search-modal-content {
            width: 100%;
            max-width: 640px;
            max-height: 70vh;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .search-modal-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-lg) var(--spacing-xl);
            border-bottom: 1px solid var(--color-border);
            background: var(--color-bg-tertiary);
        }

        .search-modal-header svg {
            flex-shrink: 0;
            color: var(--color-primary);
        }

        .search-modal-input {
            flex: 1;
            padding: var(--spacing-sm) 0;
            font-size: var(--font-size-lg);
            font-weight: 500;
            color: var(--color-text-primary);
            background: transparent;
            border: none;
            outline: none;
        }
        
        .search-modal-input::placeholder {
            color: var(--color-text-muted);
            font-weight: 400;
        }

        .search-results {
            max-height: 400px;
            overflow-y: auto;
            padding: var(--spacing-sm);
        }

        .search-result-item {
            display: block;
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            transition: background var(--transition-fast);
        }

        .search-result-item:hover,
        .search-result-item.selected {
            background: var(--color-bg-hover);
            text-decoration: none;
        }

        .search-result-title {
            font-weight: 500;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .search-result-path {
            font-size: var(--font-size-sm);
            color: var(--color-text-muted);
        }

        .search-no-results {
            padding: var(--spacing-xl);
            text-align: center;
            color: var(--color-text-muted);
        }

        .search-section-label {
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: var(--font-size-xs);
            font-weight: 600;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--color-border);
            background: var(--color-bg-tertiary);
        }

        .search-result-title mark {
            background: rgba(0, 160, 227, 0.3);
            color: var(--color-primary-light);
            padding: 0 2px;
            border-radius: 2px;
        }

        .search-footer {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-lg);
            padding: var(--spacing-sm) var(--spacing-lg);
            border-top: 1px solid var(--color-border);
            font-size: var(--font-size-xs);
            color: var(--color-text-muted);
        
            flex-wrap: wrap;}

        
        .search-index-status {
            margin-left: auto;
            white-space: nowrap;
            opacity: 0.9;
        }
.search-footer kbd {
            padding: 2px 6px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            font-family: var(--font-family-mono);
        }

        /* Search Target Flash - visual feedback when navigating to search result */
        .search-target-flash {
            outline: 3px solid rgba(0, 160, 227, 0.4);
            outline-offset: 4px;
            border-radius: 8px;
            transition: outline-color 0.6s ease;
            animation: flash-fade 1.5s ease-out forwards;
        }

        @keyframes flash-fade {
            0% { outline-color: rgba(0, 160, 227, 0.6); }
            100% { outline-color: transparent; }
        }

        /* Smooth scrolling for the entire page */
        html {
            scroll-behavior: smooth;
        }

        /* Enhanced focus states for accessibility */
        a:focus-visible,
        button:focus-visible,
        input:focus-visible {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        /* Image Viewer */
        .image-viewer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.98);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .image-viewer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .image-viewer-container {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
            cursor: grab;
        }

        .image-viewer-container:active {
            cursor: grabbing;
        }

        .image-viewer-container img,
        .image-viewer-container svg {
            max-width: 95vw;
            max-height: 90vh;
            width: auto;
            height: auto;
            object-fit: contain;
            transform-origin: center center;
            transition: transform 0.05s ease-out;
            user-select: none;
            -webkit-user-drag: none;
            pointer-events: auto;
        }

        .image-viewer-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
            display: flex;
            gap: 8px;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px 16px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .image-viewer-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s;
        }

        .image-viewer-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .image-viewer-close {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(0, 0, 0, 0.3);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .image-viewer-close:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        .content img {
            display: block;
            max-width: 100%;
            height: auto;
            margin: var(--spacing-lg) auto;
            cursor: zoom-in;
            transition: transform 0.2s;
            border-radius: var(--radius-md);
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        .content img:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        /* Image caption styling */
        .content img + em,
        .content p > img + br + em {
            display: block;
            text-align: center;
            color: var(--color-text-muted);
            font-size: var(--font-size-sm);
            margin-top: calc(-1 * var(--spacing-md));
            margin-bottom: var(--spacing-lg);
        }

        /* Ontology Tree Styles */
        .ontology-tree-container {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            max-height: 500px;
            overflow-y: auto;
        }

        .ontology-tree {
            list-style: none;
            padding-left: 0;
            margin: 0;
            font-family: var(--font-family-mono);
            font-size: var(--font-size-sm);
        }

        .ontology-tree ul {
            list-style: none;
            padding-left: 20px;
            margin: 0;
            border-left: 1px dashed var(--color-border);
            margin-left: 8px;
        }

        .ontology-tree li { margin: 4px 0; position: relative; }

        .tree-node {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            cursor: default;
            transition: background var(--transition-fast);
        }

        .tree-node:hover { background: var(--color-bg-hover); }

        .tree-toggle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            border: none;
            background: var(--color-bg-secondary);
            color: var(--color-text-muted);
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            flex-shrink: 0;
        }

        .tree-toggle:hover { background: var(--color-primary); color: white; }
        .tree-toggle.collapsed::before { content: '▶'; }
        .tree-toggle.expanded::before { content: '▼'; }
        .tree-toggle-placeholder { width: 18px; height: 18px; flex-shrink: 0; }
        .tree-prefix { color: var(--color-text-muted); font-size: 0.85em; }
        .tree-label { color: var(--color-primary-light); font-weight: 500; }
        .tree-node.has-definition { cursor: help; }
        .tree-node.has-definition .tree-label { border-bottom: 1px dotted var(--color-text-muted); }
        .tree-children { overflow: hidden; transition: max-height 0.2s ease-out; }
        .tree-children.collapsed { max-height: 0 !important; }

        .tree-toolbar {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--color-border);
            flex-wrap: wrap;
            align-items: center;
        }

        .tree-toolbar-btn {
            padding: 6px 12px;
            font-size: var(--font-size-xs);
            font-weight: 500;
            color: var(--color-text-secondary);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            cursor: pointer;
        }

        .tree-toolbar-btn:hover { color: var(--color-text-primary); border-color: var(--color-primary); }

        .tree-search {
            flex: 1;
            max-width: 250px;
            padding: 6px 12px;
            font-size: var(--font-size-sm);
            color: var(--color-text-primary);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            outline: none;
        }

        .tree-search:focus { border-color: var(--color-primary); }
        .tree-stats { font-size: var(--font-size-xs); color: var(--color-text-muted); margin-left: auto; }
        .tree-node.search-match .tree-label { background: rgba(0, 160, 227, 0.3); padding: 0 2px; border-radius: 2px; }

        .tree-tooltip {
            position: fixed;
            z-index: 1000;
            max-width: 400px;
            padding: 12px 16px;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            font-size: var(--font-size-sm);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s;
        }

        .tree-tooltip.visible { opacity: 1; }
        .tree-tooltip-title { font-weight: 600; color: var(--color-text-primary); margin-bottom: 6px; }
        .tree-tooltip-uri { font-family: var(--font-family-mono); font-size: var(--font-size-xs); color: var(--color-text-muted); word-break: break-all; margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--color-border); }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            padding: var(--spacing-2xl);
            flex: 1;
            min-height: calc(100vh - var(--header-height));
        }

        .content-wrapper {
            max-width: 1000px;
            margin: 0 auto;
        }

        .breadcrumbs {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            font-size: var(--font-size-sm);
        }

        .breadcrumbs a {
            color: var(--color-text-muted);
        }

        .breadcrumbs .current {
            color: var(--color-text-secondary);
        }

        /* Content Box with Background */
        .content, .article-content {
            background: var(--color-bg-card);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        }

        .content h1, .content h2, .content h3, .article-content h1, .article-content h2, .article-content h3 {
            font-family: var(--font-family-heading);
            letter-spacing: -0.02em;
        }

        .content p, .content li, .article-content p, .article-content li {
            font-family: var(--font-family-body);
            line-height: 1.8;
            letter-spacing: 0.01em;
        }

        /* TOC */
        .toc {
            position: fixed;
            top: calc(var(--header-height) + var(--spacing-2xl));
            right: var(--spacing-xl);
            width: var(--toc-width);
            max-height: calc(100vh - var(--header-height) - 4rem);
            overflow-y: auto;
            padding: var(--spacing-md);
            background: var(--color-bg-card);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            backdrop-filter: blur(8px);
        }

        .toc-title {
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-muted);
            margin-bottom: var(--spacing-md);
        }

        .toc-list {
            list-style: none;
            padding-left: 0;
        }

        .toc-list a {
            display: block;
            font-size: var(--font-size-sm);
            color: var(--color-text-muted);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-left: 2px solid transparent;
            transition: all var(--transition-fast);
        }

        .toc-list a:hover,
        .toc-list a.active {
            color: var(--color-primary);
            border-left-color: var(--color-primary);
            background: var(--color-bg-hover);
            text-decoration: none;
        }

        .toc-list .toc-h3 {
            padding-left: var(--spacing-lg);
        }

        /* Page Nav */
        .page-nav {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
            margin-top: var(--spacing-2xl);
            padding-top: var(--spacing-xl);
            border-top: 1px solid var(--color-border);
        }

        .page-nav-link {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
            padding: var(--spacing-lg);
            background: var(--color-bg-card);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            transition: all var(--transition-fast);
        }

        .page-nav-link:hover {
            border-color: var(--color-primary);
            text-decoration: none;
            box-shadow: var(--shadow-glow);
        }

        .page-nav-link.next {
            text-align: right;
        }

        .page-nav-label {
            font-size: var(--font-size-xs);
            font-weight: 500;
            color: var(--color-text-muted);
            text-transform: uppercase;
        }

        .page-nav-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-primary);
        }

        /* Footer */
        .footer {
            margin-top: var(--spacing-2xl);
            padding: var(--spacing-xl) 0;
            border-top: 1px solid var(--color-border);
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
        }

        .footer-links a {
            font-size: var(--font-size-sm);
            color: var(--color-text-muted);
        }

        .footer-copyright {
            font-size: var(--font-size-sm);
            color: var(--color-text-muted);
        }

        /* === MERMAID GRAPH CONTAINER === */
        .mermaid-graph-container {
            position: relative;
            margin: var(--spacing-xl) 0;
            background: linear-gradient(135deg, var(--color-bg-card) 0%, rgba(13, 31, 53, 0.95) 100%);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .graph-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-sm) var(--spacing-lg);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.03) 0%, transparent 100%);
            border-bottom: 1px solid var(--color-border);
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .graph-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--color-text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .graph-title::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--color-primary);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--color-primary);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .graph-controls {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .graph-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 36px;
            height: 32px;
            padding: 0 10px;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-text-secondary);
            background: linear-gradient(180deg, var(--color-bg-tertiary) 0%, var(--color-bg-secondary) 100%);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .graph-btn:hover {
            color: var(--color-text-primary);
            border-color: var(--color-primary);
            background: var(--color-bg-hover);
            box-shadow: 0 0 12px rgba(0, 160, 227, 0.2);
        }

        .graph-viewport {
            position: relative;
            min-height: 450px;
            max-height: 600px;
            overflow: hidden;
            background: radial-gradient(ellipse at center, rgba(0, 160, 227, 0.03) 0%, transparent 70%);
            cursor: grab;
        }

        .graph-viewport:active {
            cursor: grabbing;
        }

        .graph-wrapper {
            transform-origin: 0 0;
            transition: transform 0.05s;
            will-change: transform;
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            min-width: 100%;
            min-height: 100%;
        }

        .graph-wrapper svg {
            max-width: none;
            display: block;
            overflow: visible;
            min-width: 100px;
            min-height: 100px;
        }

        .mermaid-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 100%;
            min-height: 100%;
        }

        .mermaid-diagram svg {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        
        /* Graphviz (Viz.js) edge & label theming */
        :root {
            --graph-edge-color: #ffffff;
            --graph-edge-label-color: #ffffff;
        }

        body:not(.theme-dark) {
            --graph-edge-color: #1e293b;
            --graph-edge-label-color: #1e293b;
        }

        /* Graphviz uses g.edge, g.node (similar to Mermaid), but with different internal shapes */
        .graph-wrapper svg g.edge path,
        .fullscreen-wrapper svg g.edge path {
            stroke: var(--graph-edge-color) !important;
        }

        .graph-wrapper svg g.edge polygon,
        .fullscreen-wrapper svg g.edge polygon {
            fill: var(--graph-edge-color) !important;
            stroke: var(--graph-edge-color) !important;
        }

        .graph-wrapper svg g.edge text,
        .graph-wrapper svg g.edge tspan,
        .fullscreen-wrapper svg g.edge text,
        .fullscreen-wrapper svg g.edge tspan {
            fill: var(--graph-edge-label-color) !important;
        }

        /* Focus + search states */
        .graph-wrapper svg g.edge.dimmed,
        .fullscreen-wrapper svg g.edge.dimmed {
            opacity: 0.12 !important;
        }

        .graph-wrapper svg g.edge.highlight-edge path,
        .fullscreen-wrapper svg g.edge.highlight-edge path {
            stroke: var(--color-primary) !important;
            stroke-width: 2.5px !important;
        }

        .graph-wrapper svg g.edge.highlight-edge polygon,
        .fullscreen-wrapper svg g.edge.highlight-edge polygon {
            fill: var(--color-primary) !important;
            stroke: var(--color-primary) !important;
        }

        .graph-wrapper svg g.node.search-match rect,
        .graph-wrapper svg g.node.search-match polygon,
        .graph-wrapper svg g.node.search-match ellipse {
            stroke: var(--color-success) !important;
            stroke-width: 3px !important;
            filter: drop-shadow(0 0 8px rgba(34, 197, 94, 0.55));
        }

        /* Search UI */
        .graph-search {
            height: 32px;
            min-width: 160px;
            padding: 0 10px;
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
            outline: none;
            font-size: var(--font-size-sm);
        }

        .graph-search:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(0, 160, 227, 0.15);
        }

        .graph-search-clear {
            min-width: 32px;
            padding: 0 8px;
            opacity: 0.8;
        }

        .graph-search-clear:hover {
            opacity: 1;
        }

/* Mermaid node styles */
        .graph-wrapper svg g.node {
            cursor: pointer;
            transition: all 0.2s;
        }

        .graph-wrapper svg g.node:hover {
            filter: brightness(1.1);
        }

        .graph-wrapper svg g.node.selected rect,
        .graph-wrapper svg g.node.selected polygon,
        .graph-wrapper svg g.node.selected ellipse {
            stroke-width: 3px !important;
            filter: drop-shadow(0 0 8px var(--color-primary));
        }

        .graph-wrapper svg g.node.dim {
            opacity: var(--dim) !important;
        }

        .graph-wrapper svg g.node.hovered rect,
        .graph-wrapper svg g.node.hovered polygon,
        .graph-wrapper svg g.node.hovered ellipse {
            stroke: var(--color-primary) !important;
            stroke-width: 3px !important;
            filter: drop-shadow(0 0 10px var(--color-primary));
        }

        .graph-wrapper svg g.node.ancestor rect,
        .graph-wrapper svg g.node.ancestor polygon,
        .graph-wrapper svg g.node.ancestor ellipse {
            stroke: var(--color-primary) !important;
            stroke-width: 2.5px !important;
            stroke-dasharray: 6 4;
        }

        /* ===========================================
       EDGE LABEL STYLES
       Controls the text color of relationship labels on graph edges.
       - Dark mode: white labels for visibility on dark backgrounds
       - Light mode: black labels for visibility on white backgrounds
       =========================================== */

        /* Dark mode edge labels - white text (default) */
        .graph-wrapper svg g.edgeLabel text,
        .graph-wrapper svg g.edgeLabel tspan {
            fill: #ffffff !important;
        }

        .fullscreen-wrapper svg g.edgeLabel text,
        .fullscreen-wrapper svg g.edgeLabel tspan {
            fill: #ffffff !important;
        }

        /* Light mode edge labels - black text */
        body:not(.theme-dark) .graph-wrapper svg g.edgeLabel text,
        body:not(.theme-dark) .graph-wrapper svg g.edgeLabel tspan {
            fill: #1e293b !important;
        }

        body:not(.theme-dark) .fullscreen-wrapper svg g.edgeLabel text,
        body:not(.theme-dark) .fullscreen-wrapper svg g.edgeLabel tspan {
            fill: #1e293b !important;
        }

        /* Edge dimming for focus/highlight interactions */
        .graph-wrapper svg g.edgePath.dim {
            opacity: var(--dim) !important;
        }

        .graph-wrapper svg g.edgeLabel.dim {
            opacity: var(--dim) !important;
        }

        .graph-wrapper svg g.edgePath.dim path {
            opacity: var(--dim) !important;
        }

        /* Edge highlighting when connected nodes are selected */
        .graph-wrapper svg g.edgePath.highlight {
            opacity: 1 !important;
        }

        .graph-wrapper svg g.edgePath.highlight path {
            opacity: 1 !important;
        }

        .graph-wrapper svg g.edgeLabel.highlight {
            opacity: 1 !important;
        }

        .graph-wrapper svg g.edgePath.highlight path {
            stroke: var(--color-primary) !important;
            stroke-width: 2.5px !important;
        }

        .graph-wrapper svg g.edgeLabel.highlight text,
        .graph-wrapper svg g.edgeLabel.highlight tspan {
            fill: var(--color-primary) !important;
            font-weight: 700;
        }

        .graph-wrapper svg g.edgePath.typeEdge path {
            stroke-dasharray: 1.2 6 !important;
            stroke-linecap: round !important;
        }

        .graph-wrapper svg g.edgeLabel.typeEdge text,
        .graph-wrapper svg g.edgeLabel.typeEdge tspan {
            fill: var(--color-primary) !important;
        }

        .zoom-controls {
            position: absolute;
            top: 12px;
            right: 12px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            background: var(--color-bg-secondary);
            padding: 8px;
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--color-border);
            z-index: 100;
        }

        .zoom-btn {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 8px;
            cursor: pointer;
            font-size: 16px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            color: var(--color-text-primary);
            user-select: none;
        }

        .zoom-btn:hover {
            background: var(--color-primary);
            color: white;
            transform: scale(1.05);
        }

        .zoom-level {
            text-align: center;
            font-size: var(--font-size-xs);
            color: var(--color-text-muted);
            padding: 4px;
            font-weight: 500;
        }

        /* Fullscreen modal */
        .fullscreen-overlay {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: var(--color-bg-primary);
            display: none;
            flex-direction: column;
        }

        .fullscreen-overlay.active {
            display: flex;
        }

        .fullscreen-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--color-bg-secondary);
            border-bottom: 1px solid var(--color-border);
        }

        .fullscreen-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .fullscreen-close {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: 8px 16px;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-text-primary);
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .fullscreen-close:hover {
            background: var(--color-error);
            border-color: var(--color-error);
            color: white;
        }

        .fullscreen-viewport {
            flex: 1;
            position: relative;
            overflow: hidden;
            cursor: grab;
        }

        .fullscreen-viewport:active {
            cursor: grabbing;
        }

        .fullscreen-wrapper {
            transform-origin: 0 0;
            transition: transform 0.05s;
            will-change: transform;
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            min-width: 100%;
            min-height: 100%;
        }

        .fullscreen-wrapper svg {
            max-width: none;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .fullscreen-zoom-controls {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            background: var(--color-bg-secondary);
            padding: 10px;
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--color-border);
            z-index: 100;
        }

        .fullscreen-zoom-btn {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: 10px;
            cursor: pointer;
            font-size: 18px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            color: var(--color-text-primary);
            user-select: none;
        }

        .fullscreen-zoom-btn:hover {
            background: var(--color-primary);
            color: white;
            transform: scale(1.05);
        }

        .fullscreen-zoom-level {
            text-align: center;
            font-size: var(--font-size-sm);
            color: var(--color-text-muted);
            padding: 6px;
            font-weight: 500;
        }

        /* Popover */
        .graph-popover {
            position: fixed;
            z-index: 1000;
            display: none;
            min-width: 340px;
            max-width: 420px;
            max-height: 70vh;
            overflow-y: auto;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: popIn 0.2s;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: translateY(-10px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .graph-popover.visible {
            display: block;
        }

        .pop-head {
            padding: 16px 20px;
            border-bottom: 1px solid var(--color-border);
            background: var(--pop-header);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            color: var(--pop-header-text);
            position: relative;
        }

        .pop-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--pop-header-text);
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 6px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: rgba(255, 255, 255, 0.95);
        }

        .pop-uri {
            font-size: 11px;
            opacity: 0.85;
            word-break: break-all;
            font-family: var(--font-family-mono);
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            margin-top: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
        }

        .pop-actions {
            margin-top: 12px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .chip {
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chip:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .close-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }

        .pop-body {
            padding: 16px 20px;
        }

        .section {
            margin-bottom: 16px;
        }

        .section:last-child {
            margin-bottom: 0;
        }

        .sec-title {
            font-size: 11px;
            font-weight: 700;
            color: var(--color-text-muted);
            text-transform: uppercase;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.5px;
        }

        .count {
            background: var(--color-primary);
            color: white;
            padding: 2px 7px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
        }

        .trips {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .trip {
            background: var(--card-bg);
            padding: 12px 14px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            transition: all 0.2s;
        }

        .trip:hover {
            border-color: var(--color-primary);
            background: var(--card-hover);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .pred {
            font-size: 10px;
            color: var(--pred-color);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 4px;
            letter-spacing: 0.5px;
        }

        .val {
            font-size: 13px;
            color: var(--val-color);
            font-weight: 500;
            font-family: var(--font-family-mono);
        }

        .empty {
            text-align: center;
            padding: 20px;
            color: var(--color-text-muted);
            font-size: 12px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px dashed var(--card-border);
        }

        /* Toast */
        .graph-toast {
            position: fixed;
            left: 50%;
            bottom: 18px;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.92);
            color: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 999px;
            padding: 10px 14px;
            font-size: 13px;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
            display: none;
            z-index: 2000;
            backdrop-filter: blur(6px);
            max-width: min(520px, calc(100% - 24px));
            text-align: center;
        }

        body:not(.theme-dark) .graph-toast {
            background: rgba(255, 255, 255, 0.94);
            color: rgba(0, 0, 0, 0.86);
            border: 1px solid rgba(0, 0, 0, 0.10);
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.18);
        }

        /* Legend */
        .graph-legend {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.2) 100%);
            border-top: 1px solid var(--color-border);
        }

        .legend-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: var(--font-size-xs);
            font-weight: 500;
            color: var(--color-text-secondary);
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: var(--radius-full);
        }

        .legend-swatch {
            width: 14px;
            height: 14px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .swatch-class {
            background: linear-gradient(135deg, #b34dff 0%, #4a148c 100%);
        }

        .swatch-individual {
            background: linear-gradient(135deg, #e8f0ff 0%, #1e40af 100%);
        }

        .swatch-literal {
            background: linear-gradient(135deg, #fef3c7 0%, #d97706 100%);
        }

        .swatch-categorical {
            background: linear-gradient(135deg, #d1fae5 0%, #059669 100%);
        }

        .swatch-subclass {
            background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
        }

        .swatch-type {
            background: linear-gradient(135deg, #00a0e3 0%, #0077b3 100%);
        }

        .swatch-bfo {
            background: linear-gradient(135deg, #b34dff 0%, #7c3aed 100%);
        }

        .swatch-obi {
            background: linear-gradient(135deg, #a78bbc 0%, #7c5c8f 100%);
        }

        .swatch-pmd {
            background: linear-gradient(135deg, #6b7fa3 0%, #4a5568 100%);
        }

        .swatch-shacl {
            background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%);
        }

        .swatch-constraint {
            background: linear-gradient(135deg, #fb923c 0%, #ea580c 100%);
        }

        /* Responsive */
        @media (max-width: 1280px) {
            .toc {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform var(--transition-normal);
                z-index: var(--z-modal);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: var(--spacing-lg);
            }

            .header-nav {
                display: none;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .page-nav {
                grid-template-columns: 1fr;
            }
        }

        /* Image Viewer */
        .image-viewer-overlay {
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.98);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .image-viewer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .image-viewer-container {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: grab;
        }

        .image-viewer-container:active {
            cursor: grabbing;
        }

        .image-viewer-container img,
        .image-viewer-container svg {
            max-width: 90vw;
            max-height: 85vh;
            object-fit: contain;
            transform-origin: center center;
            transition: transform 0.1s ease-out;
            user-select: none;
            -webkit-user-drag: none;
        }

        .image-viewer-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10001;
            display: flex;
            gap: 8px;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px 16px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .image-viewer-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s;
        }

        .image-viewer-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .image-viewer-close {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(0, 0, 0, 0.3);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .image-viewer-close:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        .viewable-image,
        .article-content svg {
            cursor: zoom-in;
            transition: transform 0.2s;
        }

        .viewable-image:hover,
        .article-content svg:hover {
            transform: scale(1.02);
        }

        body.no-scroll {
            overflow: hidden;
        }
    

        /* Search enhancements */
        .search-result-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: var(--spacing-md);
        }
        .search-result-badge {
            font-size: 11px;
            letter-spacing: 0.06em;
            font-weight: 700;
            color: var(--color-text-muted);
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            padding: 2px 8px;
            border-radius: 999px;
            flex: 0 0 auto;
            user-select: none;
        }
        .search-result-snippet {
            margin-top: 6px;
            font-size: var(--font-size-sm);
            line-height: 1.45;
            color: var(--color-text-secondary);
        }
        .search-target-flash {
            outline: 3px solid rgba(124, 58, 237, 0.35);
            outline-offset: 4px;
            border-radius: 12px;
            transition: outline-color 0.6s ease;
        }

        /* Collapsible code blocks */
        details.code-block {
            margin: var(--spacing-lg) 0;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            background: var(--color-code-bg);
            overflow: hidden;
        }

        details.code-block summary {
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-bg-tertiary);
            border-bottom: 1px solid var(--color-border);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--color-text-muted);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            user-select: none;
            transition: all var(--transition-fast);
        }

        details.code-block summary:hover {
            background: var(--color-bg-hover);
            color: var(--color-text-primary);
        }

        details.code-block summary::marker,
        details.code-block summary::-webkit-details-marker {
            display: none;
        }

        details.code-block summary::before {
            content: '▶';
            font-size: 10px;
            transition: transform 0.2s ease;
        }

        details.code-block[open] summary::before {
            transform: rotate(90deg);
        }

        details.code-block pre {
            margin: 0;
            border: none;
            border-radius: 0;
            max-height: 400px;
            overflow: auto;
        }

        details.code-block code {
            font-size: var(--font-size-sm);
        }

</style>
</head>

<body>
    <header class="header">
        <button aria-label="Toggle menu" class="mobile-menu-btn">
            <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="24">
                <line x1="3" x2="21" y1="12" y2="12"></line>
                <line x1="3" x2="21" y1="6" y2="6"></line>
                <line x1="3" x2="21" y1="18" y2="18"></line>
            </svg>
        </button>
        <a class="header-logo" href="./intro.html">
            <img src="./Logo.svg" alt="MaterialDigital Logo" style="height: 36px; width: auto;">
            <span style="display: flex; align-items: baseline; gap: 0.25rem;">
                <span style="font-weight: 700; background: linear-gradient(135deg, #00a0e3 0%, #0077b3 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">PMD</span><span style="font-weight: 600; color: var(--color-text-primary);">co</span>
                <span style="font-size: 0.8em; font-weight: 500; color: var(--color-text-muted); margin-left: 0.15rem;">Documentation</span>
            </span>
        </a>
        <nav class="header-nav" style="display: flex; gap: 0.5rem; align-items: center;">
            <a href="https://materialdigital.de/" target="_blank" style="display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.5rem 1rem; border-radius: 2rem; background: linear-gradient(135deg, rgba(0, 160, 227, 0.1) 0%, rgba(0, 119, 179, 0.08) 100%); color: var(--color-text-primary); font-weight: 500; font-size: 0.875rem; text-decoration: none; transition: all 0.2s ease; border: 1px solid rgba(0, 160, 227, 0.2);">
                <svg fill="none" height="14" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="14"><path d="M12 2a10 10 0 1 0 0 20a10 10 0 0 0 0-20 M12 16v-4 M12 8h.01"></path></svg>
                About
            </a>
            <a href="https://github.com/materialdigital/core-ontology" target="_blank" style="display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.5rem 1rem; border-radius: 2rem; background: linear-gradient(135deg, rgba(45, 55, 72, 0.1) 0%, rgba(26, 32, 44, 0.08) 100%); color: var(--color-text-primary); font-weight: 500; font-size: 0.875rem; text-decoration: none; transition: all 0.2s ease; border: 1px solid rgba(45, 55, 72, 0.2);">
                <svg fill="none" height="14" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="14"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                GitHub
            </a>
            <a href="https://materialdigital.github.io/core-ontology" target="_blank" style="display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.5rem 1rem; border-radius: 2rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.08) 100%); color: var(--color-text-primary); font-weight: 500; font-size: 0.875rem; text-decoration: none; transition: all 0.2s ease; border: 1px solid rgba(16, 185, 129, 0.2);">
                <svg fill="none" height="14" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="14"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20 M4 4.5A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
                Widoco
            </a>
        </nav>
        <button aria-label="Toggle theme" class="theme-toggle">
            <span class="theme-icon">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"></path>
                </svg>
            </span>
            <span class="theme-label">Dark</span>
        </button>
    </header>

    <div class="sidebar-overlay"></div>
    <aside class="sidebar">
        <div class="search-container">
            <svg class="search-icon" fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                width="18">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" x2="16.65" y1="21" y2="16.65"></line>
            </svg>
            <input class="search-input" placeholder="Search docs..." readonly="" type="text" />
            <span class="search-shortcut">Ctrl+K</span>
        </div>
        <nav class="nav-sections">
            <div class="nav-section">
                <h3 class="nav-section-title">Getting Started</h3>
                <ul class="nav-list">
                    <li><a class="nav-link" href="./index.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><path d="M9 22V12h6v10"></path>
</svg>
                            Home
                        </a></li>
                    <li><a class="nav-link" href="./intro.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M12 2a10 10 0 1 0 0 20a10 10 0 0 0 0-20"></path><path d="M12 16v-4"></path><path d="M12 8h.01"></path>
</svg>
                            Introduction
                        </a></li>
                    <li><a class="nav-link" href="./introduction-to-ontologies.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path>
</svg>
                            Introduction to Ontologies
                        </a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-section-title">Ontology Guide</h3>
                <ul class="nav-list">
                    <li><a class="nav-link" href="./ontology-structure.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M3 3h7v7H3z"></path><path d="M14 3h7v7h-7z"></path><path d="M14 14h7v7h-7z"></path><path d="M3 14h7v7H3z"></path>
</svg>
                            Ontology Structure
                        </a></li>
                    <li><a class="nav-link active" href="./patterns.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
</svg>
                            Usage Patterns
                        </a></li>
                    <li><a class="nav-link" href="./pmdco-user-guide.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M2 4h7a4 4 0 0 1 4 4v13a3 3 0 0 0-3-3H2z"></path><path d="M22 4h-7a4 4 0 0 0-4 4v13a3 3 0 0 1 3-3h8z"></path>
</svg>
                            User Guide
                        </a></li>
                    <li><a class="nav-link" href="./reused-ontologies.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M18 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M6 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M18 22a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path d="M8.59 13.51l6.83 3.98"></path><path d="M15.41 6.51l-6.82 3.98"></path>
</svg>
                            Reused Ontologies
                        </a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-section-title">Development</h3>
                <ul class="nav-list">
                    <li><a class="nav-link" href="./glossary-and-tools.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M4 4.5A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path>
</svg>
                            Glossary &amp; Tools
                        </a></li>
                    <li><a class="nav-link" href="./migration.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M5 12h14"></path><path d="M12 5l7 7-7 7"></path>
</svg>
                            Migration
                        </a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-section-title">Resources</h3>
                <ul class="nav-list">
                    <li><a class="nav-link" href="./versions.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M12 2a10 10 0 1 0 0 20a10 10 0 0 0 0-20"></path><path d="M12 6v6l4 2"></path>
</svg>
                            Versions
                        </a></li>
                    <li><a class="nav-link" href="./publications.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M12 15a7 7 0 1 0 0-14 7 7 0 0 0 0 14z"></path><path d="M8.21 13.89L7 23l5-3 5 3-1.21-9.12"></path>
</svg>
                            Publications
                        </a></li>
                    <li><a class="nav-link" href="./references.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
                            References
                        </a></li>
                </ul>
            </div>
            <div class="nav-section">
                <h3 class="nav-section-title">About</h3>
                <ul class="nav-list">
                    <li><a class="nav-link" href="./who-we-are.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><path d="M9 7a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"></path><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
</svg>
                            Who We Are
                        </a></li>
                    <li><a class="nav-link" href="./acknowledgements.html">
                            <svg fill="none" height="18" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="18">
    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
</svg>
                            Acknowledgements
                        </a></li>
                </ul>
            </div></nav>
    </aside>

    <main class="main-content">
        <div class="content-wrapper">
            <nav class="breadcrumbs">
                <a href="./">Home</a><span>/</span><span class="current">Usage Patterns</span>
            </nav>

            <article class="content">
                <h1 id="usage-patterns">Usage Patterns</h1>

<!--@Document_indicator: Text,links, Patterns -->

<p>In ontology development and usage, <strong>usage patterns</strong> play a critical role in addressing recurring modeling requirements. These patterns provide standardized, reusable semantic snippets that facilitate consistent representation of relationships between instances and entities. Furthermore, such patterns may be used to create SHACL shapes to include constraints in a knowledge representation. By following usage patterns, ontology users and developers can ensure uniformity, clarity, and reusability in their models.</p>

<p>The sections below illustrate how to read and apply these patterns. Each pattern includes its purpose, description, relevant properties, visualization, and example.</p>

<h2 id="pattern-1-temporal-region">Pattern 1 - Temporal Region</h2>

<!--Please provide the link to the pattern (raw data ttl file) in the repository-->

<div class="mermaid-graph-container" id="graph-temporal-region">
  <div class="graph-header">
    <div class="graph-title">Pattern 1 - Temporal Region</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-temporal-region">
      <div class="mermaid-diagram" id="diagram-temporal-region"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Specifying the boundaries of a process on the time axis. </li>
<li><strong>Description</strong>: This graph describes a set of temporal relationships among processes, temporal regions, and continuant entities. The graph models how different kinds of entities relate to time and duration through their association with temporal regions and instants.
Within this model, there are two processes — (ex:process_1) and (ex:process_2) — each representing an occurrence or event that unfolds over time. Both processes are linked to distinct one-dimensional temporal regions (ex:period_1, ex:period_2), via the occupies_temporal_region property. This expresses that each process extends through a particular temporal duration.
The temporal structure is further refined through hierarchical and boundary definitions. The region (ex:period_1) is described as a proper_temporal_part_of (ex:period_2), indicating that the first period is entirely contained within the second, but not identical to it. The larger region (ex:period_2) has defined temporal boundaries: it has_first_instant (ex:start) and has_last_instant (ex:end), both of which are represented as zero-dimensional temporal regions, signifying discrete points in time marking the beginning and end of that duration.
In addition to the processes and periods, the model includes a continuant entity, (ex:object_1), which exists_at a particular temporal region, (ex:some_time). This denotes that the continuant maintains existence at or during a specific time interval, emphasizing persistence or presence within the temporal framework. </li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix ex: &lt;https://www.example.org/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@base &lt;https://w3id.org/pmd/co/test#&gt; .

@prefix process: &lt;http://purl.obolibrary.org/obo/BFO_0000015&gt;  . #Class
@prefix continuant: &lt;http://purl.obolibrary.org/obo/BFO_0000002&gt; .  #Class
@prefix temporal_region: &lt;http://purl.obolibrary.org/obo/BFO_0000008&gt; . #Class
@prefix one-dimensional_temporal_region: &lt;http://purl.obolibrary.org/obo/BFO_0000038&gt; . #Class
@prefix zero-dimensional_temporal_region: &lt;http://purl.obolibrary.org/obo/BFO_0000148&gt; . #Class

@prefix occupies_temporal_region: &lt;http://purl.obolibrary.org/obo/BFO_0000199&gt; . #ObjectProperty
@prefix proper_temporal_part_of: &lt;http://purl.obolibrary.org/obo/BFO_0000136&gt; . #ObjectProperty
@prefix has_first_instant: &lt;http://purl.obolibrary.org/obo/BFO_0000222&gt; . #ObjectProperty
@prefix has_last_instant: &lt;http://purl.obolibrary.org/obo/BFO_0000224&gt; . #ObjectProperty
@prefix exists_at: &lt;http://purl.obolibrary.org/obo/BFO_0000108&gt; . #ObjectProperty

&lt;https://w3id.org/pmd/co/test/shape/temporal_region&gt; rdf:type owl:Ontology .

ex:process_1 a process: .
ex:process_2 a process: .
ex:period_1 a one-dimensional_temporal_region: .
ex:period_2 a one-dimensional_temporal_region: . 
ex:some_time a temporal_region: .
ex:object_1 a continuant: .
ex:start a zero-dimensional_temporal_region: .
ex:end a zero-dimensional_temporal_region: .

ex:process_1 occupies_temporal_region: ex:period_1 . 
ex:process_2 occupies_temporal_region: ex:period_2 .
ex:period_2 has_first_instant: ex:start . 
ex:period_2 has_last_instant: ex:end .
ex:period_1 proper_temporal_part_of: ex:period_2 .
ex:object_1 exists_at: ex:some_time .

</code></pre>
</details>

<p>(see folder <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/temporal%20region">patterns/temporal region</a>)</p>

<hr />

<h2 id="pattern-2-process-chain">Pattern 2 - Process Chain</h2>

<div class="mermaid-graph-container" id="graph-process-chain">
  <div class="graph-header">
    <div class="graph-title">Pattern 2 - Process Chain</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-process-chain">
      <div class="mermaid-diagram" id="diagram-process-chain"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represent processes, consisting of simultaneous and serial subprocesses. </li>
<li><strong>Description</strong>: This graph describes a structured process chain that organizes several interrelated process steps within a defined sequence. The graph defines relationships among processes using temporal and structural object properties.
At the highest level, there is a parent process (ex:process_parent), which serves as the overarching workflow. This process begins with (ex:process_step1) and concludes with (ex:process_step3), as indicated by the starts_with and ends_with relationships. The parent process is composed of several parts — specifically (ex:process_step1), (ex:process_step2a), (ex:process_step2b), and (ex:process_step3) — through the has_part property, defining the hierarchical structure of the process.
The sequence begins with (ex:process_step1), which acts as the initial phase. This step precedes (ex:process_step2a), (ex:process_step2b), and (ex:process_step3), establishing it as the starting point from which subsequent processes emerge. Among the intermediate steps, (ex:process_step2a) and (ex:process_step2b) are connected not only sequentially but also through simultaneity: (ex:process_step2a) is defined as simultaneous_with (ex:process_step2b), indicating that they occur at the same time within the overall process.
Finally, both (ex:process_step2a) and (ex:process_step2b) lead to (ex:process_step3), the final step of the chain. This closing process represents the conclusion of the overall workflow, marking the endpoint of the structured and partially parallel sequence defined in the RDF model.</li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix ex: &lt;https://www.example.org/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@base &lt;https://w3id.org/pmd/co/test#&gt; .

@prefix process: &lt;http://purl.obolibrary.org/obo/BFO_0000015&gt;  . #Class

@prefix has_part: &lt;http://purl.obolibrary.org/obo/BFO_0000051&gt; . #ObjectProperty 
@prefix precedes: &lt;http://purl.obolibrary.org/obo/BFO_0000063&gt; . #ObjectProperty
@prefix starts_with: &lt;http://purl.obolibrary.org/obo/RO_0002224&gt; . #ObjectProperty
@prefix ends_with: &lt;http://purl.obolibrary.org/obo/RO_0002230&gt; . #ObjectProperty
@prefix simultaneous_with: &lt;http://purl.obolibrary.org/obo/RO_0002082&gt; . #ObjectProperty

&lt;https://w3id.org/pmd/co/test/shape/process_chain&gt; rdf:type owl:Ontology .

ex:process_parent a process: .
ex:process_step1 a process: .
ex:process_step2a a process: .
ex:process_step2b a process: .
ex:process_step3 a process: .


ex:process_parent starts_with: ex:process_step1 .
ex:process_parent ends_with: ex:process_step3 .
ex:process_parent has_part: ex:process_step1, ex:process_step2a, ex:process_step2b, ex:process_step3 .

ex:process_step1 precedes: ex:process_step2a, ex:process_step2b, ex:process_step3 .

ex:process_step2a precedes: ex:process_step3 .
ex:process_step2a simultaneous_with: ex:process_step2b .
</code></pre>
</details>

<p>(see folder <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/process%20chain">patterns/process chain</a>)</p>

<hr />

<h2 id="pattern-3-process-inputs-and-outputs">Pattern 3 - Process Inputs and Outputs</h2>

<div class="mermaid-graph-container" id="graph-input-and-output-of-processes">
  <div class="graph-header">
    <div class="graph-title">Pattern 3 - Process Inputs and Outputs</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-input-and-output-of-processes">
      <div class="mermaid-diagram" id="diagram-input-and-output-of-processes"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Describes how to represent inputs and outputs for planned processes typically involving material entities or information-bearing entities.</li>
<li><strong>Description</strong>: A planned process with possibility of multiple inputs and outputs, e.g., testing properties of a metallic sample, or transforming a piece of material into another product.</li>
<li><strong>Further notes</strong>: There are also the properties <a href="http://purl.obolibrary.org/obo/RO_0002233">has input</a> and <a href="http://purl.obolibrary.org/obo/RO_0002234">has output</a> from RO. It is intended to use the OBI <a href="http://purl.obolibrary.org/obo/OBI_0000293">has specified input</a> and <a href="http://purl.obolibrary.org/obo/OBI_0000299">has specified output</a> on <a href="http://purl.obolibrary.org/obo/OBI_0000011">planned processes</a> (as also indicated by the domain of those) and the RO variant on other kinds of processes.  </li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix ex: &lt;http://example.com/&gt; .
@base &lt;https://w3id.org/pmd/co/test&gt; .


@prefix planned_process: &lt;http://purl.obolibrary.org/obo/OBI_0000011&gt; .
@prefix manufacturing_process: &lt;https://w3id.org/pmd/co/PMD_0000833&gt; .
@prefix coating: &lt;https://w3id.org/pmd/co/PMD_0000563&gt; .
@prefix has_specified_input: &lt;http://purl.obolibrary.org/obo/OBI_0000293&gt; .
@prefix has_specified_output: &lt;http://purl.obolibrary.org/obo/OBI_0000299&gt; .
@prefix object: &lt;http://purl.obolibrary.org/obo/BFO_0000030&gt; .

&lt;https://w3id.org/pmd/co/test&gt; rdf:type owl:Ontology  .

manufacturing_process: owl:subClassOf planned_process: .

ex:process1 a manufacturing_process: ;   
        has_specified_input: ex:object1 ;
        has_specified_output: ex:object2 . 

ex:process2 a coating:;  
        has_specified_input: ex:object2  ; 
        has_specified_output: ex:object3 . 

ex:object1 a object:
ex:object2 a object:
ex:object3 a object:
</code></pre>
</details>

<p>(see folder <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/input%20and%20output%20of%20processes">patterns/input and output of processes</a>)</p>

<hr />

<h2 id="pattern-4-realizable-entities-role">Pattern 4 - Realizable Entities (Role)</h2>

<div class="mermaid-graph-container" id="graph-realizable-entity-role">
  <div class="graph-header">
    <div class="graph-title">Pattern 4 - Realizable Entities (Role)</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-realizable-entity-role">
      <div class="mermaid-diagram" id="diagram-realizable-entity-role"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represent characteristics of the objects, brought to existence by a specific situation. E.g. a role, which is realized in a process.</li>
<li><strong>Description</strong>: This example describes how an object participates in a planned experimental process by bearing a specific evaluant role. An object, here ex:object_1, is involved in a fatigue testing process, and this process takes the object as its specified input. The process is linked to an objective, and both the objective and the resulting output are explicitly stated to be about the same object, making clear that the purpose and outcome of the process concern that object. The object is assigned an evaluant role, ex:role_1, and this role is realized in the execution of the fatigue testing process. In this way, the pattern connects object, role, process, objective, and result into a coherent structure showing that the object is the thing being evaluated in the process, and that the process executes and realizes the evaluant role associated with that object.</li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix ex: &lt;http://example.com/&gt; .
@base &lt;https://w3id.org/pmd/co/test&gt; .

@prefix object: &lt;http://purl.obolibrary.org/obo/BFO_0000030&gt; .
@prefix evaluant_role: &lt;http://purl.obolibrary.org/obo/OBI_0000067&gt; .
@prefix has_role: &lt;http://purl.obolibrary.org/obo/RO_0000087&gt; .
@prefix has_realization: &lt;http://purl.obolibrary.org/obo/BFO_0000054&gt; .
@prefix planned_process: &lt;http://purl.obolibrary.org/obo/OBI_0000011&gt; .
@prefix fatigue_testing_process: &lt;https://w3id.org/pmd/co/PMD_0000638&gt; .
@prefix has_specified_input: &lt;http://purl.obolibrary.org/obo/OBI_0000293&gt; .
@prefix has_specified_output: &lt;http://purl.obolibrary.org/obo/OBI_0000299&gt; .
@prefix achieves_planned_objective: &lt;http://purl.obolibrary.org/obo/OBI_0000417&gt; .
@prefix is_about: &lt;http://purl.obolibrary.org/obo/IAO_0000136&gt;  .

&lt;https://w3id.org/pmd/co/test/role&gt; rdf:type owl:Ontology  .

ex:process_1 a fatigue_testing_process: .
ex:process_1 has_specified_input: ex:object_1 .
ex:process_1 achieves_planned_objective: ex:objective_1 .
ex:process_1 has_specified_output: ex:result_1 .

ex:objective_1 is_about: ex:object_1 .
ex:result_1  is_about: ex:object_1 .

ex:object_1 a object: .
ex:object_1 has_role: ex:role_1 .

ex:role_1 a evaluant_role: .
ex:role_1 has_realization: ex:process_1  .
</code></pre>
</details>

<h2 id="see-folder-patternsrealizable-entity-rolehttpsgithubcommaterialdigitalcore-ontologytreemainpatternsrealizable20entity20role">(see folder: <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/realizable%20entity%20(role)">patterns/realizable entity (role)</a></h2>

<h2 id="pattern-5-material-properties-qualities">Pattern 5 - Material Properties (Qualities)</h2>

<div class="mermaid-graph-container" id="graph-material-property-quality">
  <div class="graph-header">
    <div class="graph-title">Pattern 5 - Material Properties (Qualities)</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-material-property-quality">
      <div class="mermaid-diagram" id="diagram-material-property-quality"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represent materials, their qualities, and their behaviors at different moments/periods of time.</li>
<li><p><strong>Example Use Case</strong>: 
This example defines a set of example individuals illustrating how materials, their qualities, and their behaviors can be semantically represented. 
The example models three main themes:</p>

<ol>
<li><p>Intrinsic material qualities: Examples include mass, and density.</p>

<ul>
<li>A metal sheet is modeled as a material object that has a mass quality with a given numeric value (3.3 g).</li>
<li>A steel material has an associated density quality (7.5 g/cm³).</li>
</ul></li>
<li><p>Behavioral material properties and processes: These represent how a material behaves under certain conditions.</p>

<ul>
<li>A steel material has a melting point (1500 °C), which is realized through a melting process.</li>
<li>The melting process is triggered by an application of heat flux and involves a change of temperature as the material responds.</li>
</ul></li>
<li><p>Relational material qualities: These capture qualities that depend on relations between materials and objects.</p>

<ul>
<li>A mass proportion is expressed between some portion of iron and the metal sheet, with a value of 97.7 %.</li>
</ul></li>
</ol></li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>
@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix ex: &lt;https://www.example.org/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@base &lt;https://w3id.org/pmd/co/test#&gt; .


&lt;https://w3id.org/pmd/co/test/shape/qualities_and_properties&gt; rdf:type owl:Ontology .

### Define prefixes ###

# Classes
@prefix entity: &lt;http://purl.obolibrary.org/obo/BFO_0000001&gt; . 
@prefix independent_continuant: &lt;http://purl.obolibrary.org/obo/BFO_0000004&gt; .
@prefix material_entity: &lt;http://purl.obolibrary.org/obo/BFO_0000040&gt; .
@prefix object: &lt;http://purl.obolibrary.org/obo/BFO_0000030&gt; .
@prefix temporally_qualified_continuant:  &lt;https://w3id.org/pmd/co/PMD_0000068&gt; .
@prefix portion_of_iron: &lt;https://w3id.org/pmd/co/PMD_0020026&gt; . 
@prefix material: &lt;https://w3id.org/pmd/co/PMD_0000000&gt; .
@prefix temporal_region: &lt;http://purl.obolibrary.org/obo/BFO_0000008&gt; . 
@prefix quality: &lt;http://purl.obolibrary.org/obo/BFO_0000019&gt; .
@prefix mass: &lt;https://w3id.org/pmd/co/PMD_0020133&gt; .
@prefix density: &lt;https://w3id.org/pmd/co/PMD_0000597&gt; .
@prefix behavioral_material_property: &lt;https://w3id.org/pmd/co/PMD_0000005&gt; .
@prefix specifically_dependent_continuant: &lt;http://purl.obolibrary.org/obo/BFO_0000020&gt; .
@prefix melting_point: &lt;https://w3id.org/pmd/co/PMD_0000851&gt; .
@prefix relational_quality: &lt;http://purl.obolibrary.org/obo/BFO_0000145&gt; .
@prefix mass_proportion: &lt;https://w3id.org/pmd/co/PMD_0020102&gt; .
@prefix scalar_value_specification: &lt;http://purl.obolibrary.org/obo/OBI_0001931&gt; .
@prefix fraction_value_specification: &lt;https://w3id.org/pmd/co/PMD_0025997&gt; .
@prefix gram: &lt;http://purl.obolibrary.org/obo/UO_0000021&gt; . 
@prefix gram_per_cubic_centimetre: &lt;http://purl.obolibrary.org/obo/UO_0000084&gt; .
@prefix degree_celsius: &lt;http://purl.obolibrary.org/obo/UO_0000027&gt; .
@prefix mass_percentage: &lt;http://purl.obolibrary.org/obo/UO_0000163&gt; .
@prefix melting_process: &lt;https://w3id.org/pmd/co/PMD_0000053&gt; .
@prefix application_of_heat_flux: &lt;https://w3id.org/pmd/co/PMD_0000520&gt; . 
@prefix stimulating_process: &lt;https://w3id.org/pmd/co/PMD_0000950&gt; .
@prefix process: &lt;http://purl.obolibrary.org/obo/BFO_0000015&gt; .
@prefix change_of_temperature: &lt;https://w3id.org/pmd/co/PMD_0000549&gt; .


# Object properties
@prefix exists_at: &lt;http://purl.obolibrary.org/obo/BFO_0000108&gt; . 
@prefix is_state_of: &lt;https://w3id.org/pmd/co/PMD_0000070&gt; .
@prefix quality_of: &lt;http://purl.obolibrary.org/obo/RO_0000080&gt; .
@prefix characteristic_of: &lt;http://purl.obolibrary.org/obo/RO_0000052&gt; .
@prefix relational_quality_of: &lt;https://w3id.org/pmd/co/PMD_0025999&gt; .
@prefix concretizes: &lt;http://purl.obolibrary.org/obo/RO_0000059&gt; .
@prefix has_specified_numeric_value: &lt;http://purl.obolibrary.org/obo/OBI_0001937&gt; . 
@prefix has_measurement_unit_label: &lt;http://purl.obolibrary.org/obo/IAO_0000039&gt; .
@prefix specifies_value_of: &lt;http://purl.obolibrary.org/obo/OBI_0001927&gt; .
@prefix has_realization: &lt;http://purl.obolibrary.org/obo/BFO_0000054&gt; .
@prefix participates_in: &lt;http://purl.obolibrary.org/obo/RO_0000056&gt; .
@prefix has_participant: &lt;http://purl.obolibrary.org/obo/RO_0000057&gt; .
@prefix stimulated_by: &lt;https://w3id.org/pmd/co/PMD_0001030&gt; .
@prefix responds_with: &lt;https://w3id.org/pmd/co/PMD_0001029&gt; .
@prefix has_specified_input: &lt;http://purl.obolibrary.org/obo/OBI_0000293&gt; .
@prefix has_specified_output: &lt;http://purl.obolibrary.org/obo/OBI_0000299&gt; .

### Instances ###

# Quality example
ex:metal_sheet a owl:NamedIndividual , object: .

ex:mass_metal_sheet a owl:NamedIndividual , mass: ;
            quality_of: ex:metal_sheet . 

ex:svs_15_g a owl:NamedIndividual , scalar_value_specification: ;
            has_specified_numeric_value: "3.3"^^xsd:float ;
            has_measurement_unit_label: gram: ; 
            specifies_value_of: ex:mass_metal_sheet .

ex:tcq_temporal_region a owl:NamedIndividual , temporal_region: .

ex:tqc_steel_material a owl:NamedIndividual , material: , temporally_qualified_continuant: ; 
            exists_at: ex:tcq_temporal_region ; 
            is_state_of: ex:steel_material .

ex:density_steel a owl:NamedIndividual , density: ;
            quality_of: ex:tqc_steel_material . 


ex:svs_7_5_g_per_cm a owl:NamedIndividual , scalar_value_specification: ;
            has_specified_numeric_value: "7.5"^^xsd:float ;
            has_measurement_unit_label: gram_per_cubic_centimetre: ; 
            specifies_value_of: ex:density_steel .


# Behavioral material property
ex:steel_material a owl:NamedIndividual , material: ; 
            participates_in: ex:melting_process .

ex:svs_1500_deg_c a owl:NamedIndividual , scalar_value_specification: ;
            has_specified_numeric_value: "1500"^^xsd:float ;
            has_measurement_unit_label: degree_celsius: ; 
            specifies_value_of: ex:melting_temperature_steel .

ex:melting_temperature_steel a owl:NamedIndividual , melting_point: ; 
            characteristic_of: ex:steel_material ;
            has_realization: ex:melting_process ; 
            stimulated_by: ex:application_of_heat_flux ; 
            responds_with: ex:change_of_temperature_during_melting .

ex:melting_process a owl:NamedIndividual , melting_process: ;
            has_specified_output: ex:steel_material ; 
            has_specified_input: ex:steel_material .

ex:application_of_heat_flux a owl:NamedIndividual , application_of_heat_flux: .

ex:change_of_temperature_during_melting a owl:NamedIndividual , change_of_temperature: .

# Relational quality
ex:some_iron a owl:NamedIndividual , portion_of_iron: . 

ex:mass_proportion_iron a owl:NamedIndividual , mass_proportion: ;
            relational_quality_of:  ex:some_iron , ex:metal_sheet .

ex:fraction_iron a owl:NamedIndividual , fraction_value_specification: ;
            has_specified_numeric_value: "97.7"^^xsd:float ;
            has_measurement_unit_label: mass_percentage: ; 
            specifies_value_of: ex:mass_proportion_iron .
</code></pre>
</details>

<p>(see folder:  <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/material%20property%20(quality)">patterns/material property (quality)</a>)</p>

<hr />

<h2 id="pattern-6-measurement">Pattern 6 - Measurement</h2>

<div class="mermaid-graph-container" id="graph-measurement">
  <div class="graph-header">
    <div class="graph-title">Pattern 6 - Measurement</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-measurement">
      <div class="mermaid-diagram" id="diagram-measurement"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represent measured value of some material characteristic. </li>
<li><p><strong>Example Use Case</strong>: This example represents a measurement workflow:</p>

<ul>
<li>An assay with an objective assesses a material entity.</li>
<li>The entity has a quality that the assay evaluates, there is also another quality which is not evaluates.</li>
<li>The assay produces a measurement datum representing the measurement result of that quality.</li>
<li>The datum includes a value specification providing numeric value and units. </li>
<li>The value specification also relates to the quality.</li>
</ul></li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test/shape3/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@base &lt;https://w3id.org/pmd/co/test/shape3#&gt; .

@prefix assay: &lt;http://purl.obolibrary.org/obo/OBI_0000070&gt; .
@prefix realizes: &lt;http://purl.obolibrary.org/obo/BFO_0000055&gt; .
@prefix has_specified_input: &lt;http://purl.obolibrary.org/obo/OBI_0000293&gt; .
@prefix has_specified_output: &lt;http://purl.obolibrary.org/obo/OBI_0000299&gt; .
@prefix evaluant_role: &lt;http://purl.obolibrary.org/obo/OBI_0000067&gt; .
@prefix realized_in: &lt;http://purl.obolibrary.org/obo/BFO_0000054&gt; .
@prefix quality: &lt;http://purl.obolibrary.org/obo/BFO_0000019&gt; . 
@prefix quality_is_specified_as: &lt;http://purl.obolibrary.org/obo/IAO_0000419&gt; . 
@prefix material_entity: &lt;http://purl.obolibrary.org/obo/BFO_0000040&gt; . 
@prefix has_quality: &lt;http://purl.obolibrary.org/obo/RO_0000086&gt; . 
@prefix has_role: &lt;http://purl.obolibrary.org/obo/RO_0000087&gt; . 
@prefix has_measurement_unit_label: &lt;http://purl.obolibrary.org/obo/IAO_0000039&gt;  .
@prefix centimeter: &lt;http://purl.obolibrary.org/obo/UO_0000015&gt; .
@prefix is_about: &lt;http://purl.obolibrary.org/obo/IAO_0000136&gt; .
@prefix specifies_value_of: &lt;http://purl.obolibrary.org/obo/OBI_0001927&gt; .
@prefix has_specified_numeric_value: &lt;http://purl.obolibrary.org/obo/OBI_0001937&gt; .
@prefix scalar_measurement_datum: &lt;http://purl.obolibrary.org/obo/IAO_0000032&gt; .
@prefix is_quality_measurement_of: &lt;http://purl.obolibrary.org/obo/IAO_0000221&gt; . 
@prefix has_value_specification: &lt;http://purl.obolibrary.org/obo/OBI_0001938&gt; .
@prefix has_part: &lt;http://purl.obolibrary.org/obo/BFO_0000051&gt; . 
@prefix achieves_planned_objective: &lt;http://purl.obolibrary.org/obo/OBI_0000417&gt; .
@prefix has_measurement_value: &lt;http://purl.obolibrary.org/obo/IAO_0000004&gt; .

&lt;https://w3id.org/pmd/co/test/shape3&gt; rdf:type owl:Ontology  .


:my_assay a owl:NamedIndividual , assay: ;
          realizes: :my_entities_evaluant_role ;
          has_specified_input: :my_evaluated_entity ;
          has_specified_output: :my_qualities_measurement_datum ;
          achieves_planned_objective: :my_objective .

:my_objective is_about: :my_evaluated_entity .

:my_entities_evaluant_role a owl:NamedIndividual , evaluant_role: ;
          realized_in: :my_assay .

:my_entities_preexising_quality a owl:NamedIndividual , quality: .

:my_entities_quality a owl:NamedIndividual , quality: ;
          quality_is_specified_as: :my_qualities_measurement_datum .


:my_evaluated_entity a owl:NamedIndividual , material_entity: ;
          has_quality: :my_entities_preexising_quality ,
          :my_entities_quality ;
          has_role: :my_entities_evaluant_role .


:my_measurment_datums_value_specification a owl:NamedIndividual ;
          has_measurement_unit_label: centimeter: ;
          is_about: :my_evaluated_entity ;
          specifies_value_of: :my_entities_quality ;
          has_specified_numeric_value: 1.0 .


:my_qualities_measurement_datum a owl:NamedIndividual ,
          scalar_measurement_datum: ;
          is_about: :my_evaluated_entity ;
          is_quality_measurement_of: :my_entities_quality ;
          has_value_specification: :my_measurment_datums_value_specification ;
          has_measurement_value: "1234.0"^^xsd:double .
</code></pre>
</details>

<p>(see folder: <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/measurement">patterns/measurement</a>)</p>

<hr />

<h2 id="pattern-7-scalar-value-specification">Pattern 7 - Scalar Value Specification</h2>

<div class="mermaid-graph-container" id="graph-scalar-value-specification">
  <div class="graph-header">
    <div class="graph-title">Pattern 7 - Scalar Value Specification</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-scalar-value-specification">
      <div class="mermaid-diagram" id="diagram-scalar-value-specification"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represents scalar physical quantities, combining a numerical value and a unit.</li>
<li><p><strong>Core Properties</strong>: </p>

<ul>
<li><code>obi:hasSpecifiedNumericValue</code></li>
<li><code>iao:hasMeasurementUnitLabel</code></li>
<li><code>iao:MeasurementUnitLabel</code></li>
</ul></li>
<li><p><strong>Example Use Case</strong>: The example describes a scalar value specification, ex:scalar_value_specification_X, which is assigned a numeric value of 135.0 and linked to a measurement unit represented by the individual ex:unit_X. The numeric value is provided via the OBI property has_specified_numeric_value, while the unit is associated through the IAO property has_measurement_unit_label. The unit individual ex:unit_X is typed as a measurement unit label, but in practice this placeholder unit could be replaced by a formally defined unit from established ontologies such as UO (Units of Measurement Ontology) or QUDT (Quantities, Units, Dimensions, and Types). Together, the triples express that a value of 135.0 is specified in some unit, whether a custom one like ex:unit_X or a standard unit drawn from UO or QUDT.</p></li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;https://w3id.org/pmd/co/test#&gt; .
@prefix ex: &lt;https://www.example.org/&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@base &lt;https://w3id.org/pmd/co/test#&gt; .

&lt;https://w3id.org/pmd/co/test/shape2&gt; rdf:type owl:Ontology .

@prefix has_measurement_unit_label: &lt;http://purl.obolibrary.org/obo/IAO_0000039&gt; .
@prefix has_specified_numeric_value: &lt;http://purl.obolibrary.org/obo/OBI_0001937&gt; .
@prefix measurement_unit_label: &lt;http://purl.obolibrary.org/obo/IAO_0000003&gt; .


ex:scalar_value_specification_X rdf:type owl:NamedIndividual ;
                                has_measurement_unit_label: ex:unit_X ;
                                has_specified_numeric_value: 135.0 .

ex:unit_X rdf:type owl:NamedIndividual ,
                   measurement_unit_label: .

</code></pre>
</details>

<p>(see folder:     <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/scalar%20value%20specification">patterns/scalar value specification/</a> )</p>

<hr />

<h2 id="pattern-8-categorical-value-specification">Pattern 8 - Categorical Value Specification</h2>

<div class="mermaid-graph-container" id="graph-categorical-value-specification">
  <div class="graph-header">
    <div class="graph-title">Pattern 8 - Categorical Value Specification</div>
    <div class="graph-controls">
      <button class="graph-btn" data-action="fit">⊡ Fit</button>
      <button class="graph-btn" data-action="reset">⊙ Reset</button>
      <button class="graph-btn" data-action="fullscreen">⛶ Fullscreen</button>
      <button class="graph-btn" data-action="svg">⬇ SVG</button>
      <button class="graph-btn" data-action="png">⬇ PNG</button>
    </div>
  </div>
  <div class="graph-viewport">
    <div class="graph-wrapper" id="wrapper-categorical-value-specification">
      <div class="mermaid-diagram" id="diagram-categorical-value-specification"></div>
    </div>
    <div class="zoom-controls">
      <button class="zoom-btn" data-action="zoom-in">+</button>
      <div class="zoom-level">100%</div>
      <button class="zoom-btn" data-action="zoom-out">−</button>
    </div>
  </div>
  <div class="graph-legend">
    <span class="legend-item"><span class="legend-swatch swatch-class"></span>Class (TBox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-individual"></span>Individual (ABox)</span>
    <span class="legend-item"><span class="legend-swatch swatch-literal"></span>Literal</span>
    <span class="legend-item"><span class="legend-swatch swatch-categorical"></span>Categorical Value</span>
    <span class="legend-item"><span class="legend-swatch swatch-shacl"></span>SHACL Shape</span>
    <span class="legend-item"><span class="legend-swatch swatch-constraint"></span>SHACL Constraint</span>
    <span class="legend-item"><span class="legend-swatch swatch-subclass"></span>rdfs:subClassOf</span>
    <span class="legend-item"><span class="legend-swatch swatch-type"></span>rdf:type</span>
    <span class="legend-item"><span class="legend-swatch swatch-bfo"></span>BFO Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-obi"></span>OBI Class</span>
    <span class="legend-item"><span class="legend-swatch swatch-pmd"></span>PMD Class</span>
  </div>
</div>

<ul>
<li><strong>Purpose</strong>: Represents how categorical values such as ferrite, face-centered cubic, and liquid are used to specify the values of material characteristics.</li>
<li><strong>Example Use Case</strong>: The example describes materials and the categorical qualities they might possess. In the first example, <code>ex:fcc_material</code> is a material that has both a crystal structure and a grain structure. Its crystal structure quality is assigned the categorical value “face-centered cubic”, and its grain structure quality is assigned the categorical value “ferrite”, which is also explicitly stated to be about this same material. In other words, the material is characterized as having an FCC crystal structure and a ferritic grain structure.</li>
</ul>

<p>In the second example, ex:steel_melt is described as a melt that has an aggregate state quality. This quality is given the categorical value “liquid”, indicating that the melt is in the liquid state.</p>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix sh:    &lt;http://www.w3.org/ns/shacl#&gt; .
@prefix xsd:   &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix ex:    &lt;http://www.example.org/#&gt; .
@prefix owl:   &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix obo:    &lt;http://purl.obolibrary.org/obo/&gt; .
@prefix pmd:   &lt;https://w3id.org/pmd/co/&gt; .
@prefix unit: &lt;http://qudt.org/vocab/unit/&gt; .
@prefix shape:   &lt;https://w3id.org/pmd/co/shapes&gt; .
@base &lt;https://w3id.org/pmd/co/test/shape_categorical_value_specification#&gt; .

&lt;https://w3id.org/pmd/co/test/shape_categorical_value_specification&gt; 
    rdf:type owl:Ontology .

### Define prefixes ###

# Classes
@prefix categorical_value_specification: &lt;http://purl.obolibrary.org/obo/OBI_0001930&gt; . 
@prefix material: &lt;https://w3id.org/pmd/co/PMD_0000000&gt; .
@prefix melt: &lt;https://w3id.org/pmd/co/PMD_0020139&gt; .
@prefix entity: &lt;http://purl.obolibrary.org/obo/BFO_0000001&gt; .
@prefix quality: &lt;http://purl.obolibrary.org/obo/BFO_0000019&gt; . 

@prefix metallic_grain_structure: &lt;https://w3id.org/pmd/co/PMD_0025003&gt; .           # SDC
@prefix ferrite: &lt;https://w3id.org/pmd/co/PMD_0020100&gt; .                            # Individual
@prefix metallic_grain_structures: &lt;https://w3id.org/pmd/co/PMD_0020023&gt; .          # Categorical value

@prefix aggregate_state_value: &lt;https://w3id.org/pmd/co/PMD_0020116&gt; .              # Categorical value
@prefix aggregate_state_liquid: &lt;https://w3id.org/pmd/co/PMD_0020118&gt; .             # Individual
@prefix aggregate_state: &lt;https://w3id.org/pmd/co/PMD_0000512&gt; .                    # SDC

@prefix crystal_structure: &lt;https://w3id.org/pmd/co/PMD_0000591&gt; .                   # SDC
@prefix bravais_lattice: &lt;https://w3id.org/pmd/co/PMD_0020099&gt; .                     # Categorical value
@prefix bravais_lattice_cubic_face_centered: &lt;https://w3id.org/pmd/co/PMD_0020019&gt; . # Individual
@prefix in_minimal: &lt;https://w3id.org/pmd/co/PMD_0000060&gt; . 


# Object properties

@prefix has_quality: &lt;http://purl.obolibrary.org/obo/RO_0000086&gt; .
@prefix specifies_value_of: &lt;http://purl.obolibrary.org/obo/OBI_0001927&gt; .
@prefix is_about: &lt;http://purl.obolibrary.org/obo/IAO_0000136&gt; .

### Define entities ###

# Example 1

ex:fcc_material a owl:NamedIndividual ,
                    material: ; 
                has_quality: ex:crystal_structure_quality ,
                             ex:grain_structure_quality .

ex:crystal_structure_quality a owl:NamedIndividual ,
                                crystal_structure: .
bravais_lattice_cubic_face_centered: specifies_value_of: ex:crystal_structure_quality .

ex:grain_structure_quality a owl:NamedIndividual ,
                                metallic_grain_structure: .
ferrite:  specifies_value_of: ex:grain_structure_quality .
ferrite: is_about: ex:fcc_material .

# Example 2
ex:steel_melt: a owl:NamedIndividual ,
                 melt: ; 
               has_quality: ex:aggregate_state_quality .

ex:aggregate_state_quality a owl:NamedIndividual ,
                            aggregate_state: .
aggregate_state_liquid: specifies_value_of: ex:aggregate_state_quality .

</code></pre>
</details>

<p>(see folder <a href="https://github.com/materialdigital/core-ontology/tree/main/patterns/categorical%20value%20specification">patterns/categorical value specification</a>)</p>

<hr />

<h2 id="pattern-9-simulation-inputoutput">Pattern 9: Simulation input/output</h2>

<ul>
<li><strong>Purpose</strong>: Information content entities as input and output of (simulation-)processes.</li>
<li><strong>Example Use Case</strong>: 
A challenge arises when working with digital data about material entities, as is the case in simulations. Due to our ontological commitment to BFO, roles (like described in the patterns above) can only inhere in independent continuants, because a role is something that is physically realized when its bearer participates in a process. Information Content Entities (ICEs), such as datasets, specifications, or parameter files used in a simulation are generically dependent continuants. They are abstract contents that rely on some physical carrier (e.g., a hard drive) but do not themselves participate physically in a process. Assigning roles directly to ICEs would require the role to inhere in the ICE rather than in a material entity, which violates BFO’s ontological constraints.
To preserve the functionality of roles for informational inputs and outputs, we introduce process boundaries as “input/output assignments”. In this pattern, an ICE participates in an input (or output) assignment, which is a dependent entity representing the assignment of that ICE to the process. The assignment itself is then part of the main process. This allows us to capture the role-like semantics of inputs and outputs without violating BFO’s constraint that roles must inhere in material entities. Each assignment can be typed  to specify its intended function in the process, while maintaining ontological consistency. 
For example, in a division calculation process, two numbers considered as ICE serve as inputs through role-like assignments: one as the numerator, and the other as the denominator. Each number participates in an input assignment that is part of the division process, while the resulting quotient participates in an output assignment. This pattern captures the functional roles of inputs and outputs without requiring the numbers themselves to bear roles directly, maintaining ontological consistency.</li>
</ul>

<details class="code-block">
<summary>📄 View pattern code</summary>
<pre><code>@prefix : &lt;http://example.org/division#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

@prefix hasParticipant: &lt;http://purl.obolibrary.org/obo/RO_0000057&gt; .
@prefix partOf: &lt;http://purl.obolibrary.org/obo/BFO_0000050&gt; .
@prefix InformationContentEntity: &lt;http://purl.obolibrary.org/obo/IAO_0000030&gt; .
@prefix SimulationProcess: &lt;https://w3id.org/pmd/co/PMD_0000933&gt; .
@prefix InputAssignment: &lt;https://w3id.org/pmd/co/PMD_0000066&gt; .
@prefix OutputAssignment: &lt;https://w3id.org/pmd/co/PMD_0000067&gt; .
@prefix hasSpecifiedValue: &lt;http://purl.obolibrary.org/obo/OBI_0001937&gt; .
@prefix isSpecifiedInputOf: &lt;http://purl.obolibrary.org/obo/OBI_0000295&gt; .
@prefix isSpecifiedOutputOf: &lt;http://purl.obolibrary.org/obo/OBI_0000312&gt; .

############################
#   CLASS AXIOMS
############################

:Number rdf:type owl:Class ;
        rdfs:subClassOf InformationContentEntity: .

:DivisionProcess rdf:type owl:Class ;
        rdfs:subClassOf SimulationProcess: .

:NumeratorAssignment rdf:type owl:Class ;
    rdfs:subClassOf 
        InputAssignment: ,
        [ rdf:type owl:Restriction ;
          owl:onProperty hasParticipant: ;
          owl:someValuesFrom :Number ],
        [ rdf:type owl:Restriction ;
          owl:onProperty partOf: ;
          owl:someValuesFrom :DivisionProcess ] .

:DenominatorAssignment rdf:type owl:Class ;
    rdfs:subClassOf 
        InputAssignment: ,
        [ rdf:type owl:Restriction ;
          owl:onProperty hasParticipant: ;
          owl:someValuesFrom :Number ],
        [ rdf:type owl:Restriction ;
          owl:onProperty partOf: ;
          owl:someValuesFrom :DivisionProcess ] .

:QuotientAssignment rdf:type owl:Class ;
    rdfs:subClassOf 
        OutputAssignment: ,
        [ rdf:type owl:Restriction ;
          owl:onProperty hasParticipant: ;
          owl:someValuesFrom :Number ],
        [ rdf:type owl:Restriction ;
          owl:onProperty partOf: ;
          owl:someValuesFrom :DivisionProcess ] .

############################
#   INDIVIDUALS
############################

:num1 rdf:type :Number ;
      hasSpecifiedValue: "10"^^xsd:integer ;
      isSpecifiedInputOf: :div1 .

:num2 rdf:type :Number ;
      hasSpecifiedValue: "2"^^xsd:integer ;
      isSpecifiedInputOf: :div1 .

:quotient1 rdf:type :Number ;
      hasSpecifiedValue: "5"^^xsd:integer ;
      isSpecifiedOutputOf: :div1 .

:div1 rdf:type :DivisionProcess .

:numerator_assign rdf:type :NumeratorAssignment ;
    hasParticipant: :num1 ;
    partOf: :div1 .

:denominator_assign rdf:type :DenominatorAssignment ;
    hasParticipant: :num2 ;
    partOf: :div1 .

:quotient_assign rdf:type :QuotientAssignment ;
    hasParticipant: :quotient1 ;
    partOf: :div1 .
</code></pre>
</details>

<h2 id="more-patterns-at-github">More patterns at GitHub</h2>

<p>More patterns can be found in the patterns folder :</p>

<p><a href="https://github.com/materialdigital/core-ontology/tree/main/patterns">https://github.com/materialdigital/core-ontology/tree/main/patterns</a></p>

            </article>

            <nav class="page-nav">
                <a class="page-nav-link prev" href="./ontology-structure.html">
                    <span class="page-nav-label">&larr; Previous</span>
                    <span class="page-nav-title">Ontology Structure</span>
                </a>
                <a class="page-nav-link next" href="./pmdco-user-guide.html">
                    <span class="page-nav-label">Next &rarr;</span>
                    <span class="page-nav-title">User Guide</span>
                </a></nav>

            <footer class="footer">
                <div class="footer-links">
                    <a href="https://github.com/materialdigital/core-ontology" target="_blank">GitHub</a>
                    <a href="https://materialdigital.de/" target="_blank">MaterialDigital</a>
                    <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>
                </div>
                <p class="footer-copyright">© 2024 Platform MaterialDigital. All rights reserved.</p>
            </footer>
        </div>
    </main>

    <aside class="toc">
        <h4 class="toc-title">On this page</h4>
        <ul class="toc-list">
            <li><a href="#pattern-1-temporal-region">Pattern 1 - Temporal Region</a></li>
            <li><a href="#pattern-2-process-chain">Pattern 2 - Process Chain</a></li>
            <li><a href="#pattern-3-process-inputs-and-outputs">Pattern 3 - Process Inputs and Outputs</a></li>
            <li><a href="#pattern-4-realizable-entities-role">Pattern 4 - Realizable Entities (Role)</a></li>
            <li><a href="#see-folder-patternsrealizable-entity-rolehttpsgithubcommaterialdigitalcore-ontologytreemainpatternsrealizable20entity20role">(see folder: patterns/realizable entity (role)</a></li>
            <li><a href="#pattern-5-material-properties-qualities">Pattern 5 - Material Properties (Qualities)</a></li>
            <li><a href="#pattern-6-measurement">Pattern 6 - Measurement</a></li>
            <li><a href="#pattern-7-scalar-value-specification">Pattern 7 - Scalar Value Specification</a></li>
            <li><a href="#pattern-8-categorical-value-specification">Pattern 8 - Categorical Value Specification</a></li>
            <li><a href="#pattern-9-simulation-inputoutput">Pattern 9: Simulation input/output</a></li>
            <li><a href="#more-patterns-at-github">More patterns at GitHub</a></li>
        </ul>
    </aside>

    <!-- Global popover and toast elements -->
    <div class="graph-popover" id="global-popover"></div>
    <div class="graph-toast" id="global-toast"></div>

    <!-- Fullscreen overlay -->
    <div class="fullscreen-overlay" id="fullscreen-overlay">
        <div class="fullscreen-header">
            <div class="fullscreen-title" id="fullscreen-title">Graph</div>
            <button class="fullscreen-close" id="fullscreen-close">
                <span>✕</span> Close
            </button>
        </div>
        <div class="fullscreen-viewport" id="fullscreen-viewport">
            <div class="fullscreen-wrapper" id="fullscreen-wrapper"></div>
            <div class="fullscreen-zoom-controls">
                <button class="fullscreen-zoom-btn" id="fs-zoom-in">+</button>
                <div class="fullscreen-zoom-level" id="fs-zoom-level">100%</div>
                <button class="fullscreen-zoom-btn" id="fs-zoom-out">−</button>
            </div>
        </div>
    </div>

    
    <!-- Viz.js (Graphviz) -->
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/viz.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/viz.js@2.1.2/full.render.js"></script>

<script type="module">
// ========== GRAPHVIZ (VIZ.JS) DIAGRAMS ==========
        const dotDiagrams = {
            "categorical-value-specification": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "aggregate_state" [URL="https://w3id.org/pmd/co/PMD_0000512",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="aggregate_state",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000512"];
    "crystal_structure" [URL="https://w3id.org/pmd/co/PMD_0000591",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="crystal_structure",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000591"];
    "material" [URL="https://w3id.org/pmd/co/PMD_0000000",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="material",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000000"];
    "melt" [URL="https://w3id.org/pmd/co/PMD_0020139",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="melt",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020139"];
    "metallic_grain_structure" [URL="https://w3id.org/pmd/co/PMD_0025003",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="metallic_grain_structure",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0025003"];
    "owl_NamedIndividual" [URL="http://www.w3.org/2002/07/owl#NamedIndividual",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:NamedIndividual",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#NamedIndividual"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "aggregate_state_liquid" [URL="https://w3id.org/pmd/co/PMD_0020118",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="aggregate_state_liquid",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020118"];
    "bravais_lattice_cubic_face_centered" [URL="https://w3id.org/pmd/co/PMD_0020019",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="bravais_lattice_cubic_face_centered",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020019"];
    "ex_aggregate_state_quality" [URL="http://www.example.org/#aggregate_state_quality",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:aggregate_state_quality",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://www.example.org/#aggregate_state_quality"];
    "ex_crystal_structure_quality" [URL="http://www.example.org/#crystal_structure_quality",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:crystal_structure_quality",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://www.example.org/#crystal_structure_quality"];
    "ex_fcc_material" [URL="http://www.example.org/#fcc_material",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:fcc_material",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://www.example.org/#fcc_material"];
    "ex_grain_structure_quality" [URL="http://www.example.org/#grain_structure_quality",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:grain_structure_quality",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://www.example.org/#grain_structure_quality"];
    "ferrite" [URL="https://w3id.org/pmd/co/PMD_0020100",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ferrite",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020100"];
    "steel_melt" [URL="http://www.example.org/#steel_melt:",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="steel_melt:",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://www.example.org/#steel_melt:"];
  }
  "aggregate_state_liquid" -> "ex_aggregate_state_quality" [label="specifies_value_of"];
  "bravais_lattice_cubic_face_centered" -> "ex_crystal_structure_quality" [label="specifies_value_of"];
  "ex_aggregate_state_quality" -> "aggregate_state" [label="rdf:type",style="dashed"];
  "ex_aggregate_state_quality" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_crystal_structure_quality" -> "crystal_structure" [label="rdf:type",style="dashed"];
  "ex_crystal_structure_quality" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_fcc_material" -> "ex_crystal_structure_quality" [label="has_quality"];
  "ex_fcc_material" -> "ex_grain_structure_quality" [label="has_quality"];
  "ex_fcc_material" -> "material" [label="rdf:type",style="dashed"];
  "ex_fcc_material" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_grain_structure_quality" -> "metallic_grain_structure" [label="rdf:type",style="dashed"];
  "ex_grain_structure_quality" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ferrite" -> "ex_fcc_material" [label="is_about"];
  "ferrite" -> "ex_grain_structure_quality" [label="specifies_value_of"];
  "steel_melt" -> "ex_aggregate_state_quality" [label="has_quality"];
  "steel_melt" -> "melt" [label="rdf:type",style="dashed"];
  "steel_melt" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
}`,

            "input-and-output-of-processes": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000002" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "BFO_0000004" [URL="http://purl.obolibrary.org/obo/BFO_0000004",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:independent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000004"];
    "BFO_0000040" [URL="http://purl.obolibrary.org/obo/BFO_0000040",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:material_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000040"];
    "coating" [URL="https://w3id.org/pmd/co/PMD_0000563",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="coating",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000563"];
    "manufacturing_process" [URL="https://w3id.org/pmd/co/PMD_0000833",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="manufacturing_process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000833"];
    "object" [URL="http://purl.obolibrary.org/obo/BFO_0000030",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="object",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000030"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "ex_object1" [URL="http://example.com/object1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:object1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/object1"];
    "ex_object2" [URL="http://example.com/object2",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:object2",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/object2"];
    "ex_object3" [URL="http://example.com/object3",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:object3",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/object3"];
    "ex_process1" [URL="http://example.com/process1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/process1"];
    "ex_process2" [URL="http://example.com/process2",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process2",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/process2"];
  }
  "BFO_0000001" -> "owl_Thing" [label="rdfs:subClassOf"];
  "BFO_0000002" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "BFO_0000004" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "BFO_0000040" -> "BFO_0000004" [label="rdfs:subClassOf"];
  "ex_object1" -> "object" [label="rdf:type",style="dashed"];
  "ex_object2" -> "object" [label="rdf:type",style="dashed"];
  "ex_object3" -> "object" [label="rdf:type",style="dashed"];
  "ex_process1" -> "ex_object1" [label="has_specified_input"];
  "ex_process1" -> "ex_object2" [label="has_specified_output"];
  "ex_process1" -> "manufacturing_process" [label="rdf:type",style="dashed"];
  "ex_process2" -> "ex_object2" [label="has_specified_input"];
  "ex_process2" -> "ex_object3" [label="has_specified_output"];
  "ex_process2" -> "coating" [label="rdf:type",style="dashed"];
  "object" -> "BFO_0000040" [label="rdfs:subClassOf"];
}`,

            "material-property-quality": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000002" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "BFO_0000003" [URL="http://purl.obolibrary.org/obo/BFO_0000003",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:occurrent",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000003"];
    "BFO_0000031" [URL="http://purl.obolibrary.org/obo/BFO_0000031",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:generically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000031"];
    "IAO_0000030" [URL="http://purl.obolibrary.org/obo/IAO_0000030",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="iao:information_content_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000030"];
    "OBI_0001933" [URL="http://purl.obolibrary.org/obo/OBI_0001933",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="obi:value_specification",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0001933"];
    "application_of_heat_flux" [URL="https://w3id.org/pmd/co/PMD_0000520",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="application_of_heat_flux",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000520"];
    "behavioral_material_property" [URL="https://w3id.org/pmd/co/PMD_0000005",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="behavioral_material_property",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000005"];
    "change_of_temperature" [URL="https://w3id.org/pmd/co/PMD_0000549",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="change_of_temperature",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000549"];
    "density" [URL="https://w3id.org/pmd/co/PMD_0000597",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="density",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000597"];
    "entity" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "fraction_value_specification" [URL="https://w3id.org/pmd/co/PMD_0025997",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="fraction_value_specification",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0025997"];
    "independent_continuant" [URL="http://purl.obolibrary.org/obo/BFO_0000004",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="independent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000004"];
    "mass" [URL="https://w3id.org/pmd/co/PMD_0020133",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="mass",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020133"];
    "mass_proportion" [URL="https://w3id.org/pmd/co/PMD_0020102",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="mass_proportion",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020102"];
    "material" [URL="https://w3id.org/pmd/co/PMD_0000000",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="material",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000000"];
    "material_entity" [URL="http://purl.obolibrary.org/obo/BFO_0000040",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="material_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000040"];
    "melting_point" [URL="https://w3id.org/pmd/co/PMD_0000851",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="melting_point",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000851"];
    "melting_process" [URL="https://w3id.org/pmd/co/PMD_0000053",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="melting_process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000053"];
    "object" [URL="http://purl.obolibrary.org/obo/BFO_0000030",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="object",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000030"];
    "owl_NamedIndividual" [URL="http://www.w3.org/2002/07/owl#NamedIndividual",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:NamedIndividual",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#NamedIndividual"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
    "portion_of_iron" [URL="https://w3id.org/pmd/co/PMD_0020026",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="portion_of_iron",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0020026"];
    "process" [URL="http://purl.obolibrary.org/obo/BFO_0000015",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000015"];
    "quality" [URL="http://purl.obolibrary.org/obo/BFO_0000019",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="quality",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000019"];
    "relational_quality" [URL="http://purl.obolibrary.org/obo/BFO_0000145",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="relational_quality",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000145"];
    "scalar_value_specification" [URL="http://purl.obolibrary.org/obo/OBI_0001931",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="scalar_value_specification",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0001931"];
    "specifically_dependent_continuant" [URL="http://purl.obolibrary.org/obo/BFO_0000020",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="specifically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000020"];
    "stimulating_process" [URL="https://w3id.org/pmd/co/PMD_0000950",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="stimulating_process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000950"];
    "temporal_region" [URL="http://purl.obolibrary.org/obo/BFO_0000008",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="temporal_region",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000008"];
    "temporally_qualified_continuant" [URL="https://w3id.org/pmd/co/PMD_0000068",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="temporally_qualified_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000068"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "degree_celsius" [URL="http://purl.obolibrary.org/obo/UO_0000027",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="degree_celsius",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/UO_0000027"];
    "ex_application_of_heat_flux" [URL="https://www.example.org/application_of_heat_flux",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:application_of_heat_flux",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/application_of_heat_flux"];
    "ex_change_of_temperature_during_melting" [URL="https://www.example.org/change_of_temperature_during_melting",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:change_of_temperature_during_melting",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/change_of_temperature_during_melting"];
    "ex_density_steel" [URL="https://www.example.org/density_steel",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:density_steel",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/density_steel"];
    "ex_fraction_iron" [URL="https://www.example.org/fraction_iron",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:fraction_iron",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/fraction_iron"];
    "ex_mass_metal_sheet" [URL="https://www.example.org/mass_metal_sheet",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:mass_metal_sheet",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/mass_metal_sheet"];
    "ex_mass_proportion_iron" [URL="https://www.example.org/mass_proportion_iron",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:mass_proportion_iron",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/mass_proportion_iron"];
    "ex_melting_process" [URL="https://www.example.org/melting_process",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:melting_process",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/melting_process"];
    "ex_melting_temperature_steel" [URL="https://www.example.org/melting_temperature_steel",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:melting_temperature_steel",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/melting_temperature_steel"];
    "ex_metal_sheet" [URL="https://www.example.org/metal_sheet",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:metal_sheet",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/metal_sheet"];
    "ex_some_iron" [URL="https://www.example.org/some_iron",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:some_iron",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/some_iron"];
    "ex_steel_material" [URL="https://www.example.org/steel_material",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:steel_material",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/steel_material"];
    "ex_svs_1500_deg_c" [URL="https://www.example.org/svs_1500_deg_c",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:svs_1500_deg_c",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/svs_1500_deg_c"];
    "ex_svs_15_g" [URL="https://www.example.org/svs_15_g",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:svs_15_g",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/svs_15_g"];
    "ex_svs_7_5_g_per_cm" [URL="https://www.example.org/svs_7_5_g_per_cm",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:svs_7_5_g_per_cm",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/svs_7_5_g_per_cm"];
    "ex_tcq_temporal_region" [URL="https://www.example.org/tcq_temporal_region",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:tcq_temporal_region",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/tcq_temporal_region"];
    "ex_tqc_steel_material" [URL="https://www.example.org/tqc_steel_material",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:tqc_steel_material",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/tqc_steel_material"];
    "gram" [URL="http://purl.obolibrary.org/obo/UO_0000021",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="gram",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/UO_0000021"];
    "gram_per_cubic_centimetre" [URL="http://purl.obolibrary.org/obo/UO_0000084",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="gram_per_cubic_centimetre",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/UO_0000084"];
    "has_participant" [URL="http://purl.obolibrary.org/obo/RO_0000057",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="has_participant",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/RO_0000057"];
    "has_specified_input" [URL="http://purl.obolibrary.org/obo/OBI_0000293",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="has_specified_input",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000293"];
    "has_specified_output" [URL="http://purl.obolibrary.org/obo/OBI_0000299",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="has_specified_output",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000299"];
    "mass_percentage" [URL="http://purl.obolibrary.org/obo/UO_0000163",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="mass_percentage",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/UO_0000163"];
    "participates_in" [URL="http://purl.obolibrary.org/obo/RO_0000056",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="participates_in",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/RO_0000056"];
  }
    "val_n_1500_0" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="1500.0",penwidth="2",shape="note",style="filled"];
    "val_n_3_3" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="3.3",penwidth="2",shape="note",style="filled"];
    "val_n_7_5" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="7.5",penwidth="2",shape="note",style="filled"];
    "val_n_97_7" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="97.7",penwidth="2",shape="note",style="filled"];
  "BFO_0000002" -> "entity" [label="rdfs:subClassOf"];
  "BFO_0000003" -> "entity" [label="rdfs:subClassOf"];
  "BFO_0000031" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "IAO_0000030" -> "BFO_0000031" [label="rdfs:subClassOf"];
  "OBI_0001933" -> "IAO_0000030" [label="rdfs:subClassOf"];
  "application_of_heat_flux" -> "stimulating_process" [label="rdfs:subClassOf"];
  "behavioral_material_property" -> "specifically_dependent_continuant" [label="rdfs:subClassOf"];
  "change_of_temperature" -> "process" [label="rdfs:subClassOf"];
  "density" -> "quality" [label="rdfs:subClassOf"];
  "entity" -> "owl_Thing" [label="rdfs:subClassOf"];
  "ex_application_of_heat_flux" -> "application_of_heat_flux" [label="rdf:type",style="dashed"];
  "ex_application_of_heat_flux" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_change_of_temperature_during_melting" -> "change_of_temperature" [label="rdf:type",style="dashed"];
  "ex_change_of_temperature_during_melting" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_density_steel" -> "ex_tqc_steel_material" [label="quality_of"];
  "ex_density_steel" -> "density" [label="rdf:type",style="dashed"];
  "ex_density_steel" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_fraction_iron" -> "mass_percentage" [label="has_measurement_unit_label"];
  "ex_fraction_iron" -> "val_n_97_7" [label="has_specified_numeric_value"];
  "ex_fraction_iron" -> "fraction_value_specification" [label="rdf:type",style="dashed"];
  "ex_fraction_iron" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_fraction_iron" -> "ex_mass_proportion_iron" [label="specifies_value_of"];
  "ex_mass_metal_sheet" -> "ex_metal_sheet" [label="quality_of"];
  "ex_mass_metal_sheet" -> "mass" [label="rdf:type",style="dashed"];
  "ex_mass_metal_sheet" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_mass_proportion_iron" -> "mass_proportion" [label="rdf:type",style="dashed"];
  "ex_mass_proportion_iron" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_mass_proportion_iron" -> "ex_metal_sheet" [label="relational_quality_of"];
  "ex_mass_proportion_iron" -> "ex_some_iron" [label="relational_quality_of"];
  "ex_melting_process" -> "ex_steel_material" [label="has_specified_input"];
  "ex_melting_process" -> "ex_steel_material" [label="has_specified_output"];
  "ex_melting_process" -> "melting_process" [label="rdf:type",style="dashed"];
  "ex_melting_process" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_melting_temperature_steel" -> "ex_steel_material" [label="characteristic_of"];
  "ex_melting_temperature_steel" -> "melting_point" [label="rdf:type",style="dashed"];
  "ex_melting_temperature_steel" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_melting_temperature_steel" -> "ex_change_of_temperature_during_melting" [label="responds_with"];
  "ex_melting_temperature_steel" -> "ex_application_of_heat_flux" [label="stimulated_by"];
  "ex_melting_temperature_steel" -> "ex_melting_process" [label="stimulated_by"];
  "ex_metal_sheet" -> "object" [label="rdf:type",style="dashed"];
  "ex_metal_sheet" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_some_iron" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_some_iron" -> "portion_of_iron" [label="rdf:type",style="dashed"];
  "ex_steel_material" -> "ex_melting_process" [label="participates_in"];
  "ex_steel_material" -> "material" [label="rdf:type",style="dashed"];
  "ex_steel_material" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_svs_1500_deg_c" -> "degree_celsius" [label="has_measurement_unit_label"];
  "ex_svs_1500_deg_c" -> "val_n_1500_0" [label="has_specified_numeric_value"];
  "ex_svs_1500_deg_c" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_svs_1500_deg_c" -> "scalar_value_specification" [label="rdf:type",style="dashed"];
  "ex_svs_1500_deg_c" -> "ex_melting_temperature_steel" [label="specifies_value_of"];
  "ex_svs_15_g" -> "gram" [label="has_measurement_unit_label"];
  "ex_svs_15_g" -> "val_n_3_3" [label="has_specified_numeric_value"];
  "ex_svs_15_g" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_svs_15_g" -> "scalar_value_specification" [label="rdf:type",style="dashed"];
  "ex_svs_15_g" -> "ex_mass_metal_sheet" [label="specifies_value_of"];
  "ex_svs_7_5_g_per_cm" -> "gram_per_cubic_centimetre" [label="has_measurement_unit_label"];
  "ex_svs_7_5_g_per_cm" -> "val_n_7_5" [label="has_specified_numeric_value"];
  "ex_svs_7_5_g_per_cm" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_svs_7_5_g_per_cm" -> "scalar_value_specification" [label="rdf:type",style="dashed"];
  "ex_svs_7_5_g_per_cm" -> "ex_density_steel" [label="specifies_value_of"];
  "ex_tcq_temporal_region" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_tcq_temporal_region" -> "temporal_region" [label="rdf:type",style="dashed"];
  "ex_tqc_steel_material" -> "ex_tcq_temporal_region" [label="exists_at"];
  "ex_tqc_steel_material" -> "ex_steel_material" [label="is_state_of"];
  "ex_tqc_steel_material" -> "material" [label="rdf:type",style="dashed"];
  "ex_tqc_steel_material" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_tqc_steel_material" -> "temporally_qualified_continuant" [label="rdf:type",style="dashed"];
  "has_participant" -> "participates_in" [label="inverseOf"];
  "has_specified_input" -> "has_participant" [label="subPropertyOf"];
  "has_specified_output" -> "has_participant" [label="subPropertyOf"];
  "independent_continuant" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "mass" -> "quality" [label="rdfs:subClassOf"];
  "mass_proportion" -> "relational_quality" [label="rdfs:subClassOf"];
  "material" -> "material_entity" [label="rdfs:subClassOf"];
  "material_entity" -> "independent_continuant" [label="rdfs:subClassOf"];
  "material_entity" -> "independent_continuant" [label="rdfs:subClassOf"];
  "melting_point" -> "behavioral_material_property" [label="rdfs:subClassOf"];
  "melting_process" -> "process" [label="rdfs:subClassOf"];
  "object" -> "material_entity" [label="rdfs:subClassOf"];
  "object" -> "material_entity" [label="rdfs:subClassOf"];
  "portion_of_iron" -> "material_entity" [label="rdfs:subClassOf"];
  "process" -> "BFO_0000003" [label="rdfs:subClassOf"];
  "quality" -> "specifically_dependent_continuant" [label="rdfs:subClassOf"];
  "quality" -> "specifically_dependent_continuant" [label="rdfs:subClassOf"];
  "relational_quality" -> "quality" [label="rdfs:subClassOf"];
  "relational_quality" -> "quality" [label="rdfs:subClassOf"];
  "scalar_value_specification" -> "OBI_0001933" [label="rdfs:subClassOf"];
  "specifically_dependent_continuant" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "specifically_dependent_continuant" -> "entity" [label="rdfs:subClassOf"];
  "stimulating_process" -> "process" [label="rdfs:subClassOf"];
  "temporal_region" -> "BFO_0000003" [label="rdfs:subClassOf"];
}`,

            "measurement": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000002" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "BFO_0000003" [URL="http://purl.obolibrary.org/obo/BFO_0000003",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:occurrent",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000003"];
    "BFO_0000004" [URL="http://purl.obolibrary.org/obo/BFO_0000004",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:independent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000004"];
    "BFO_0000015" [URL="http://purl.obolibrary.org/obo/BFO_0000015",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000015"];
    "BFO_0000017" [URL="http://purl.obolibrary.org/obo/BFO_0000017",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:realizable_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000017"];
    "BFO_0000020" [URL="http://purl.obolibrary.org/obo/BFO_0000020",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:specifically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000020"];
    "BFO_0000023" [URL="http://purl.obolibrary.org/obo/BFO_0000023",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:role",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000023"];
    "BFO_0000031" [URL="http://purl.obolibrary.org/obo/BFO_0000031",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:generically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000031"];
    "IAO_0000027" [URL="http://purl.obolibrary.org/obo/IAO_0000027",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="iao:data_item",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000027"];
    "IAO_0000030" [URL="http://purl.obolibrary.org/obo/IAO_0000030",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="iao:information_content_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000030"];
    "OBI_0000011" [URL="http://purl.obolibrary.org/obo/OBI_0000011",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="obi:planned_process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000011"];
    "assay" [URL="http://purl.obolibrary.org/obo/OBI_0000070",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="assay",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000070"];
    "evaluant_role" [URL="http://purl.obolibrary.org/obo/OBI_0000067",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="evaluant_role",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000067"];
    "material_entity" [URL="http://purl.obolibrary.org/obo/BFO_0000040",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="material_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000040"];
    "measurement_datum" [URL="http://purl.obolibrary.org/obo/IAO_0000109",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="measurement_datum",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000109"];
    "owl_NamedIndividual" [URL="http://www.w3.org/2002/07/owl#NamedIndividual",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:NamedIndividual",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#NamedIndividual"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
    "quality" [URL="http://purl.obolibrary.org/obo/BFO_0000019",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="quality",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000019"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "centimeter" [URL="http://purl.obolibrary.org/obo/UO_0000015",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="centimeter",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/UO_0000015"];
    "my_assay" [URL="https://w3id.org/pmd/co/test/shape3/my_assay",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_assay",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_assay"];
    "my_entities_evaluant_role" [URL="https://w3id.org/pmd/co/test/shape3/my_entities_evaluant_role",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_entities_evaluant_role",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_entities_evaluant_role"];
    "my_entities_preexising_quality" [URL="https://w3id.org/pmd/co/test/shape3/my_entities_preexising_quality",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_entities_preexising_quality",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_entities_preexising_quality"];
    "my_entities_quality" [URL="https://w3id.org/pmd/co/test/shape3/my_entities_quality",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_entities_quality",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_entities_quality"];
    "my_evaluated_entity" [URL="https://w3id.org/pmd/co/test/shape3/my_evaluated_entity",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_evaluated_entity",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_evaluated_entity"];
    "my_measurment_datums_value_specification" [URL="https://w3id.org/pmd/co/test/shape3/my_measurment_datums_value_specification",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_measurment_datums_value_specification",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_measurment_datums_value_specification"];
    "my_objective" [URL="https://w3id.org/pmd/co/test/shape3/my_objective",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_objective",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_objective"];
    "my_qualities_measurement_datum" [URL="https://w3id.org/pmd/co/test/shape3/my_qualities_measurement_datum",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label=":my_qualities_measurement_datum",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/test/shape3/my_qualities_measurement_datum"];
  }
    "val_n_1_0" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="1.0",penwidth="2",shape="note",style="filled"];
  "BFO_0000001" -> "owl_Thing" [label="rdfs:subClassOf"];
  "BFO_0000002" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "BFO_0000003" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "BFO_0000004" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "BFO_0000015" -> "BFO_0000003" [label="rdfs:subClassOf"];
  "BFO_0000017" -> "BFO_0000020" [label="rdfs:subClassOf"];
  "BFO_0000020" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "BFO_0000023" -> "BFO_0000017" [label="rdfs:subClassOf"];
  "BFO_0000031" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "IAO_0000027" -> "IAO_0000030" [label="rdfs:subClassOf"];
  "IAO_0000030" -> "BFO_0000031" [label="rdfs:subClassOf"];
  "OBI_0000011" -> "BFO_0000015" [label="rdfs:subClassOf"];
  "assay" -> "OBI_0000011" [label="rdfs:subClassOf"];
  "evaluant_role" -> "BFO_0000023" [label="rdfs:subClassOf"];
  "material_entity" -> "BFO_0000004" [label="rdfs:subClassOf"];
  "measurement_datum" -> "IAO_0000027" [label="rdfs:subClassOf"];
  "my_assay" -> "my_objective" [label="achieves_planned_objective"];
  "my_assay" -> "my_evaluated_entity" [label="has_specified_input"];
  "my_assay" -> "my_qualities_measurement_datum" [label="has_specified_output"];
  "my_assay" -> "assay" [label="rdf:type",style="dashed"];
  "my_assay" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_assay" -> "my_entities_evaluant_role" [label="realizes"];
  "my_entities_evaluant_role" -> "evaluant_role" [label="rdf:type",style="dashed"];
  "my_entities_evaluant_role" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_entities_evaluant_role" -> "my_assay" [label="realized_in"];
  "my_entities_preexising_quality" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_entities_preexising_quality" -> "quality" [label="rdf:type",style="dashed"];
  "my_entities_quality" -> "my_qualities_measurement_datum" [label="quality_is_specified_as"];
  "my_entities_quality" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_entities_quality" -> "quality" [label="rdf:type",style="dashed"];
  "my_evaluated_entity" -> "my_entities_preexising_quality" [label="has_quality"];
  "my_evaluated_entity" -> "my_entities_quality" [label="has_quality"];
  "my_evaluated_entity" -> "my_entities_evaluant_role" [label="has_role"];
  "my_evaluated_entity" -> "material_entity" [label="rdf:type",style="dashed"];
  "my_evaluated_entity" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_measurment_datums_value_specification" -> "centimeter" [label="has_measurement_unit_label"];
  "my_measurment_datums_value_specification" -> "val_n_1_0" [label="has_specified_numeric_value"];
  "my_measurment_datums_value_specification" -> "my_evaluated_entity" [label="is_about"];
  "my_measurment_datums_value_specification" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "my_measurment_datums_value_specification" -> "my_entities_quality" [label="specifies_value_of"];
  "my_objective" -> "my_evaluated_entity" [label="is_about"];
  "my_qualities_measurement_datum" -> "my_measurment_datums_value_specification" [label="has_value_specification"];
  "my_qualities_measurement_datum" -> "my_evaluated_entity" [label="is_about"];
  "my_qualities_measurement_datum" -> "my_entities_quality" [label="is_quality_measurement_of"];
  "my_qualities_measurement_datum" -> "measurement_datum" [label="rdf:type",style="dashed"];
  "my_qualities_measurement_datum" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "quality" -> "BFO_0000020" [label="rdfs:subClassOf"];
}`,

            "process-chain": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000003" [URL="http://purl.obolibrary.org/obo/BFO_0000003",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:occurrent",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000003"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
    "process" [URL="http://purl.obolibrary.org/obo/BFO_0000015",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000015"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "ex_process_parent" [URL="https://www.example.org/process_parent",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_parent",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_parent"];
    "ex_process_step1" [URL="https://www.example.org/process_step1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_step1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_step1"];
    "ex_process_step2a" [URL="https://www.example.org/process_step2a",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_step2a",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_step2a"];
    "ex_process_step2b" [URL="https://www.example.org/process_step2b",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_step2b",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_step2b"];
    "ex_process_step3" [URL="https://www.example.org/process_step3",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_step3",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_step3"];
  }
  "BFO_0000001" -> "owl_Thing" [label="rdfs:subClassOf"];
  "BFO_0000003" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "ex_process_parent" -> "ex_process_step3" [label="ends_with"];
  "ex_process_parent" -> "ex_process_step1" [label="has_part"];
  "ex_process_parent" -> "ex_process_step2a" [label="has_part"];
  "ex_process_parent" -> "ex_process_step2b" [label="has_part"];
  "ex_process_parent" -> "ex_process_step3" [label="has_part"];
  "ex_process_parent" -> "process" [label="rdf:type",style="dashed"];
  "ex_process_parent" -> "ex_process_step1" [label="starts_with"];
  "ex_process_step1" -> "ex_process_step2a" [label="precedes"];
  "ex_process_step1" -> "ex_process_step2b" [label="precedes"];
  "ex_process_step1" -> "ex_process_step3" [label="precedes"];
  "ex_process_step1" -> "process" [label="rdf:type",style="dashed"];
  "ex_process_step2a" -> "ex_process_step3" [label="precedes"];
  "ex_process_step2a" -> "process" [label="rdf:type",style="dashed"];
  "ex_process_step2a" -> "ex_process_step2b" [label="simultaneous_with"];
  "ex_process_step2b" -> "process" [label="rdf:type",style="dashed"];
  "ex_process_step3" -> "process" [label="rdf:type",style="dashed"];
  "process" -> "BFO_0000003" [label="rdfs:subClassOf"];
}`,

            "realizable-entity-role": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000002" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "BFO_0000004" [URL="http://purl.obolibrary.org/obo/BFO_0000004",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:independent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000004"];
    "BFO_0000017" [URL="http://purl.obolibrary.org/obo/BFO_0000017",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:realizable_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000017"];
    "BFO_0000020" [URL="http://purl.obolibrary.org/obo/BFO_0000020",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:specifically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000020"];
    "BFO_0000023" [URL="http://purl.obolibrary.org/obo/BFO_0000023",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:role",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000023"];
    "BFO_0000040" [URL="http://purl.obolibrary.org/obo/BFO_0000040",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:material_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000040"];
    "evaluant_role" [URL="http://purl.obolibrary.org/obo/OBI_0000067",color="#7c5c8f",fillcolor="#a78bbc",fontcolor="#ffffff",label="evaluant_role",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/OBI_0000067"];
    "fatigue_testing_process" [URL="https://w3id.org/pmd/co/PMD_0000638",color="#4a5568",fillcolor="#6b7fa3",fontcolor="#ffffff",label="fatigue_testing_process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="https://w3id.org/pmd/co/PMD_0000638"];
    "object" [URL="http://purl.obolibrary.org/obo/BFO_0000030",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="object",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000030"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "ex_object_1" [URL="http://example.com/object_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:object_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/object_1"];
    "ex_objective_1" [URL="http://example.com/objective_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:objective_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/objective_1"];
    "ex_process_1" [URL="http://example.com/process_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/process_1"];
    "ex_result_1" [URL="http://example.com/result_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:result_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/result_1"];
    "ex_role_1" [URL="http://example.com/role_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:role_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="http://example.com/role_1"];
  }
  "BFO_0000001" -> "owl_Thing" [label="rdfs:subClassOf"];
  "BFO_0000002" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "BFO_0000004" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "BFO_0000017" -> "BFO_0000020" [label="rdfs:subClassOf"];
  "BFO_0000020" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "BFO_0000023" -> "BFO_0000017" [label="rdfs:subClassOf"];
  "BFO_0000040" -> "BFO_0000004" [label="rdfs:subClassOf"];
  "evaluant_role" -> "BFO_0000023" [label="rdfs:subClassOf"];
  "ex_object_1" -> "ex_role_1" [label="has_role"];
  "ex_object_1" -> "object" [label="rdf:type",style="dashed"];
  "ex_objective_1" -> "ex_object_1" [label="is_about"];
  "ex_process_1" -> "ex_objective_1" [label="achieves_planned_objective"];
  "ex_process_1" -> "ex_object_1" [label="has_specified_input"];
  "ex_process_1" -> "ex_result_1" [label="has_specified_output"];
  "ex_process_1" -> "fatigue_testing_process" [label="rdf:type",style="dashed"];
  "ex_result_1" -> "ex_object_1" [label="is_about"];
  "ex_role_1" -> "ex_process_1" [label="has_realization"];
  "ex_role_1" -> "evaluant_role" [label="rdf:type",style="dashed"];
  "object" -> "BFO_0000040" [label="rdfs:subClassOf"];
}`,

            "scalar-value-specification": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000002" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "BFO_0000031" [URL="http://purl.obolibrary.org/obo/BFO_0000031",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:generically_dependent_continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000031"];
    "IAO_0000009" [URL="http://purl.obolibrary.org/obo/IAO_0000009",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="iao:datum_label",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000009"];
    "IAO_0000030" [URL="http://purl.obolibrary.org/obo/IAO_0000030",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="iao:information_content_entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000030"];
    "measurement_unit" [URL="http://purl.obolibrary.org/obo/IAO_0000003",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="measurement_unit",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/IAO_0000003"];
    "owl_NamedIndividual" [URL="http://www.w3.org/2002/07/owl#NamedIndividual",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:NamedIndividual",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#NamedIndividual"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "ex_scalar_value_specification_X" [URL="https://www.example.org/scalar_value_specification_X",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:scalar_value_specification_X",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/scalar_value_specification_X"];
    "ex_unit_X" [URL="https://www.example.org/unit_X",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:unit_X",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/unit_X"];
  }
    "val_n_135_0" [color="#d97706",fillcolor="#fef3c7",fontcolor="#78350f",label="135.0",penwidth="2",shape="note",style="filled"];
  "BFO_0000002" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "BFO_0000031" -> "BFO_0000002" [label="rdfs:subClassOf"];
  "IAO_0000009" -> "IAO_0000030" [label="rdfs:subClassOf"];
  "IAO_0000030" -> "BFO_0000031" [label="rdfs:subClassOf"];
  "ex_scalar_value_specification_X" -> "ex_unit_X" [label="has_measurement_unit_label"];
  "ex_scalar_value_specification_X" -> "val_n_135_0" [label="has_specified_numeric_value"];
  "ex_scalar_value_specification_X" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "ex_unit_X" -> "measurement_unit" [label="rdf:type",style="dashed"];
  "ex_unit_X" -> "owl_NamedIndividual" [label="rdf:type",style="dashed"];
  "measurement_unit" -> "IAO_0000009" [label="rdfs:subClassOf"];
}`,

            "temporal-region": `digraph G {
  rankdir="BT";
  graph [bgcolor="transparent",compound="true",splines="true"];
  node  [fontname="Arial",fontsize="10"];
  edge  [fontname="Arial",fontsize="9"];
  subgraph "cluster_TBOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "BFO_0000001" [URL="http://purl.obolibrary.org/obo/BFO_0000001",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:entity",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000001"];
    "BFO_0000003" [URL="http://purl.obolibrary.org/obo/BFO_0000003",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="bfo:occurrent",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000003"];
    "continuant" [URL="http://purl.obolibrary.org/obo/BFO_0000002",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="continuant",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000002"];
    "one_dimensional_temporal_region" [URL="http://purl.obolibrary.org/obo/BFO_0000038",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="one-dimensional_temporal_region",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000038"];
    "owl_Thing" [URL="http://www.w3.org/2002/07/owl#Thing",color="#4a148c",fillcolor="#b34dff",fontcolor="#ffffff",label="owl:Thing",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://www.w3.org/2002/07/owl#Thing"];
    "process" [URL="http://purl.obolibrary.org/obo/BFO_0000015",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="process",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000015"];
    "temporal_region" [URL="http://purl.obolibrary.org/obo/BFO_0000008",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="temporal_region",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000008"];
    "zero_dimensional_temporal_region" [URL="http://purl.obolibrary.org/obo/BFO_0000148",color="#7c3aed",fillcolor="#b34dff",fontcolor="#ffffff",label="zero-dimensional_temporal_region",penwidth="2",shape="box",style="filled",target="_blank",tooltip="http://purl.obolibrary.org/obo/BFO_0000148"];
  }
  subgraph "cluster_ABOX" {
    label="";
    color="transparent";
    penwidth="0";
    style="rounded";
    "ex_end" [URL="https://www.example.org/end",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:end",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/end"];
    "ex_object_1" [URL="https://www.example.org/object_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:object_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/object_1"];
    "ex_period_1" [URL="https://www.example.org/period_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:period_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/period_1"];
    "ex_period_2" [URL="https://www.example.org/period_2",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:period_2",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/period_2"];
    "ex_process_1" [URL="https://www.example.org/process_1",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_1",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_1"];
    "ex_process_2" [URL="https://www.example.org/process_2",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:process_2",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/process_2"];
    "ex_some_time" [URL="https://www.example.org/some_time",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:some_time",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/some_time"];
    "ex_start" [URL="https://www.example.org/start",color="#1e40af",fillcolor="#e8f0ff",fontcolor="#0b1220",label="ex:start",penwidth="2",shape="ellipse",style="filled",target="_blank",tooltip="https://www.example.org/start"];
  }
  "BFO_0000001" -> "owl_Thing" [label="rdfs:subClassOf"];
  "BFO_0000003" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "continuant" -> "BFO_0000001" [label="rdfs:subClassOf"];
  "ex_end" -> "zero_dimensional_temporal_region" [label="rdf:type",style="dashed"];
  "ex_object_1" -> "ex_some_time" [label="exists_at"];
  "ex_object_1" -> "continuant" [label="rdf:type",style="dashed"];
  "ex_period_1" -> "ex_period_2" [label="proper_temporal_part_of"];
  "ex_period_1" -> "one_dimensional_temporal_region" [label="rdf:type",style="dashed"];
  "ex_period_2" -> "ex_start" [label="has_first_instant"];
  "ex_period_2" -> "ex_end" [label="has_last_instant"];
  "ex_period_2" -> "one_dimensional_temporal_region" [label="rdf:type",style="dashed"];
  "ex_process_1" -> "ex_period_1" [label="occupies_temporal_region"];
  "ex_process_1" -> "process" [label="rdf:type",style="dashed"];
  "ex_process_2" -> "ex_period_2" [label="occupies_temporal_region"];
  "ex_process_2" -> "process" [label="rdf:type",style="dashed"];
  "ex_some_time" -> "temporal_region" [label="rdf:type",style="dashed"];
  "ex_start" -> "zero_dimensional_temporal_region" [label="rdf:type",style="dashed"];
  "one_dimensional_temporal_region" -> "temporal_region" [label="rdfs:subClassOf"];
  "process" -> "BFO_0000003" [label="rdfs:subClassOf"];
  "temporal_region" -> "BFO_0000003" [label="rdfs:subClassOf"];
  "zero_dimensional_temporal_region" -> "temporal_region" [label="rdfs:subClassOf"];
}`,
        };

const nodeData = {
            "temporal-region": {
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "continuant": {
                                    "label": "continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000003": {
                                    "label": "bfo:occurrent",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000003"
                        },
                        "temporal_region": {
                                    "label": "temporal_region",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000008"
                        },
                        "process": {
                                    "label": "process",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000015"
                        },
                        "one_dimensional_temporal_region": {
                                    "label": "one-dimensional_temporal_region",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000038"
                        },
                        "zero_dimensional_temporal_region": {
                                    "label": "zero-dimensional_temporal_region",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000148"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "ex_end": {
                                    "label": "ex:end",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/end"
                        },
                        "ex_object_1": {
                                    "label": "ex:object_1",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/object_1"
                        },
                        "ex_period_1": {
                                    "label": "ex:period_1",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/period_1"
                        },
                        "ex_period_2": {
                                    "label": "ex:period_2",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/period_2"
                        },
                        "ex_process_1": {
                                    "label": "ex:process_1",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_1"
                        },
                        "ex_process_2": {
                                    "label": "ex:process_2",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_2"
                        },
                        "ex_some_time": {
                                    "label": "ex:some_time",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/some_time"
                        },
                        "ex_start": {
                                    "label": "ex:start",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/start"
                        }
            },
            "process-chain": {
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000003": {
                                    "label": "bfo:occurrent",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000003"
                        },
                        "process": {
                                    "label": "process",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000015"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "ex_process_parent": {
                                    "label": "ex:process_parent",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_parent"
                        },
                        "ex_process_step1": {
                                    "label": "ex:process_step1",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_step1"
                        },
                        "ex_process_step2a": {
                                    "label": "ex:process_step2a",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_step2a"
                        },
                        "ex_process_step2b": {
                                    "label": "ex:process_step2b",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_step2b"
                        },
                        "ex_process_step3": {
                                    "label": "ex:process_step3",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/process_step3"
                        }
            },
            "input-and-output-of-processes": {
                        "ex_object1": {
                                    "label": "ex:object1",
                                    "type": "Individual",
                                    "uri": "http://example.com/object1"
                        },
                        "ex_object2": {
                                    "label": "ex:object2",
                                    "type": "Individual",
                                    "uri": "http://example.com/object2"
                        },
                        "ex_object3": {
                                    "label": "ex:object3",
                                    "type": "Individual",
                                    "uri": "http://example.com/object3"
                        },
                        "ex_process1": {
                                    "label": "ex:process1",
                                    "type": "Individual",
                                    "uri": "http://example.com/process1"
                        },
                        "ex_process2": {
                                    "label": "ex:process2",
                                    "type": "Individual",
                                    "uri": "http://example.com/process2"
                        },
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000002": {
                                    "label": "bfo:continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000004": {
                                    "label": "bfo:independent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000004"
                        },
                        "object": {
                                    "label": "object",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000030"
                        },
                        "BFO_0000040": {
                                    "label": "bfo:material_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000040"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "coating": {
                                    "label": "coating",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000563"
                        },
                        "manufacturing_process": {
                                    "label": "manufacturing_process",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000833"
                        }
            },
            "realizable-entity-role": {
                        "ex_object_1": {
                                    "label": "ex:object_1",
                                    "type": "Individual",
                                    "uri": "http://example.com/object_1"
                        },
                        "ex_objective_1": {
                                    "label": "ex:objective_1",
                                    "type": "Individual",
                                    "uri": "http://example.com/objective_1"
                        },
                        "ex_process_1": {
                                    "label": "ex:process_1",
                                    "type": "Individual",
                                    "uri": "http://example.com/process_1"
                        },
                        "ex_result_1": {
                                    "label": "ex:result_1",
                                    "type": "Individual",
                                    "uri": "http://example.com/result_1"
                        },
                        "ex_role_1": {
                                    "label": "ex:role_1",
                                    "type": "Individual",
                                    "uri": "http://example.com/role_1"
                        },
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000002": {
                                    "label": "bfo:continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000004": {
                                    "label": "bfo:independent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000004"
                        },
                        "BFO_0000017": {
                                    "label": "bfo:realizable_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000017"
                        },
                        "BFO_0000020": {
                                    "label": "bfo:specifically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000020"
                        },
                        "BFO_0000023": {
                                    "label": "bfo:role",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000023"
                        },
                        "object": {
                                    "label": "object",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000030"
                        },
                        "BFO_0000040": {
                                    "label": "bfo:material_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000040"
                        },
                        "evaluant_role": {
                                    "label": "evaluant_role",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000067"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "fatigue_testing_process": {
                                    "label": "fatigue_testing_process",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000638"
                        }
            },
            "material-property-quality": {
                        "entity": {
                                    "label": "entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000002": {
                                    "label": "bfo:continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000003": {
                                    "label": "bfo:occurrent",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000003"
                        },
                        "independent_continuant": {
                                    "label": "independent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000004"
                        },
                        "temporal_region": {
                                    "label": "temporal_region",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000008"
                        },
                        "process": {
                                    "label": "process",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000015"
                        },
                        "quality": {
                                    "label": "quality",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000019"
                        },
                        "specifically_dependent_continuant": {
                                    "label": "specifically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000020"
                        },
                        "object": {
                                    "label": "object",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000030"
                        },
                        "BFO_0000031": {
                                    "label": "bfo:generically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000031"
                        },
                        "material_entity": {
                                    "label": "material_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000040"
                        },
                        "relational_quality": {
                                    "label": "relational_quality",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000145"
                        },
                        "IAO_0000030": {
                                    "label": "iao:information_content_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000030"
                        },
                        "has_specified_input": {
                                    "label": "has_specified_input",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000293"
                        },
                        "has_specified_output": {
                                    "label": "has_specified_output",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000299"
                        },
                        "scalar_value_specification": {
                                    "label": "scalar_value_specification",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0001931"
                        },
                        "OBI_0001933": {
                                    "label": "obi:value_specification",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0001933"
                        },
                        "participates_in": {
                                    "label": "participates_in",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/RO_0000056"
                        },
                        "has_participant": {
                                    "label": "has_participant",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/RO_0000057"
                        },
                        "gram": {
                                    "label": "gram",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/UO_0000021"
                        },
                        "degree_celsius": {
                                    "label": "degree_celsius",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/UO_0000027"
                        },
                        "gram_per_cubic_centimetre": {
                                    "label": "gram_per_cubic_centimetre",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/UO_0000084"
                        },
                        "mass_percentage": {
                                    "label": "mass_percentage",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/UO_0000163"
                        },
                        "owl_NamedIndividual": {
                                    "label": "owl:NamedIndividual",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#NamedIndividual"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "material": {
                                    "label": "material",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000000"
                        },
                        "behavioral_material_property": {
                                    "label": "behavioral_material_property",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000005"
                        },
                        "melting_process": {
                                    "label": "melting_process",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000053"
                        },
                        "temporally_qualified_continuant": {
                                    "label": "temporally_qualified_continuant",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000068"
                        },
                        "application_of_heat_flux": {
                                    "label": "application_of_heat_flux",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000520"
                        },
                        "change_of_temperature": {
                                    "label": "change_of_temperature",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000549"
                        },
                        "density": {
                                    "label": "density",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000597"
                        },
                        "melting_point": {
                                    "label": "melting_point",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000851"
                        },
                        "stimulating_process": {
                                    "label": "stimulating_process",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000950"
                        },
                        "portion_of_iron": {
                                    "label": "portion_of_iron",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020026"
                        },
                        "mass_proportion": {
                                    "label": "mass_proportion",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020102"
                        },
                        "mass": {
                                    "label": "mass",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020133"
                        },
                        "fraction_value_specification": {
                                    "label": "fraction_value_specification",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0025997"
                        },
                        "ex_application_of_heat_flux": {
                                    "label": "ex:application_of_heat_flux",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/application_of_heat_flux"
                        },
                        "ex_change_of_temperature_during_melting": {
                                    "label": "ex:change_of_temperature_during_melting",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/change_of_temperature_during_melting"
                        },
                        "ex_density_steel": {
                                    "label": "ex:density_steel",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/density_steel"
                        },
                        "ex_fraction_iron": {
                                    "label": "ex:fraction_iron",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/fraction_iron"
                        },
                        "ex_mass_metal_sheet": {
                                    "label": "ex:mass_metal_sheet",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/mass_metal_sheet"
                        },
                        "ex_mass_proportion_iron": {
                                    "label": "ex:mass_proportion_iron",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/mass_proportion_iron"
                        },
                        "ex_melting_process": {
                                    "label": "ex:melting_process",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/melting_process"
                        },
                        "ex_melting_temperature_steel": {
                                    "label": "ex:melting_temperature_steel",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/melting_temperature_steel"
                        },
                        "ex_metal_sheet": {
                                    "label": "ex:metal_sheet",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/metal_sheet"
                        },
                        "ex_some_iron": {
                                    "label": "ex:some_iron",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/some_iron"
                        },
                        "ex_steel_material": {
                                    "label": "ex:steel_material",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/steel_material"
                        },
                        "ex_svs_1500_deg_c": {
                                    "label": "ex:svs_1500_deg_c",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/svs_1500_deg_c"
                        },
                        "ex_svs_15_g": {
                                    "label": "ex:svs_15_g",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/svs_15_g"
                        },
                        "ex_svs_7_5_g_per_cm": {
                                    "label": "ex:svs_7_5_g_per_cm",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/svs_7_5_g_per_cm"
                        },
                        "ex_tcq_temporal_region": {
                                    "label": "ex:tcq_temporal_region",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/tcq_temporal_region"
                        },
                        "ex_tqc_steel_material": {
                                    "label": "ex:tqc_steel_material",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/tqc_steel_material"
                        },
                        "val_n_1500_0": {
                                    "label": "1500.0",
                                    "type": "Literal",
                                    "uri": ""
                        },
                        "val_n_3_3": {
                                    "label": "3.3",
                                    "type": "Literal",
                                    "uri": ""
                        },
                        "val_n_7_5": {
                                    "label": "7.5",
                                    "type": "Literal",
                                    "uri": ""
                        },
                        "val_n_97_7": {
                                    "label": "97.7",
                                    "type": "Literal",
                                    "uri": ""
                        }
            },
            "measurement": {
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000002": {
                                    "label": "bfo:continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000003": {
                                    "label": "bfo:occurrent",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000003"
                        },
                        "BFO_0000004": {
                                    "label": "bfo:independent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000004"
                        },
                        "BFO_0000015": {
                                    "label": "bfo:process",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000015"
                        },
                        "BFO_0000017": {
                                    "label": "bfo:realizable_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000017"
                        },
                        "quality": {
                                    "label": "quality",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000019"
                        },
                        "BFO_0000020": {
                                    "label": "bfo:specifically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000020"
                        },
                        "BFO_0000023": {
                                    "label": "bfo:role",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000023"
                        },
                        "BFO_0000031": {
                                    "label": "bfo:generically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000031"
                        },
                        "material_entity": {
                                    "label": "material_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000040"
                        },
                        "IAO_0000027": {
                                    "label": "iao:data_item",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000027"
                        },
                        "IAO_0000030": {
                                    "label": "iao:information_content_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000030"
                        },
                        "measurement_datum": {
                                    "label": "measurement_datum",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000109"
                        },
                        "OBI_0000011": {
                                    "label": "obi:planned_process",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000011"
                        },
                        "evaluant_role": {
                                    "label": "evaluant_role",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000067"
                        },
                        "assay": {
                                    "label": "assay",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/OBI_0000070"
                        },
                        "centimeter": {
                                    "label": "centimeter",
                                    "type": "Individual",
                                    "uri": "http://purl.obolibrary.org/obo/UO_0000015"
                        },
                        "owl_NamedIndividual": {
                                    "label": "owl:NamedIndividual",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#NamedIndividual"
                        },
                        "owl_Thing": {
                                    "label": "owl:Thing",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#Thing"
                        },
                        "my_assay": {
                                    "label": ":my_assay",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_assay"
                        },
                        "my_entities_evaluant_role": {
                                    "label": ":my_entities_evaluant_role",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_entities_evaluant_role"
                        },
                        "my_entities_preexising_quality": {
                                    "label": ":my_entities_preexising_quality",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_entities_preexising_quality"
                        },
                        "my_entities_quality": {
                                    "label": ":my_entities_quality",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_entities_quality"
                        },
                        "my_evaluated_entity": {
                                    "label": ":my_evaluated_entity",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_evaluated_entity"
                        },
                        "my_measurment_datums_value_specification": {
                                    "label": ":my_measurment_datums_value_specification",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_measurment_datums_value_specification"
                        },
                        "my_objective": {
                                    "label": ":my_objective",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_objective"
                        },
                        "my_qualities_measurement_datum": {
                                    "label": ":my_qualities_measurement_datum",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/test/shape3/my_qualities_measurement_datum"
                        },
                        "val_n_1_0": {
                                    "label": "1.0",
                                    "type": "Literal",
                                    "uri": ""
                        }
            },
            "scalar-value-specification": {
                        "BFO_0000001": {
                                    "label": "bfo:entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000001"
                        },
                        "BFO_0000002": {
                                    "label": "bfo:continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000002"
                        },
                        "BFO_0000031": {
                                    "label": "bfo:generically_dependent_continuant",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/BFO_0000031"
                        },
                        "measurement_unit": {
                                    "label": "measurement_unit",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000003"
                        },
                        "IAO_0000009": {
                                    "label": "iao:datum_label",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000009"
                        },
                        "IAO_0000030": {
                                    "label": "iao:information_content_entity",
                                    "type": "Class",
                                    "uri": "http://purl.obolibrary.org/obo/IAO_0000030"
                        },
                        "owl_NamedIndividual": {
                                    "label": "owl:NamedIndividual",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#NamedIndividual"
                        },
                        "ex_scalar_value_specification_X": {
                                    "label": "ex:scalar_value_specification_X",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/scalar_value_specification_X"
                        },
                        "ex_unit_X": {
                                    "label": "ex:unit_X",
                                    "type": "Individual",
                                    "uri": "https://www.example.org/unit_X"
                        },
                        "val_n_135_0": {
                                    "label": "135.0",
                                    "type": "Literal",
                                    "uri": ""
                        }
            },
            "categorical-value-specification": {
                        "ex_aggregate_state_quality": {
                                    "label": "ex:aggregate_state_quality",
                                    "type": "Individual",
                                    "uri": "http://www.example.org/#aggregate_state_quality"
                        },
                        "ex_crystal_structure_quality": {
                                    "label": "ex:crystal_structure_quality",
                                    "type": "Individual",
                                    "uri": "http://www.example.org/#crystal_structure_quality"
                        },
                        "ex_fcc_material": {
                                    "label": "ex:fcc_material",
                                    "type": "Individual",
                                    "uri": "http://www.example.org/#fcc_material"
                        },
                        "ex_grain_structure_quality": {
                                    "label": "ex:grain_structure_quality",
                                    "type": "Individual",
                                    "uri": "http://www.example.org/#grain_structure_quality"
                        },
                        "steel_melt": {
                                    "label": "steel_melt:",
                                    "type": "Individual",
                                    "uri": "http://www.example.org/#steel_melt:"
                        },
                        "owl_NamedIndividual": {
                                    "label": "owl:NamedIndividual",
                                    "type": "Class",
                                    "uri": "http://www.w3.org/2002/07/owl#NamedIndividual"
                        },
                        "material": {
                                    "label": "material",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000000"
                        },
                        "aggregate_state": {
                                    "label": "aggregate_state",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000512"
                        },
                        "crystal_structure": {
                                    "label": "crystal_structure",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0000591"
                        },
                        "bravais_lattice_cubic_face_centered": {
                                    "label": "bravais_lattice_cubic_face_centered",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020019"
                        },
                        "ferrite": {
                                    "label": "ferrite",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020100"
                        },
                        "aggregate_state_liquid": {
                                    "label": "aggregate_state_liquid",
                                    "type": "Individual",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020118"
                        },
                        "melt": {
                                    "label": "melt",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0020139"
                        },
                        "metallic_grain_structure": {
                                    "label": "metallic_grain_structure",
                                    "type": "Class",
                                    "uri": "https://w3id.org/pmd/co/PMD_0025003"
                        }
            }
};

        // ========== GRAPH VIEWER CLASS ==========


        // ========== VIZ.JS RENDERING ==========
        // Viz.js v2.1.2 (Graphviz compiled to JS/WASM). We load viz.js + full.render.js as classic scripts.
        // This module relies on global Viz / Module / render injected by those scripts.
        const createViz = () => {
            try {
                if (typeof Module !== 'undefined' && typeof render !== 'undefined') {
                    return new Viz({ Module, render });
                }
            } catch (_) { /* ignore */ }
            return new Viz();
        };

        let viz = createViz();

                const CSS_DPI = 96; // browser/CSS pixel density baseline
        const DEFAULT_EXPORT_DPI = 1200; // requested production export setting
        const MAX_EXPORT_PIXELS = 80_000_000; // safety cap (~320MB RGBA)

                function normalizeDot(dot) {
            if (!dot) return dot;

            // Fix a common JS-escaping pitfall: DOT snippets that include `\"` in source
            // may end up as double-quoted attribute values at runtime (e.g., label=""sh:or"").
            // Graphviz treats this as a broken string and typically errors near the first ':'.
            //
            // Normalize: label=""..."" -> label="..."
            // Apply to a small allowlist of attributes that commonly carry human text.
            dot = dot.replace(/\b(label|tooltip|xlabel)\s*=\s*""([^"\n]*?)""/g, '$1="$2"');

            // Defensive normalization for DOT emitted by diverse toolchains.
            // Primary fix: attribute values containing ':' (e.g., sh:targetClass) MUST be quoted in DOT when unquoted.
            // Secondary: some generators emit unquoted attribute values with spaces; DOT requires quoting.
            // Strategy: quote attribute values up to the next ',', ']' or ';' when they contain ':' or whitespace.
            return dot.replace(/(=)\s*([^"\[\]<>][^,\]\n;]*)/g, (m, eq, rawVal) => {
                const v = String(rawVal).trim();
                if (!v) return m;

                // leave numerics/booleans as-is
                if (/^[+-]?\d+(\.\d+)?$/.test(v)) return `${eq}${v}`;
                if (/^(true|false)$/i.test(v)) return `${eq}${v}`;

                // HTML-like values are valid without quotes: label=<...>
                if (v.startsWith('<') && v.endsWith('>')) return `${eq}${v}`;

                const needsQuotes = v.includes(':') || /\s/.test(v) || v.includes('//');
                if (!needsQuotes) return `${eq}${v}`;

                const escaped = v.replace(/"/g, '\\"');
                return `${eq}"${escaped}"`;
            });
        }

        async function renderDotToSvg(dot) {
            const normalized = normalizeDot(dot);
            try {
                return await viz.renderSVGElement(normalized);
            } catch (err) {
                // Viz instances can become unusable after a render error; recreate and retry once.
                viz = createViz();
                return await viz.renderSVGElement(normalized);
            }
        }

        function sanitizeGraphSvg(svg) {
            // Prevent navigation: remove all hyperlink targets/hrefs injected by DOT URL/href attributes.
            svg.querySelectorAll('a').forEach(a => {
                a.removeAttribute('href');
                a.removeAttribute('xlink:href');
                a.removeAttribute('target');
                a.style.cursor = 'pointer';
            });

            // Make sure SVG is well-formed for downloads.
            svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
            svg.style.maxWidth = 'none';
            svg.style.overflow = 'visible';

            // Improve text rendering consistency.
            svg.querySelectorAll('text').forEach(t => {
                t.style.userSelect = 'none';
            });
        }

        

        // ---------- High-resolution PNG export (1200 DPI default) ----------
        function parseSvgLengthToPx(lenStr) {
            if (!lenStr) return null;
            const s = String(lenStr).trim();
            const m = s.match(/^([+-]?\d*\.?\d+)([a-z%]*)$/i);
            if (!m) return null;
            const value = parseFloat(m[1]);
            const unit = (m[2] || '').toLowerCase();
            if (!isFinite(value)) return null;

            // CSS px baseline is 96 DPI.
            switch (unit) {
                case '':
                case 'px': return value;
                case 'pt': return value * (CSS_DPI / 72);
                case 'pc': return value * (CSS_DPI / 6);
                case 'in': return value * CSS_DPI;
                case 'cm': return value * (CSS_DPI / 2.54);
                case 'mm': return value * (CSS_DPI / 25.4);
                default: return value; // fallback
            }
        }

        function getSvgSizePx(svg) {
            const wAttr = svg.getAttribute('width');
            const hAttr = svg.getAttribute('height');
            const w = parseSvgLengthToPx(wAttr);
            const h = parseSvgLengthToPx(hAttr);
            if (w && h) return { width: w, height: h };

            const vb = svg.getAttribute('viewBox');
            if (vb) {
                const parts = vb.trim().split(/\s+/).map(Number);
                if (parts.length === 4 && parts.every(n => isFinite(n))) {
                    return { width: Math.abs(parts[2]), height: Math.abs(parts[3]) };
                }
            }

            const rect = svg.getBoundingClientRect?.();
            if (rect && rect.width && rect.height) return { width: rect.width, height: rect.height };
            return { width: 1200, height: 800 };
        }

        function crc32(buf) {
            let crc = 0xFFFFFFFF;
            for (let i = 0; i < buf.length; i++) {
                crc ^= buf[i];
                for (let k = 0; k < 8; k++) {
                    const mask = -(crc & 1);
                    crc = (crc >>> 1) ^ (0xEDB88320 & mask);
                }
            }
            return (crc ^ 0xFFFFFFFF) >>> 0;
        }

        function makePngChunk(type, data) {
            const t = new TextEncoder().encode(type);
            const len = data.length;
            const chunk = new Uint8Array(8 + len + 4);
            chunk[0] = (len >>> 24) & 255;
            chunk[1] = (len >>> 16) & 255;
            chunk[2] = (len >>> 8) & 255;
            chunk[3] = (len) & 255;
            chunk.set(t, 4);
            chunk.set(data, 8);

            const crcBuf = new Uint8Array(t.length + data.length);
            crcBuf.set(t, 0);
            crcBuf.set(data, t.length);
            const crc = crc32(crcBuf);

            const o = 8 + len;
            chunk[o + 0] = (crc >>> 24) & 255;
            chunk[o + 1] = (crc >>> 16) & 255;
            chunk[o + 2] = (crc >>> 8) & 255;
            chunk[o + 3] = (crc) & 255;
            return chunk;
        }

        async function setPngDpi(blob, dpi) {
            try {
                const ab = await blob.arrayBuffer();
                const bytes = new Uint8Array(ab);
                const sig = [137, 80, 78, 71, 13, 10, 26, 10];
                for (let i = 0; i < sig.length; i++) if (bytes[i] !== sig[i]) return blob;

                const ppm = Math.max(1, Math.round(dpi / 0.0254));
                const data = new Uint8Array(9);
                data[0] = (ppm >>> 24) & 255;
                data[1] = (ppm >>> 16) & 255;
                data[2] = (ppm >>> 8) & 255;
                data[3] = (ppm) & 255;
                data[4] = data[0];
                data[5] = data[1];
                data[6] = data[2];
                data[7] = data[3];
                data[8] = 1;

                const pHYs = makePngChunk('pHYs', data);

                const out = [];
                out.push(bytes.slice(0, 8));

                let offset = 8;
                let inserted = false;

                while (offset + 8 <= bytes.length) {
                    const len = (bytes[offset] << 24) | (bytes[offset + 1] << 16) | (bytes[offset + 2] << 8) | bytes[offset + 3];
                    const type = String.fromCharCode(bytes[offset + 4], bytes[offset + 5], bytes[offset + 6], bytes[offset + 7]);
                    const chunkTotal = 8 + len + 4;
                    const chunkBytes = bytes.slice(offset, offset + chunkTotal);

                    out.push(chunkBytes);

                    if (!inserted && type === 'IHDR') {
                        out.push(pHYs);
                        inserted = true;
                    }
                    offset += chunkTotal;
                    if (type === 'IEND') break;
                }

                const mergedLen = out.reduce((a, b) => a + b.length, 0);
                const merged = new Uint8Array(mergedLen);
                let p = 0;
                for (const part of out) { merged.set(part, p); p += part.length; }

                return new Blob([merged], { type: 'image/png' });
            } catch (_) {
                return blob;
            }
        }

        function loadImageFromUrl(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.decoding = 'async';
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = url;
            });
        }

        async function exportSvgToPng(svg, { dpi = DEFAULT_EXPORT_DPI, background = null } = {}) {
            const size = getSvgSizePx(svg);
            const baseW = Math.max(1, size.width);
            const baseH = Math.max(1, size.height);

            let scale = dpi / CSS_DPI;
            let outW = Math.round(baseW * scale);
            let outH = Math.round(baseH * scale);

            const basePixels = baseW * baseH;
            const desiredPixels = outW * outH;

            let actualDpi = dpi;
            if (desiredPixels > MAX_EXPORT_PIXELS) {
                const safeScale = Math.sqrt(MAX_EXPORT_PIXELS / basePixels);
                scale = Math.max(1, safeScale);
                outW = Math.round(baseW * scale);
                outH = Math.round(baseH * scale);
                actualDpi = Math.round(scale * CSS_DPI);
            }

            const svgText = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgText], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            try {
                const img = await loadImageFromUrl(url);
                const canvas = document.createElement('canvas');
                canvas.width = outW;
                canvas.height = outH;
                const ctx = canvas.getContext('2d', { alpha: true });
                if (!ctx) throw new Error('Canvas not available');

                if (background) {
                    ctx.fillStyle = background;
                    ctx.fillRect(0, 0, outW, outH);
                } else {
                    ctx.clearRect(0, 0, outW, outH);
                }

                ctx.imageSmoothingEnabled = true;
                ctx.setTransform(scale, 0, 0, scale, 0, 0);
                ctx.drawImage(img, 0, 0);

                const blob = await new Promise((resolve) => canvas.toBlob(resolve, 'image/png'));
                if (!blob) throw new Error('PNG generation failed');

                const dpiBlob = await setPngDpi(blob, actualDpi);
                return { blob: dpiBlob, dpi: actualDpi, width: outW, height: outH };
            } finally {
                URL.revokeObjectURL(url);
            }
        }

function parseEdgeTitle(title) {
            const raw = (title || '').trim();
            const m1 = raw.match(/^(.+?)->(.+?)$/);
            if (m1) return { src: m1[1].trim(), dst: m1[2].trim(), directed: true };
            const m2 = raw.match(/^(.+?)--(.+?)$/);
            if (m2) return { src: m2[1].trim(), dst: m2[2].trim(), directed: false };
            return null;
        }

        function getNodeIdFromG(g) {
            const t = g.querySelector('title')?.textContent?.trim();
            return t || null;
        }

        function getNodeLabelFromG(g) {
            const texts = Array.from(g.querySelectorAll('text')).map(t => (t.textContent || '').trim()).filter(Boolean);
            return texts.join(' ');
        }

        function getNodeMetaFromG(g) {
            const id = getNodeIdFromG(g) || g.getAttribute('id') || '';
            const label = getNodeLabelFromG(g) || id;
            const a = g.closest('a');
            const tooltip = a?.getAttribute('xlink:title') || a?.getAttribute('title') || null;
            return { id, label, tooltip };
        }

        // ========== FULLSCREEN MANAGER (ROBUST CLOSE) ==========
        const FullscreenManager = (() => {
            const overlay = document.getElementById('fullscreen-overlay');
            const wrapper = document.getElementById('fullscreen-wrapper');
            const titleEl = document.getElementById('fullscreen-title');
            const viewport = document.getElementById('fullscreen-viewport');
            const zoomLevel = document.getElementById('fs-zoom-level');
            const closeBtn = document.getElementById('fullscreen-close');
            const zoomInBtn = document.getElementById('fs-zoom-in');
            const zoomOutBtn = document.getElementById('fs-zoom-out');

            let fsScale = 1, fsTx = 0, fsTy = 0, fsDrag = false, fsSx = 0, fsSy = 0;
            let currentSvg = null;
            let onNodeClick = null;

            const update = () => {
                wrapper.style.transform = `translate(${fsTx}px, ${fsTy}px) scale(${fsScale})`;
                zoomLevel.textContent = `${Math.round(fsScale * 100)}%`;
            };

            const fit = () => {
                if (!currentSvg) return;
                const sr = currentSvg.getBoundingClientRect();
                const vr = viewport.getBoundingClientRect();
                if (!sr.width || !sr.height) return;
                fsScale = Math.min(vr.width / sr.width, vr.height / sr.height, 2) * 0.92;
                fsTx = (vr.width - sr.width * fsScale) / 2;
                fsTy = (vr.height - sr.height * fsScale) / 2;
                update();
            };

            const close = () => {
                overlay.classList.remove('active');
                document.body.style.overflow = '';
                wrapper.innerHTML = '';
                currentSvg = null;
                onNodeClick = null;
            };

            // Bind once (fixes "close button not working" across repeated opens).
            closeBtn.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); close(); });
            overlay.addEventListener('click', (e) => { if (e.target === overlay) close(); });

            zoomInBtn.addEventListener('click', () => { fsScale = Math.min(5, fsScale * 1.2); update(); });
            zoomOutBtn.addEventListener('click', () => { fsScale = Math.max(0.1, fsScale / 1.2); update(); });

            viewport.addEventListener('wheel', (e) => {
                if (!overlay.classList.contains('active')) return;
                e.preventDefault();
                const ns = Math.max(0.1, Math.min(5, fsScale * (e.deltaY > 0 ? 0.9 : 1.1)));
                const r = viewport.getBoundingClientRect();
                const mx = e.clientX - r.left;
                const my = e.clientY - r.top;
                const sd = ns - fsScale;
                fsTx -= (mx - fsTx) * (sd / fsScale);
                fsTy -= (my - fsTy) * (sd / fsScale);
                fsScale = ns;
                update();
            }, { passive: false });

            viewport.addEventListener('mousedown', (e) => {
                if (!overlay.classList.contains('active')) return;
                if (e.target.closest('g.node')) return;
                fsDrag = true;
                fsSx = e.clientX - fsTx;
                fsSy = e.clientY - fsTy;
            });

            window.addEventListener('mousemove', (e) => {
                if (!overlay.classList.contains('active')) return;
                if (!fsDrag) return;
                fsTx = e.clientX - fsSx;
                fsTy = e.clientY - fsSy;
                update();
            });

            window.addEventListener('mouseup', () => { fsDrag = false; });

            window.addEventListener('keydown', (e) => {
                if (!overlay.classList.contains('active')) return;
                if (e.key === 'Escape') close();
            });

            wrapper.addEventListener('click', (e) => {
                if (!overlay.classList.contains('active')) return;
                const node = e.target.closest('g.node');
                if (!node) return;
                if (e.target.closest('a')) e.preventDefault();
                e.stopPropagation();
                onNodeClick?.(node, e.clientX, e.clientY);
            }, true);

            return {
                open({ svg, title, onNodeClick: handler }) {
                    if (!svg) return;
                    overlay.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    titleEl.textContent = title || 'Graph View';

                    wrapper.innerHTML = '';
                    const clone = svg.cloneNode(true);
                    wrapper.appendChild(clone);
                    currentSvg = clone;
                    onNodeClick = handler || null;

                    sanitizeGraphSvg(clone);

                    fsScale = 1; fsTx = 0; fsTy = 0; fsDrag = false; fsSx = 0; fsSy = 0;
                    update();
                    setTimeout(fit, 50);
                },
                close
            };
        })();

        // ========== GRAPH VIEWER (DOT -> SVG) ==========
        class GraphvizGraphViewer {
            constructor(containerId, diagramId, dotCode, data) {
                this.container = document.getElementById(containerId);
                this.diagramId = diagramId;
                this.dotCode = dotCode;
                this.nodeData = data || {};
                this.scale = 1;
                this.tx = 0;
                this.ty = 0;
                this.drag = false;
                this.sx = 0;
                this.sy = 0;

                this.wrapper = this.container.querySelector('.graph-wrapper');
                this.viewport = this.container.querySelector('.graph-viewport');
                this.diagramEl = this.container.querySelector('.mermaid-diagram'); // keep existing markup class
                this.zoomLevel = this.container.querySelector('.zoom-level');
                this.popover = document.getElementById('global-popover');
                this.toast = document.getElementById('global-toast');

                this.nodeIndex = new Map();
                this.edges = [];
                this.neighbors = new Map();

                this.searchState = { query: '', matches: [], idx: 0 };
                this.injectSearchUI();

                this.init();
            }

            injectSearchUI() {
                const header = this.container.querySelector('.graph-header .graph-controls');
                if (!header) return;
                if (header.querySelector('.graph-search')) return;

                const input = document.createElement('input');
                input.className = 'graph-search';
                input.type = 'search';
                input.placeholder = 'Search nodes…';
                input.autocomplete = 'off';
                input.spellcheck = false;

                const clear = document.createElement('button');
                clear.className = 'graph-btn graph-search-clear';
                clear.type = 'button';
                clear.title = 'Clear search';
                clear.textContent = '✕';

                header.prepend(clear);
                header.prepend(input);

                input.addEventListener('input', () => this.applySearch(input.value));
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') { e.preventDefault(); this.jumpToNextMatch(); }
                    if (e.key === 'Escape') { input.value = ''; this.applySearch(''); input.blur(); }
                });

                clear.addEventListener('click', () => { input.value = ''; this.applySearch(''); input.focus(); });
            }

            async init() {
                try {
                    const svg = await renderDotToSvg(this.dotCode);
                    this.diagramEl.innerHTML = '';
                    this.diagramEl.appendChild(svg);
                    sanitizeGraphSvg(svg);

                    this.indexSvg(svg);
                    this.bindEvents();
                    setTimeout(() => this.fitView(), 80);
                } catch (e) {
                    console.error('Viz.js render error:', e);
                    this.diagramEl.innerHTML = `<div style="color: var(--color-error); padding: 20px;">Error rendering diagram: ${e?.message || e}</div>`;
                }
            }

            indexSvg(svg) {
                this.nodeIndex.clear();
                this.edges = [];
                this.neighbors.clear();

                svg.querySelectorAll('g.node').forEach(g => {
                    const id = getNodeIdFromG(g);
                    if (!id) return;
                    const label = getNodeLabelFromG(g) || id;
                    this.nodeIndex.set(id, { g, label });
                });

                svg.querySelectorAll('g.edge').forEach(g => {
                    const title = g.querySelector('title')?.textContent || '';
                    const parsed = parseEdgeTitle(title);
                    if (!parsed) return;
                    this.edges.push({ g, src: parsed.src, dst: parsed.dst, directed: parsed.directed });

                    if (!this.neighbors.has(parsed.src)) this.neighbors.set(parsed.src, new Set());
                    if (!this.neighbors.has(parsed.dst)) this.neighbors.set(parsed.dst, new Set());
                    this.neighbors.get(parsed.src).add(parsed.dst);
                    this.neighbors.get(parsed.dst).add(parsed.src);
                });
            }

            update() {
                this.wrapper.style.transform = `translate(${this.tx}px, ${this.ty}px) scale(${this.scale})`;
                this.zoomLevel.textContent = `${Math.round(this.scale * 100)}%`;
            }

            zoomIn() { this.scale = Math.min(3, this.scale * 1.2); this.hidePop(); this.update(); }
            zoomOut() { this.scale = Math.max(0.2, this.scale / 1.2); this.hidePop(); this.update(); }

            resetView() { this.clearFocus(); this.hidePop(); this.fitView(); }

            fitView() {
                const svg = this.diagramEl.querySelector('svg');
                if (!svg) return;
                const sr = svg.getBoundingClientRect();
                const wr = this.viewport.getBoundingClientRect();
                if (!sr.width || !sr.height) return;
                this.scale = Math.min(wr.width / sr.width, wr.height / sr.height, 1) * 0.88;
                this.tx = (wr.width - sr.width * this.scale) / 2;
                this.ty = (wr.height - sr.height * this.scale) / 2;
                this.clearFocus();
                this.hidePop();
                this.update();
            }

            showToast(msg) {
                this.toast.textContent = msg;
                this.toast.style.display = 'block';
                clearTimeout(this._toastTimeout);
                this._toastTimeout = setTimeout(() => this.toast.style.display = 'none', 1800);
            }

            async copyText(text) {
                try { await navigator.clipboard.writeText(text); this.showToast('Copied to clipboard'); }
                catch { this.showToast('Copy failed'); }
            }

            showPopForNode(nodeG, x, y) {
                const meta = getNodeMetaFromG(nodeG);
                const nodeId = meta.id;

                const data = this.nodeData[nodeId];
                const label = data?.label || meta.label || nodeId;
                const uri = data?.uri || meta.tooltip || null;

                let cat;
                switch (data?.type) {
                    case 'Class': cat = 'Class (TBox)'; break;
                    case 'Literal': cat = 'Literal'; break;
                    case 'Categorical': cat = 'Categorical Value'; break;
                    case 'SHACL Shape': cat = 'SHACL Shape'; break;
                    case 'Constraint': cat = 'SHACL Constraint'; break;
                    case undefined: cat = 'Node'; break;
                    default: cat = 'Individual (ABox)';
                }

                this.popover.innerHTML = `<div class="pop-head">
                    <button class="close-btn" type="button">×</button>
                    <div class="pop-title">${label}<span class="badge">${cat}</span></div>
                    <div class="pop-uri">${uri || 'No URI available'}</div>
                    <div class="pop-actions">
                        <button class="chip" type="button" data-copy="label">📋 Copy Label</button>
                        ${uri ? '<button class="chip" type="button" data-copy="uri">🔗 Copy URI</button>' : ''}
                        <button class="chip" type="button" data-copy="id">🆔 Copy ID</button>
                    </div>
                </div>`;

                this.popover.querySelector('.close-btn')?.addEventListener('click', () => this.popover.classList.remove('visible'));
                this.popover.querySelector('[data-copy="label"]')?.addEventListener('click', () => this.copyText(label));
                this.popover.querySelector('[data-copy="uri"]')?.addEventListener('click', () => uri && this.copyText(uri));
                this.popover.querySelector('[data-copy="id"]')?.addEventListener('click', () => this.copyText(nodeId));

                this.popover.classList.add('visible');
                const pr = this.popover.getBoundingClientRect();
                this.popover.style.left = Math.max(10, Math.min(x + 10, window.innerWidth - pr.width - 10)) + 'px';
                this.popover.style.top = Math.max(10, Math.min(y + 10, window.innerHeight - pr.height - 10)) + 'px';
            }

            hidePop() {
                this.popover.classList.remove('visible');
                this.diagramEl.querySelectorAll('g.node.selected').forEach(n => n.classList.remove('selected'));
            }

            downloadSVG() {
                const svg = this.diagramEl.querySelector('svg');
                if (!svg) return this.showToast('SVG not ready');
                const clone = svg.cloneNode(true);
                sanitizeGraphSvg(clone);
                const svgText = new XMLSerializer().serializeToString(clone);
                const blob = new Blob([svgText], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${this.diagramId}.svg`;
                a.click();
                URL.revokeObjectURL(url);
                this.showToast('Downloading SVG…');
            }

            async downloadPNG() {
                const svg = this.diagramEl.querySelector('svg');
                if (!svg) return this.showToast('PNG not ready');

                const clone = svg.cloneNode(true);
                sanitizeGraphSvg(clone);

                // Always use transparent background for PNG export
                const background = null;

                try {
                    const { blob, dpi } = await exportSvgToPng(clone, { dpi: DEFAULT_EXPORT_DPI, background });
                    const pngUrl = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = pngUrl;
                    a.download = `${this.diagramId}-${dpi}dpi.png`;
                    a.click();
                    setTimeout(() => URL.revokeObjectURL(pngUrl), 2000);

                    if (dpi === DEFAULT_EXPORT_DPI) this.showToast(`Downloading PNG (${dpi} DPI)…`);
                    else this.showToast(`Downloading PNG (~${dpi} DPI)…`);
                } catch (e) {
                    console.error('PNG export failed', e);
                    this.showToast('PNG export failed');
                }
            }openFullscreen() {
                const svg = this.diagramEl.querySelector('svg');
                if (!svg) return this.showToast('Graph not ready');
                const graphTitle = this.container.querySelector('.graph-title');
                const title = graphTitle ? graphTitle.textContent : 'Graph View';

                FullscreenManager.open({
                    svg,
                    title,
                    onNodeClick: (nodeG, x, y) => this.showPopForNode(nodeG, x, y)
                });
            }

            applySearch(query) {
                this.searchState.query = (query || '').trim().toLowerCase();
                this.searchState.matches = [];
                this.searchState.idx = 0;

                const q = this.searchState.query;
                this.diagramEl.querySelectorAll('g.node.search-match').forEach(n => n.classList.remove('search-match'));
                if (!q) return;

                for (const [id, info] of this.nodeIndex.entries()) {
                    if (info.label.toLowerCase().includes(q) || id.toLowerCase().includes(q)) {
                        info.g.classList.add('search-match');
                        this.searchState.matches.push(id);
                    }
                }
            }

            jumpToNextMatch() {
                const matches = this.searchState.matches;
                if (!matches.length) return this.showToast('No matches');
                const id = matches[this.searchState.idx % matches.length];
                this.searchState.idx = (this.searchState.idx + 1) % matches.length;
                const info = this.nodeIndex.get(id);
                if (!info) return;
                this.selectNode(info.g);
                this.panToNode(info.g);
            }

            panToNode(nodeG) {
                const vr = this.viewport.getBoundingClientRect();
                const nr = nodeG.getBoundingClientRect();
                const cx = (nr.left + nr.right) / 2;
                const cy = (nr.top + nr.bottom) / 2;
                const tx = vr.left + vr.width / 2;
                const ty = vr.top + vr.height / 2;
                this.tx += (tx - cx);
                this.ty += (ty - cy);
                this.update();
            }

            selectNode(nodeG) {
                this.diagramEl.querySelectorAll('g.node.selected').forEach(n => n.classList.remove('selected'));
                nodeG.classList.add('selected');
            }

            setFocus(nodeId) {
                const keep = new Set([nodeId]);
                const neigh = this.neighbors.get(nodeId);
                if (neigh) neigh.forEach(x => keep.add(x));

                this.diagramEl.querySelectorAll('g.node').forEach(g => {
                    const id = getNodeIdFromG(g);
                    if (!id) return;
                    g.classList.toggle('dimmed', !keep.has(id));
                });

                this.diagramEl.querySelectorAll('g.edge').forEach(g => g.classList.add('dimmed'));
                this.edges.forEach(e => {
                    const hit = e.src === nodeId || e.dst === nodeId;
                    e.g.classList.toggle('highlight-edge', hit);
                    e.g.classList.toggle('dimmed', !hit);
                });
            }

            clearFocus() {
                this.diagramEl.querySelectorAll('g.node.dimmed').forEach(g => g.classList.remove('dimmed'));
                this.diagramEl.querySelectorAll('g.edge.dimmed').forEach(g => g.classList.remove('dimmed'));
                this.diagramEl.querySelectorAll('g.edge.highlight-edge').forEach(g => g.classList.remove('highlight-edge'));
            }

            bindEvents() {
                this.container.querySelectorAll('.zoom-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const action = btn.dataset.action;
                        if (action === 'zoom-in') this.zoomIn();
                        if (action === 'zoom-out') this.zoomOut();
                    });
                });

                this.container.querySelectorAll('.graph-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const action = btn.dataset.action;
                        if (action === 'fit') this.fitView();
                        if (action === 'reset') this.resetView();
                        if (action === 'svg') this.downloadSVG();
                        if (action === 'png') this.downloadPNG();
                        if (action === 'fullscreen') this.openFullscreen();
                    });
                });

                this.viewport.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    const ns = Math.max(0.2, Math.min(3, this.scale * (e.deltaY > 0 ? 0.9 : 1.1)));
                    const r = this.viewport.getBoundingClientRect();
                    const mx = e.clientX - r.left;
                    const my = e.clientY - r.top;
                    const sd = ns - this.scale;
                    this.tx -= (mx - this.tx) * (sd / this.scale);
                    this.ty -= (my - this.ty) * (sd / this.scale);
                    this.scale = ns;
                    this.hidePop();
                    this.update();
                }, { passive: false });

                this.viewport.addEventListener('mousedown', (e) => {
                    if (e.target.closest('g.node')) return;
                    this.drag = true;
                    this.sx = e.clientX - this.tx;
                    this.sy = e.clientY - this.ty;
                    this.hidePop();
                });

                window.addEventListener('mousemove', (e) => {
                    if (!this.drag) return;
                    this.tx = e.clientX - this.sx;
                    this.ty = e.clientY - this.sy;
                    this.update();
                });

                window.addEventListener('mouseup', () => { this.drag = false; });

                this.diagramEl.addEventListener('click', (e) => {
                    if (e.target.closest('a')) e.preventDefault();
                    const node = e.target.closest('g.node');
                    if (node) {
                        const id = getNodeIdFromG(node);
                        if (id) {
                            this.selectNode(node);
                            this.setFocus(id);
                            this.showPopForNode(node, e.clientX, e.clientY);
                        }
                        e.stopPropagation();
                    } else {
                        this.clearFocus();
                        this.hidePop();
                    }
                }, true);

                this.diagramEl.addEventListener('mouseover', (e) => {
                    const node = e.target.closest('g.node');
                    if (node) node.classList.add('hovered');
                });

                this.diagramEl.addEventListener('mouseout', (e) => {
                    const node = e.target.closest('g.node');
                    if (node) node.classList.remove('hovered');
                });

                this.diagramEl.addEventListener('dblclick', (e) => { e.preventDefault(); this.fitView(); });

                this.container.addEventListener('mouseenter', () => this._active = true);
                this.container.addEventListener('mouseleave', () => this._active = false);
                window.addEventListener('keydown', (e) => {
                    if (!this._active) return;
                    if (e.key === 'f') this.fitView();
                    if (e.key === 'r') this.resetView();
                    if (e.key === 'Escape') { this.clearFocus(); this.hidePop(); }
                });
            }
        }

        // Create viewers sequentially to avoid Viz render conflicts
        async function initAllDiagrams() {
            const entries = Object.entries(dotDiagrams);
            for (const [id, dot] of entries) {
                const containerId = `graph-${id}`;
                const diagramId = `diagram-${id}`;
                const data = nodeData[id] || {};
                new GraphvizGraphViewer(containerId, diagramId, dot, data);
                await new Promise(resolve => setTimeout(resolve, 30));
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAllDiagrams);
        } else {
            initAllDiagrams();
        }

        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') document.getElementById('global-popover')?.classList.remove('visible');
        });

    </script>

    <script>
        // ========== SITE UX (SIDEBAR, THEME, TOC) ==========
        (() => {
            const $ = (s, e = document) => e.querySelector(s);
            const $$ = (s, e = document) => Array.from(e.querySelectorAll(s));

            // Mobile sidebar
            const menuBtn = $('.mobile-menu-btn');
            const sidebar = $('.sidebar');
            const overlay = $('.sidebar-overlay');

            const closeSidebar = () => {
                sidebar?.classList.remove('open');
                overlay?.classList.remove('active');
                document.body?.classList.remove('no-scroll');
            };

            const openSidebar = () => {
                sidebar?.classList.add('open');
                overlay?.classList.add('active');
                document.body?.classList.add('no-scroll');
            };

            if (menuBtn && sidebar && overlay) {
                menuBtn.addEventListener('click', () => {
                    sidebar.classList.contains('open') ? closeSidebar() : openSidebar();
                });
                overlay.addEventListener('click', closeSidebar);
                window.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') closeSidebar();
                });
            }

            // Theme toggle
            const themeBtn = $('.theme-toggle');
            const themeLabel = $('.theme-label');
            const THEME_KEY = 'pmd_theme';

            const applyTheme = (t) => {
                if (t === 'dark') {
                    document.body.classList.add('theme-dark');
                    if (themeLabel) themeLabel.textContent = 'Dark';
                } else {
                    document.body.classList.remove('theme-dark');
                    if (themeLabel) themeLabel.textContent = 'Light';
                }
            };

            try {
                const saved = localStorage.getItem(THEME_KEY);
                if (saved) applyTheme(saved);
            } catch (_) { }

            if (themeBtn) {
                themeBtn.addEventListener('click', () => {
                    const isDark = document.body.classList.contains('theme-dark');
                    const next = isDark ? 'light' : 'dark';
                    applyTheme(next);
                    try { localStorage.setItem(THEME_KEY, next); } catch (_) { }
                });
            }

            // TOC active section highlight
            const tocEl = $('.toc');
            const content = $('.content');

            if (tocEl && content) {
                const links = $$('a[href^="#"]', tocEl);
                const byId = new Map();

                for (const a of links) {
                    const id = (a.getAttribute('href') || '').slice(1);
                    if (id) byId.set(id, a);
                }

                const headings = $$('h2[id], h3[id]', content).filter(h => byId.has(h.id));

                const clear = () => links.forEach(a => a.classList.remove('active'));
                const setActive = (id) => {
                    clear();
                    const a = byId.get(id);
                    if (a) a.classList.add('active');
                };

                if ('IntersectionObserver' in window && headings.length) {
                    let currentActive = null;

                    const updateActiveOnScroll = () => {
                        const scrollY = window.scrollY + 120;
                        let found = null;

                        for (let i = headings.length - 1; i >= 0; i--) {
                            const h = headings[i];
                            if (h.offsetTop <= scrollY) {
                                found = h.id;
                                break;
                            }
                        }

                        if (!found && headings.length > 0) {
                            found = headings[0].id;
                        }

                        if (found !== currentActive) {
                            currentActive = found;
                            setActive(found);
                        }
                    };

                    window.addEventListener('scroll', updateActiveOnScroll, { passive: true });
                    updateActiveOnScroll();
                }
            }
        })();

                /* Search */
        class DocSearchEngine {
            constructor(docs) {
                this.docs = docs;
                this.docById = new Map(docs.map(d => [d.id, d]));
                this.index = new Map(); // token -> Map(docId -> tf)
                this.df = new Map();    // token -> document frequency
                this.idf = new Map();   // token -> inverse document frequency
                this.docLen = new Map();// docId -> length (tokens)
                this.vocab = [];
                this.trigram = new Map(); // trigram -> Set(token)
                this.avgLen = 1;
                this._build();
            }

            _normalizeText(t) {
                return (t || '')
                    .toLowerCase()
                    .normalize('NFKD')
                    .replace(/[\u0300-\u036f]/g, '')
                    .replace(/['’`]/g, '')
                    .replace(/[^a-z0-9]+/g, ' ')
                    .trim();
            }

            _tokenize(t) {
                const n = this._normalizeText(t);
                if (!n) return [];
                const tokens = n.split(/\s+/).filter(w => w.length >= 2);
                return tokens;
            }

            _addToken(token, docId) {
                let posting = this.index.get(token);
                if (!posting) { posting = new Map(); this.index.set(token, posting); }
                posting.set(docId, (posting.get(docId) || 0) + 1);
            }

            _buildTrigramsForToken(token) {
                const padded = `  ${token}  `;
                for (let i = 0; i < padded.length - 2; i++) {
                    const tri = padded.slice(i, i + 3);
                    let set = this.trigram.get(tri);
                    if (!set) { set = new Set(); this.trigram.set(tri, set); }
                    set.add(token);
                }
            }

            _build() {
                let totalLen = 0;

                for (const d of this.docs) {
                    const id = d.id;
                    const all = `${d.title || ''}\n${d.section || ''}\n${d.content || ''}`;
                    const tokens = this._tokenize(all);

                    this.docLen.set(id, tokens.length);
                    totalLen += tokens.length;

                    const seen = new Set();
                    for (const tok of tokens) {
                        this._addToken(tok, id);
                        if (!seen.has(tok)) {
                            seen.add(tok);
                            this.df.set(tok, (this.df.get(tok) || 0) + 1);
                        }
                    }
                }

                this.avgLen = Math.max(1, totalLen / Math.max(1, this.docs.length));

                // Build vocab + trigram index for fuzzy expansion
                this.vocab = Array.from(this.index.keys());
                for (const tok of this.vocab) this._buildTrigramsForToken(tok);

                // Precompute IDF (BM25-like)
                const N = Math.max(1, this.docs.length);
                for (const [tok, df] of this.df.entries()) {
                    const idf = Math.log(1 + (N - df + 0.5) / (df + 0.5));
                    this.idf.set(tok, idf);
                }
            }

            _levenshteinMax2(a, b) {
                // Early-exit Levenshtein (max 2); tuned for short query tokens
                if (a === b) return 0;
                const la = a.length, lb = b.length;
                const diff = Math.abs(la - lb);
                if (diff > 2) return 3;

                // DP rows
                let prev = new Array(lb + 1);
                let curr = new Array(lb + 1);
                for (let j = 0; j <= lb; j++) prev[j] = j;

                for (let i = 1; i <= la; i++) {
                    curr[0] = i;
                    let rowMin = curr[0];
                    const ca = a.charCodeAt(i - 1);
                    for (let j = 1; j <= lb; j++) {
                        const cost = ca === b.charCodeAt(j - 1) ? 0 : 1;
                        const v = Math.min(
                            prev[j] + 1,
                            curr[j - 1] + 1,
                            prev[j - 1] + cost
                        );
                        curr[j] = v;
                        if (v < rowMin) rowMin = v;
                    }
                    if (rowMin > 2) return 3;
                    [prev, curr] = [curr, prev];
                }
                return prev[lb];
            }

            _expandToken(q) {
                const token = this._normalizeText(q);
                if (!token) return [];

                // Exact
                if (this.index.has(token)) return [token];

                // Prefix candidates
                const pref = [];
                const maxPref = 40;
                for (const v of this.vocab) {
                    if (v.startsWith(token)) {
                        pref.push(v);
                        if (pref.length >= maxPref) break;
                    }
                }
                if (pref.length) return pref;

                // Fuzzy (trigram intersection + Levenshtein <=2)
                if (token.length < 4) return [];
                const padded = `  ${token}  `;
                const candidates = new Map(); // token -> overlap
                for (let i = 0; i < padded.length - 2; i++) {
                    const tri = padded.slice(i, i + 3);
                    const set = this.trigram.get(tri);
                    if (!set) continue;
                    for (const t of set) candidates.set(t, (candidates.get(t) || 0) + 1);
                }

                // Take top overlaps then filter by edit distance
                const ranked = Array.from(candidates.entries())
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 80)
                    .map(([t]) => t);

                const fuzzy = [];
                for (const t of ranked) {
                    if (Math.abs(t.length - token.length) > 2) continue;
                    const dist = this._levenshteinMax2(token, t);
                    if (dist <= 2) fuzzy.push(t);
                    if (fuzzy.length >= 20) break;
                }
                return fuzzy;
            }

            search(query, { limit = 30 } = {}) {
                const raw = (query || '').trim();
                if (!raw) return [];

                const parts = [];
                const re = /"([^"]+)"|(\S+)/g;
                let m;
                while ((m = re.exec(raw)) !== null) parts.push(m[1] || m[2]);

                const phrases = parts.filter(p => p.includes(' ') && !p.startsWith('type:') && !p.startsWith('section:'));
                const tokens = parts.filter(p => !p.includes(' ') && !p.startsWith('type:') && !p.startsWith('section:'));

                // Optional filters: type:graph / type:section / type:page, section:<text>
                const typeFilter = (parts.find(p => p.startsWith('type:')) || '').slice(5).toLowerCase();
                const sectionFilter = (parts.find(p => p.startsWith('section:')) || '').slice(8).toLowerCase();

                const scores = new Map();
                const matchedTokens = new Map(); // docId -> Set(tokens)

                for (const qt of tokens) {
                    const expanded = this._expandToken(qt);
                    for (const tok of expanded) {
                        const posting = this.index.get(tok);
                        if (!posting) continue;

                        const idf = this.idf.get(tok) || 0.1;
                        for (const [docId, tf] of posting.entries()) {
                            const d = this.docById.get(docId);
                            if (!d) continue;

                            if (typeFilter && String(d.type || '').toLowerCase() !== typeFilter) continue;
                            if (sectionFilter && !String(d.section || '').toLowerCase().includes(sectionFilter)) continue;

                            const len = this.docLen.get(docId) || 1;
                            const tfNorm = tf / (0.5 + 0.5 * (len / this.avgLen));
                            const base = (scores.get(docId) || 0) + (tfNorm * idf);
                            scores.set(docId, base);

                            let s = matchedTokens.get(docId);
                            if (!s) { s = new Set(); matchedTokens.set(docId, s); }
                            s.add(qt);
                        }
                    }
                }

                // Phrase filtering + boost
                const qLower = this._normalizeText(raw);
                const results = [];
                for (const [docId, score0] of scores.entries()) {
                    const d = this.docById.get(docId);
                    if (!d) continue;

                    const normTitle = this._normalizeText(d.title || '');
                    const normContent = this._normalizeText(d.content || '');

                    let score = score0;

                    // Title boost
                    if (qLower && normTitle.includes(qLower)) score *= 2.0;
                    else {
                        // partial boost
                        for (const qt of tokens) {
                            const nt = this._normalizeText(qt);
                            if (nt && normTitle.includes(nt)) score *= 1.25;
                        }
                    }

                    // Phrase requirement: every phrase must appear in title or content
                    let ok = true;
                    for (const ph of phrases) {
                        const np = this._normalizeText(ph);
                        if (!np) continue;
                        if (!normTitle.includes(np) && !normContent.includes(np)) { ok = false; break; }
                        score *= 1.15;
                    }
                    if (!ok) continue;

                    results.push({ doc: d, score, matched: Array.from(matchedTokens.get(docId) || []) });
                }

                results.sort((a, b) => b.score - a.score);
                return results.slice(0, limit);
            }
        }

        function slugify(text) {
            return (text || '')
                .toLowerCase()
                .trim()
                .replace(/[\s]+/g, '-')
                .replace(/[^a-z0-9\-]/g, '')
                .replace(/\-+/g, '-')
                .replace(/^\-+|\-+$/g, '');
        }

        function extractDotIndexText(dot) {
            if (!dot) return '';
            const out = new Set();

            // Node/edge labels
            const re = /label\s*=\s*"((?:\\.|[^"\\])*)"/g;
            let m;
            while ((m = re.exec(dot)) !== null) {
                const s = m[1].replace(/\\n/g, ' ').replace(/\\\"/g, '"').trim();
                if (s) out.add(s);
            }

            // Node IDs in quotes
            const reId = /"([^"]+)"\s*\[/g;
            while ((m = reId.exec(dot)) !== null) {
                const s = m[1].trim();
                if (s) out.add(s);
            }

            return Array.from(out).join(' · ');
        }

        function buildSearchDocuments() {
            const docs = [];
            const article = document.querySelector('article.content') || document.querySelector('.content') || document.body;

            const pageTitle = document.querySelector('h1')?.textContent?.trim() || document.title || 'Documentation';
            const pagePath = location.pathname.split('/').pop() || 'index.html';

            // Whole-page entry
            docs.push({
                id: `page:${pagePath}`,
                type: 'page',
                title: pageTitle,
                section: 'This page',
                path: `./${pagePath}`,
                content: (article?.innerText || '').trim()
            });

            // Section entries (h2/h3)
            const headings = Array.from(article.querySelectorAll('h2, h3'));
            headings.forEach((h, idx) => {
                const level = Number(h.tagName.substring(1)) || 2;
                const title = h.textContent.trim();
                if (!title) return;

                if (!h.id) h.id = `${slugify(title) || 'section'}-${idx + 1}`;
                const id = `sec:${pagePath}#${h.id}`;

                const parts = [];
                let el = h.nextElementSibling;
                while (el) {
                    const isHeading = /H[1-6]/.test(el.tagName);
                    if (isHeading) {
                        const nextLevel = Number(el.tagName.substring(1)) || 6;
                        if (nextLevel <= level) break;
                    }
                    // exclude scripts/styles
                    if (el.tagName !== 'SCRIPT' && el.tagName !== 'STYLE') parts.push(el.innerText || el.textContent || '');
                    el = el.nextElementSibling;
                }

                const content = parts.join('\n').trim();
                docs.push({
                    id,
                    type: 'section',
                    title,
                    section: pageTitle,
                    path: `./${pagePath}#${h.id}`,
                    content
                });
            });

            // Graph entries (node labels + edge labels + ids)
            document.querySelectorAll('.mermaid-graph-container').forEach((container) => {
                const title = container.querySelector('.graph-title')?.textContent?.trim() || 'Graph';
                const graphId = container.id || '';
                const key = graphId.startsWith('graph-') ? graphId.slice(6) : graphId;
                const dot = (typeof dotDiagrams !== 'undefined' && dotDiagrams[key]) ? dotDiagrams[key] : '';

                const graphText = extractDotIndexText(dot);
                if (!graphText.trim()) return;

                docs.push({
                    id: `graph:${pagePath}#${graphId || key}`,
                    type: 'graph',
                    title,
                    section: pageTitle,
                    path: graphId ? `./${pagePath}#${graphId}` : `./${pagePath}`,
                    content: graphText
                });
            });

            // Navigation pages from sidebar links
            document.querySelectorAll('.nav-link[href]').forEach((a) => {
                const t = (a.textContent || '').trim();
                const href = a.getAttribute('href');
                if (!t || !href) return;
                docs.push({
                    id: `nav:${href}`,
                    type: 'page',
                    title: t,
                    section: 'Pages',
                    path: href,
                    content: `Navigate to ${t}`
                });
            });

            return docs;
        }

        // ---- Cross-page search helpers (site-wide indexing) ----
        async function mapLimit(items, limit, fn) {
            const results = new Array(items.length);
            let idx = 0;

            const workers = new Array(Math.min(limit, items.length)).fill(0).map(async () => {
                while (true) {
                    const i = idx++;
                    if (i >= items.length) break;
                    results[i] = await fn(items[i], i, items.length);
                }
            });

            await Promise.all(workers);
            return results;
        }

        function extractDocsFromHtml(htmlText, href) {
            const docs = [];
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlText, 'text/html');

                const pageTitle = doc.querySelector('h1')?.textContent?.trim() || doc.title || (href || 'Page');
                const pagePath = (href || '').split('#')[0].split('/').pop() || href || 'page';

                const article = doc.querySelector('article.content') || doc.querySelector('.content') || doc.body;
                const pageText = (article?.innerText || '').trim();

                docs.push({
                    id: `page:${pagePath}`,
                    type: 'page',
                    title: pageTitle,
                    section: 'Pages',
                    path: href,
                    content: pageText
                });

                // Sections (h2/h3 with IDs)
                const headings = Array.from(doc.querySelectorAll('h2[id], h3[id]'));
                headings.forEach((h) => {
                    const title = (h.textContent || '').trim();
                    if (!title) return;

                    const level = Number(h.tagName.substring(1)) || 6;
                    const parts = [];
                    let el = h.nextElementSibling;
                    while (el) {
                        if (/^H[1-6]$/.test(el.tagName)) {
                            const nextLevel = Number(el.tagName.substring(1)) || 6;
                            if (nextLevel <= level) break;
                        }
                        if (el.tagName !== 'SCRIPT' && el.tagName !== 'STYLE') {
                            parts.push(el.innerText || el.textContent || '');
                        }
                        el = el.nextElementSibling;
                    }

                    const content = parts.join('\n').trim();
                    const id = `section:${pagePath}#${h.id}`;

                    docs.push({
                        id,
                        type: 'section',
                        title,
                        section: pageTitle,
                        path: `${href}#${h.id}`,
                        content
                    });
                });

                // Best-effort DOT indexing if the page embeds dotDiagrams (Graphviz).
                try {
                    const m = htmlText.match(/const\s+dotDiagrams\s*=\s*\{([\s\S]*?)\n\s*\};/);
                    if (m && m[1]) {
                        const body = m[1];
                        const re = /"([^"]+)"\s*:\s*`([\s\S]*?)`\s*,?/g;
                        let mm;
                        while ((mm = re.exec(body)) !== null) {
                            const key = mm[1];
                            const dot = mm[2] || '';
                            const graphText = extractDotIndexText(dot);
                            if (!graphText.trim()) continue;
                            docs.push({
                                id: `graph:${pagePath}:${key}`,
                                type: 'graph',
                                title: `Graph: ${key}`,
                                section: pageTitle,
                                path: href,
                                content: graphText
                            });
                        }
                    }
                } catch (e) { /* ignore */ }

            } catch (e) {
                return [];
            }
            return docs;
        }


        function makeSnippet(text, query, maxLen = 180) {
            if (!text) return '';
            const t = String(text).replace(/\s+/g, ' ').trim();
            if (!t) return '';

            const q = (query || '').trim();
            if (!q) return t.slice(0, maxLen);

            const nText = t.toLowerCase();
            const nQuery = q.toLowerCase().replace(/['’`]/g, '');

            let idx = nText.indexOf(nQuery);
            if (idx < 0) {
                // try token-based
                const tokens = nQuery.split(/\s+/).filter(Boolean);
                for (const tok of tokens) {
                    const j = nText.indexOf(tok);
                    if (j >= 0) { idx = j; break; }
                }
            }
            if (idx < 0) idx = 0;

            const start = Math.max(0, idx - Math.floor(maxLen / 3));
            const end = Math.min(t.length, start + maxLen);
            const prefix = start > 0 ? '…' : '';
            const suffix = end < t.length ? '…' : '';
            return prefix + t.slice(start, end) + suffix;
        }

        function highlightHtml(text, query) {
            const div = document.createElement('div');
            div.textContent = text || '';
            let safe = div.innerHTML;

            const q = (query || '').trim();
            if (!q) return safe;

            // Highlight up to first 8 distinct tokens
            const tokens = Array.from(new Set(q.split(/\s+/).filter(w => w.length >= 2))).slice(0, 8);
            for (const tok of tokens) {
                const re = new RegExp(`(${tok.replace(/[.*+?^${}()|[\\]\\]/g, '\\$&')})`, 'ig');
                safe = safe.replace(re, '<mark>$1</mark>');
            }
            return safe;
        }

        class Search {
            constructor() {
                this.selectedIndex = -1;
                this.docs = buildSearchDocuments();
                this.engine = new DocSearchEngine(this.docs);
                this.createModal();
                this.bindEvents();
                this.bootstrapCrossPageIndex();
            }

            createModal() {
                const html = `<div class="search-modal" id="search-modal" aria-hidden="true">
            <div class="search-modal-content" role="dialog" aria-modal="true" aria-label="Search">
                <div class="search-modal-header">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                    <input type="text" class="search-modal-input" id="search-input" placeholder="Search this documentation…  (tips: \"phrase\", type:graph, section:patterns)" autocomplete="off" spellcheck="false">
                    <kbd class="search-shortcut">ESC</kbd>
                </div>
                <div class="search-results" id="search-results"><div class="search-no-results">Type to search…</div></div>
                <div class="search-footer">
                    <span><kbd>↑</kbd><kbd>↓</kbd> Navigate</span>
                    <span><kbd>↵</kbd> Open</span>
                    <span><kbd>ESC</kbd> Close</span>
                </div>
            </div>
        </div>`;
                document.body.insertAdjacentHTML('beforeend', html);
                this.modal = document.getElementById('search-modal');
                this.input = document.getElementById('search-input');
                this.resultsContainer = document.getElementById('search-results');

                // Index status (updated as cross-page indexing progresses)
                this.footer = this.modal.querySelector('.search-footer');
                this.statusEl = document.createElement('span');
                this.statusEl.id = 'search-index-status';
                this.statusEl.className = 'search-index-status';
                this.statusEl.textContent = 'Index: current page';
                if (this.footer) this.footer.appendChild(this.statusEl);


                // Sidebar search input (kept for layout, opens modal)
                document.querySelector('.search-input')?.addEventListener('click', (e) => { e.preventDefault(); this.open(); });
            }

            bindEvents() {
                document.addEventListener('keydown', (e) => {
                    // Open: Ctrl/Cmd + K
                    if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') {
                        e.preventDefault();
                        this.open();
                        return;
                    }

                    if (!this.modal.classList.contains('active')) return;

                    if (e.key === 'Escape') { e.preventDefault(); this.close(); return; }
                    if (e.key === 'ArrowDown') { e.preventDefault(); this.navigate(1); return; }
                    if (e.key === 'ArrowUp') { e.preventDefault(); this.navigate(-1); return; }
                    if (e.key === 'Enter') { e.preventDefault(); this.selectCurrent(); return; }
                });

                this.modal.addEventListener('click', (e) => { if (e.target === this.modal) this.close(); });

                this.input.addEventListener('input', () => {
                    this.selectedIndex = -1;
                    this.search(this.input.value);
                });
            }

            navigate(dir) {
                const items = Array.from(this.resultsContainer.querySelectorAll('.search-result-item'));
                if (!items.length) return;
                this.selectedIndex = Math.max(0, Math.min(items.length - 1, this.selectedIndex + dir));
                items.forEach((el, i) => el.classList.toggle('selected', i === this.selectedIndex));
                items[this.selectedIndex]?.scrollIntoView({ block: 'nearest' });
            }

            selectCurrent() {
                const items = Array.from(this.resultsContainer.querySelectorAll('.search-result-item'));
                if (!items.length) return;
                const idx = this.selectedIndex >= 0 ? this.selectedIndex : 0;
                const item = items[idx];
                const path = item?.dataset?.path;
                if (!path) return;

                this.close();

                // In-page navigation: preserve smooth scroll and flash target
                if (path.includes('#') && path.split('#')[0].endsWith(location.pathname.split('/').pop() || '')) {
                    const id = path.split('#')[1];
                    const el = document.getElementById(id);
                    if (el) {
                        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        el.classList.add('search-target-flash');
                        setTimeout(() => el.classList.remove('search-target-flash'), 900);
                        return;
                    }
                }

                window.location.href = path;
            }

            render(results, query) {
                if (!query.trim()) {
                    this.resultsContainer.innerHTML = `<div class="search-no-results">Type to search…</div>`;
                    return;
                }

                if (!results.length) {
                    this.resultsContainer.innerHTML = `<div class="search-no-results">No results for “${this.escapeHtml(query)}”.</div>`;
                    return;
                }

                const html = results.map((r, i) => {
                    const d = r.doc;
                    const badge = String(d.type || 'result').toUpperCase();
                    const snippet = makeSnippet(d.content || '', query, 190);

                    return `<div class="search-result-item ${i === 0 ? 'selected' : ''}" data-index="${i}" data-path="${this.escapeHtml(d.path)}">
                        <div class="search-result-header">
                            <div class="search-result-title">${highlightHtml(d.title || '', query)}</div>
                            <span class="search-result-badge">${badge}</span>
                        </div>
                        <div class="search-result-section">${this.escapeHtml(d.section || '')}</div>
                        <div class="search-result-snippet">${highlightHtml(snippet, query)}</div>
                    </div>`;
                }).join('');

                this.resultsContainer.innerHTML = html;
                this.selectedIndex = 0;

                this.resultsContainer.querySelectorAll('.search-result-item').forEach(item => {
                    item.addEventListener('click', () => {
                        this.selectedIndex = Number(item.dataset.index || 0);
                        this.selectCurrent();
                    });
                });
            }

            search(query) {
                const results = this.engine.search(query, { limit: 30 });
                this.render(results, query);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text || '';
                return div.innerHTML;
            }

            open() {
                this.modal.classList.add('active');
                this.modal.setAttribute('aria-hidden', 'false');
                this.input.focus();
                this.input.select();
                this.search(this.input.value || '');
            }

            close() {
                this.modal.classList.remove('active');
                this.modal.setAttribute('aria-hidden', 'true');
                this.input.blur();
            }

            _setIndexStatus(msg) {
                if (!this.statusEl) return;
                this.statusEl.textContent = msg;
            }

            async bootstrapCrossPageIndex() {
                // Load pre-built search index for efficient cross-page search
                try {
                    const protocol = (location && location.protocol) ? location.protocol : '';
                    if (protocol === 'file:') {
                        this._setIndexStatus('Index: current page (open via http(s) for site-wide search)');
                        return;
                    }

                    this._setIndexStatus('Loading search index...');
                    
                    // Try to load the pre-built search index
                    const indexUrl = new URL('./search-index.json', location.href);
                    const res = await fetch(indexUrl.toString(), { credentials: 'same-origin', cache: 'default' });
                    
                    if (!res.ok) {
                        this._setIndexStatus('Index: current page');
                        return;
                    }
                    
                    const searchIndex = await res.json();
                    
                    if (!Array.isArray(searchIndex) || !searchIndex.length) {
                        this._setIndexStatus('Index: current page');
                        return;
                    }
                    
                    // Convert search index entries to docs format
                    const extraDocs = [];
                    for (const entry of searchIndex) {
                        // Add page entry
                        extraDocs.push({
                            id: `page-${entry.href}`,
                            title: entry.title,
                            section: entry.section,
                            path: entry.href,
                            content: entry.content || '',
                            type: 'page'
                        });
                        
                        // Add heading entries for section-level search with content snippets
                        if (entry.headings && Array.isArray(entry.headings)) {
                            for (const h of entry.headings) {
                                extraDocs.push({
                                    id: `heading-${entry.href}-${h.slug}`,
                                    title: h.text,
                                    section: entry.title,
                                    path: `${entry.href}#${h.slug}`,
                                    content: h.content || '',  // Use section content from enhanced index
                                    type: 'section'
                                });
                            }
                        }
                    }
                    
                    if (extraDocs.length) {
                        // Merge with existing docs, avoiding duplicates
                        const byId = new Map(this.docs.map(d => [d.id, d]));
                        for (const d of extraDocs) byId.set(d.id, d);
                        this.docs = Array.from(byId.values());
                        this.engine = new DocSearchEngine(this.docs);

                        if (this.modal && this.modal.classList.contains('active')) {
                            const q = (this.input?.value || '').trim();
                            if (q) this.search(q);
                        }
                    }

                    const pagesIndexed = searchIndex.length;
                    const sectionsIndexed = extraDocs.length - pagesIndexed;
                    this._setIndexStatus(`Index: ${pagesIndexed} pages, ${sectionsIndexed} sections`);
                } catch (e) {
                    this._setIndexStatus('Index: current page');
                }
            }

        }

        /* Image Viewer */
        class ImageViewer {
            constructor() {
                this.scale = 1;
                this.translateX = 0;
                this.translateY = 0;
                this.isDragging = false;
                this.startX = 0;
                this.startY = 0;
                this.currentElement = null;
                this.createOverlay();
                this.bindEvents();
            }

            createOverlay() {
                const html = `
            <div class="image-viewer-overlay" id="image-viewer">
                <button class="image-viewer-close">&times;</button>
                <div class="image-viewer-container" id="image-viewer-container"></div>
                <div class="image-viewer-controls">
                    <button class="image-viewer-btn" id="zoom-in">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
                        Zoom In
                    </button>
                    <button class="image-viewer-btn" id="zoom-out">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
                        Zoom Out
                    </button>
                    <button class="image-viewer-btn" id="zoom-reset">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                        Reset
                    </button>
                    <button class="image-viewer-btn" id="download-png">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                        Download PNG
                    </button>
                </div>
            </div>`;
                document.body.insertAdjacentHTML('beforeend', html);
                this.overlay = document.getElementById('image-viewer');
                this.container = document.getElementById('image-viewer-container');
            }

            bindEvents() {
                document.querySelectorAll('.content img, .content svg, .viewable-image').forEach(el => {
                    el.style.cursor = 'zoom-in';
                    el.addEventListener('click', e => {
                        e.preventDefault();
                        this.open(el);
                    });
                });

                this.overlay.querySelector('.image-viewer-close').addEventListener('click', () => this.close());
                this.overlay.addEventListener('click', e => { if (e.target === this.overlay) this.close(); });
                document.getElementById('zoom-in').addEventListener('click', () => this.zoom(0.25));
                document.getElementById('zoom-out').addEventListener('click', () => this.zoom(-0.25));
                document.getElementById('zoom-reset').addEventListener('click', () => this.reset());
                document.getElementById('download-png').addEventListener('click', () => this.downloadPNG());

                this.container.addEventListener('wheel', e => {
                    e.preventDefault();
                    this.zoom(e.deltaY > 0 ? -0.1 : 0.1);
                });

                this.container.addEventListener('mousedown', e => {
                    this.isDragging = true;
                    this.startX = e.clientX - this.translateX;
                    this.startY = e.clientY - this.translateY;
                    this.container.style.cursor = 'grabbing';
                });

                document.addEventListener('mousemove', e => {
                    if (!this.isDragging) return;
                    this.translateX = e.clientX - this.startX;
                    this.translateY = e.clientY - this.startY;
                    this.updateTransform();
                });

                document.addEventListener('mouseup', () => {
                    this.isDragging = false;
                    this.container.style.cursor = 'grab';
                });

                document.addEventListener('keydown', e => {
                    if (!this.overlay.classList.contains('active')) return;
                    if (e.key === 'Escape') this.close();
                    if (e.key === '+' || e.key === '=') this.zoom(0.25);
                    if (e.key === '-') this.zoom(-0.25);
                    if (e.key === '0') this.reset();
                });
            }

            open(element) {
                this.currentElement = element;
                this.reset();

                if (element.tagName === 'IMG') {
                    const img = document.createElement('img');
                    img.src = element.src;
                    img.alt = element.alt || 'Image';
                    // Let CSS handle sizing - don't override with inline styles
                    this.container.innerHTML = '';
                    this.container.appendChild(img);
                } else if (element.tagName === 'svg' || element.tagName === 'SVG') {
                    const clone = element.cloneNode(true);
                    // Reset any inline dimensions from the original
                    clone.removeAttribute('width');
                    clone.removeAttribute('height');
                    clone.style.width = '';
                    clone.style.height = '';
                    this.container.innerHTML = '';
                    this.container.appendChild(clone);
                }

                this.overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            close() {
                this.overlay.classList.remove('active');
                document.body.style.overflow = '';
            }

            zoom(delta) {
                // Allow much wider zoom range for detailed images (0.1x to 20x)
                this.scale = Math.max(0.1, Math.min(20, this.scale + delta));
                this.updateTransform();
            }

            reset() {
                this.scale = 1;
                this.translateX = 0;
                this.translateY = 0;
                this.updateTransform();
            }

            updateTransform() {
                const el = this.container.querySelector('img, svg');
                if (el) el.style.transform = `translate(${this.translateX}px, ${this.translateY}px) scale(${this.scale})`;
            }

            async downloadPNG() {
                const el = this.container.querySelector('img, svg');
                if (!el) return;

                if (el.tagName === 'IMG') {
                    // For regular images, download the original file directly
                    // This avoids canvas tainting issues with local files
                    try {
                        const response = await fetch(el.src);
                        const blob = await response.blob();
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.href = url;
                        // Extract filename from src or use default
                        const srcParts = el.src.split('/');
                        const originalName = srcParts[srcParts.length - 1].split('?')[0] || 'image';
                        link.download = originalName.includes('.') ? originalName : originalName + '.png';
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                    } catch (err) {
                        // Fallback for file:// protocol or CORS issues - open image source
                        console.warn('Image download failed, opening source:', err);
                        const link = document.createElement('a');
                        link.href = el.src;
                        link.download = 'image.png';
                        link.target = '_blank';
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }
                } else {
                    // For SVG - render to PNG with TRANSPARENT background
                    try {
                        const svgData = new XMLSerializer().serializeToString(el);
                        const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                        const url = URL.createObjectURL(svgBlob);

                        const img = new Image();
                        img.src = url;
                        await new Promise((resolve, reject) => {
                            img.onload = resolve;
                            img.onerror = reject;
                        });

                        const width = el.viewBox?.baseVal?.width || el.getBoundingClientRect().width || 800;
                        const height = el.viewBox?.baseVal?.height || el.getBoundingClientRect().height || 600;

                        const canvas = document.createElement('canvas');
                        canvas.width = width * 2;  // 2x for better quality
                        canvas.height = height * 2;
                        const ctx = canvas.getContext('2d');
                        // TRANSPARENT background - don't fill with white
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.scale(2, 2);
                        ctx.drawImage(img, 0, 0, width, height);
                        URL.revokeObjectURL(url);

                        const link = document.createElement('a');
                        link.download = 'pmdco-diagram.png';
                        link.href = canvas.toDataURL('image/png');
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    } catch (err) {
                        // Fallback: download as SVG
                        console.warn('PNG conversion failed, downloading as SVG:', err);
                        const svgData = new XMLSerializer().serializeToString(el);
                        const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                        const url = URL.createObjectURL(svgBlob);
                        const link = document.createElement('a');
                        link.href = url;
                        link.download = 'pmdco-diagram.svg';
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                    }
                }
            }
        }

        // Initialize Search and ImageViewer
        new Search();
        new ImageViewer();

        // ========== ONTOLOGY TREE MANAGER ==========
        class OntologyTreeManager {
            constructor() {
                this.tooltip = null;
                this.init();
            }

            init() {
                if (!document.querySelector('.ontology-tree-container')) return;
                this.createTooltip();
                this.bindEvents();
            }

            createTooltip() {
                this.tooltip = document.createElement('div');
                this.tooltip.className = 'tree-tooltip';
                document.body.appendChild(this.tooltip);
            }

            bindEvents() {
                document.querySelectorAll('.tree-toggle').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleNode(btn);
                    });
                });

                document.querySelectorAll('.tree-expand-all').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const container = btn.closest('.ontology-tree-container');
                        this.expandAll(container);
                    });
                });

                document.querySelectorAll('.tree-collapse-all').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const container = btn.closest('.ontology-tree-container');
                        this.collapseAll(container);
                    });
                });

                document.querySelectorAll('.tree-search').forEach(input => {
                    input.addEventListener('input', (e) => {
                        const container = input.closest('.ontology-tree-container');
                        this.filterTree(container, e.target.value);
                    });
                });

                document.querySelectorAll('.tree-node.has-definition').forEach(node => {
                    node.addEventListener('mouseenter', (e) => this.showTooltip(e, node));
                    node.addEventListener('mouseleave', () => this.hideTooltip());
                    node.addEventListener('mousemove', (e) => this.moveTooltip(e));
                });
            }

            toggleNode(btn) {
                const li = btn.closest('li');
                const children = li.querySelector(':scope > .tree-children');
                if (!children) return;

                const isCollapsed = btn.classList.contains('collapsed');
                if (isCollapsed) {
                    btn.classList.remove('collapsed');
                    btn.classList.add('expanded');
                    children.classList.remove('collapsed');
                    children.style.maxHeight = children.scrollHeight + 'px';
                } else {
                    btn.classList.remove('expanded');
                    btn.classList.add('collapsed');
                    children.classList.add('collapsed');
                }
            }

            expandAll(container) {
                container.querySelectorAll('.tree-toggle.collapsed').forEach(btn => {
                    btn.classList.remove('collapsed');
                    btn.classList.add('expanded');
                });
                container.querySelectorAll('.tree-children').forEach(children => {
                    children.classList.remove('collapsed');
                    children.style.maxHeight = 'none';
                });
            }

            collapseAll(container) {
                container.querySelectorAll('.tree-toggle.expanded').forEach(btn => {
                    btn.classList.remove('expanded');
                    btn.classList.add('collapsed');
                });
                container.querySelectorAll('.tree-children').forEach(children => {
                    children.classList.add('collapsed');
                });
            }

            filterTree(container, query) {
                const tree = container.querySelector('.ontology-tree');
                const nodes = tree.querySelectorAll('.tree-node');
                const q = query.toLowerCase().trim();

                if (!q) {
                    nodes.forEach(node => {
                        node.classList.remove('search-match');
                        node.closest('li').style.display = '';
                    });
                    return;
                }

                const matchedLis = new Set();
                nodes.forEach(node => {
                    const label = node.querySelector('.tree-label')?.textContent.toLowerCase() || '';
                    const prefix = node.querySelector('.tree-prefix')?.textContent.toLowerCase() || '';
                    const isMatch = label.includes(q) || prefix.includes(q);
                    node.classList.toggle('search-match', isMatch);
                    if (isMatch) {
                        let li = node.closest('li');
                        while (li) {
                            matchedLis.add(li);
                            li = li.parentElement?.closest('li');
                        }
                    }
                });

                tree.querySelectorAll('li').forEach(li => {
                    if (matchedLis.has(li)) {
                        li.style.display = '';
                        const toggle = li.querySelector(':scope > .tree-node .tree-toggle');
                        if (toggle && toggle.classList.contains('collapsed')) {
                            this.toggleNode(toggle);
                        }
                    } else {
                        li.style.display = 'none';
                    }
                });
            }

            showTooltip(e, node) {
                const definition = node.dataset.definition;
                const uri = node.dataset.uri;
                const label = node.querySelector('.tree-label')?.textContent || '';

                let tooltipHtml = '<div class="tree-tooltip-title">' + this.escapeHtml(label) + '</div>';
                if (definition) tooltipHtml += '<div>' + this.escapeHtml(definition) + '</div>';
                if (uri) tooltipHtml += '<div class="tree-tooltip-uri">' + this.escapeHtml(uri) + '</div>';

                this.tooltip.innerHTML = tooltipHtml;
                this.tooltip.classList.add('visible');
                this.moveTooltip(e);
            }

            hideTooltip() { this.tooltip.classList.remove('visible'); }

            moveTooltip(e) {
                const x = e.clientX + 15;
                const y = e.clientY + 15;
                const rect = this.tooltip.getBoundingClientRect();
                const maxX = window.innerWidth - rect.width - 20;
                const maxY = window.innerHeight - rect.height - 20;
                this.tooltip.style.left = Math.min(x, maxX) + 'px';
                this.tooltip.style.top = Math.min(y, maxY) + 'px';
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Initialize OntologyTreeManager
        new OntologyTreeManager();
    </script>
</body>

</html>