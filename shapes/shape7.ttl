@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh:    <http://www.w3.org/ns/shacl#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ex:    <http://www.example.org/#> .
@prefix owl:   <http://www.w3.org/2002/07/owl#> .
@prefix pmd:   <https://w3id.org/pmd/co/> .
@prefix shape:   <https://w3id.org/pmd/co/shapes> .
@prefix obo: <http://purl.obolibrary.org/obo/> .


### Inspired by Copy of copy of Frame 28b
### Approach bottom up from values to the chemical composition
### TODO: chains of properties

pmd:ProportionShape 
    rdf:type sh:NodeShape ; 
    sh:targetClass pmd:PMD_0020101 ;  #proportion (mass, volume , molar)
    sh:property [
        sh:path obo:BFO_0000059 ; #concretizes
        sh:minCount 1 ; 
        sh:maxCount 1 ; 
        sh:node pmd:ScalarValueSpecificationShape ;
    ] ;
    sh:closed true ;
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .

pmd:PortionOfMatterShape
    rdf:type sh:NodeShape ; 
    sh:targetClass pmd:PMD_0020025 ; #pure substances under portion of matter
    sh:property [
        sh:path obo:BFO_0000196 ; #bearer of
        sh:node pmd:ProportionShape ;
    ] ;
    sh:closed true ;
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .

pmd:ChemicalCompositionSpecificationShape 
    rdf:type sh:NodeShape ; 
    sh:targetClass pmd:PMD_0020004 ; #chemical composition specification
    sh:property [
        sh:path obo:BFO_0000178 ; #has continious part
        sh:node pmd:ScalarValueSpecificationShape ; 
        sh:minCount 1 ;
    ] ;
    sh:closed true ;
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .

pmd:ChemicalCompositionShape
    rdf:type sh:NodeShape ; 
    sh:targetClass pmd:PMD_0000551 ; #chemical composition 
    sh:property [
        sh:path obo:BFO_0000059 ; #concretizes
        sh:node pmd:ChemicalCompositionSpecificationShape ;
        sh:minCount 1 ; 
        sh:maxCount 1 ; 
    ] ; 
    sh:closed true ;
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .

pmd:MaterialChemicalCompositionShape
    rdf:type sh:NodeShape ; 
    sh:targetClass pmd:PMD_0000000 ; #material
    sh:property [
        sh:path obo:BFO_0000196 ; #bearer of
        sh:node pmd:ChemicalCompositionShape ; 
        sh:minCount 1 ; 
        sh:maxCount 1 ; 
    ] ;
    sh:property [
        sh:path pmd:PMD_0020005 ; #consists of
        sh:node pmd:PortionOfMatterShape ; 
        sh:minCount 1 ; 
    ] ;
    sh:property [
        sh:path (pmd:PMD_0020005 obo:BFO_0000196) ; #consists of + bearer of
        sh:equals obo:BFO_0000196 ; 
        #sh:node pmd:PortionOfMatterShape
    ] ;
    # not closed shape because other material properties are to come
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .

pmd:SampleChemicalCompositonShape
    rdf:type sh:NodeShape ; 
    sh:targetClass obo:BFO_0000030 ; #object
    sh:property [
        sh:path pmd:PMD_0020005 ; #consists of
        sh:node pmd:SampleChemicalCompositonShape ; 
        sh:mincount 1 ;
    ] ;
    # not closed shape because other objects features are to come
    sh:ignoredProperties ( rdf:type owl:topDataProperty owl:topObjectProperty ) .



# shape: 
#  a owl:Ontology ;
#    owl:imports sh: ;
#    owl:imports pmd: ;

#	sh:declare [
#		sh:prefix "sh" ;
#		sh:namespace "http://www.w3.org/ns/shacl#"^^xsd:anyURI ;
#	] .


#shape:chemical_composition
#    a sh:NodeShape ;
#    sh:targetClass  pmd:PMD_0000551 ;  #'Chemical Composition'
#    sh:property [            
#        sh:path <http://purl.obolibrary.org/obo/RO_0000080> ; #'quality of'
#        sh:maxCount 1 
#    ] ;
#    sh:property [            
#        sh:path <http://purl.obolibrary.org/obo/RO_0000059>  #'concretizes'
#    ] .
